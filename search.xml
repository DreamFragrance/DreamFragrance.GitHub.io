<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>Androidæ•°æ®å­˜å‚¨</title>
    <url>/2021/09/24/Android%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8/</url>
    <content><![CDATA[<h2 id="å¼•å…¥"><a href="#å¼•å…¥" class="headerlink" title="å¼•å…¥"></a>å¼•å…¥</h2><p>ä½œä¸ºä¸€ä¸ªå®Œæ•´çš„åº”ç”¨ç¨‹åºï¼Œä¸å¯èƒ½æ¯ä¸€æ¬¡æ‰‹æœºé‡å¯äº†ï¼Œæ•´ä¸ªåº”ç”¨ç¨‹åºå°±å’Œåˆšä¸‹è½½æ—¶å€™ä¸€æ ·ï¼Œå› æ­¤æ•°æ®çš„å­˜å‚¨ä¸æ“ä½œæ˜¯å¿…ä¸å¯å°‘çš„ã€‚Android ç³»ç»Ÿä¸ºæˆ‘ä»¬æä¾›äº†4ç§æ•°æ®å­˜å‚¨æ–¹å¼ï¼Œåˆ†åˆ«æ˜¯ï¼šSharedPreferenceã€SQLiteã€ContentProvider å’Œæ–‡ä»¶ã€‚</p>
<span id="more"></span>
<p><br></p>
<h4 id="1-SharedPreference-å­˜å‚¨ï¼š"><a href="#1-SharedPreference-å­˜å‚¨ï¼š" class="headerlink" title="1. SharedPreference å­˜å‚¨ï¼š"></a>1. SharedPreference å­˜å‚¨ï¼š</h4><p><strong>æœ¬è´¨å°±æ˜¯åŸºäº xml æ–‡ä»¶å­˜å‚¨<code>é”®å€¼å¯¹</code>æ•°æ®ï¼Œé€šå¸¸ç”¨æ¥å­˜å‚¨ä¸€äº›ç®€å•çš„é…ç½®ä¿¡æ¯ã€‚</strong></p>
<p>   (1) getPreferencesï¼Œæ–‡ä»¶åä¸ Activity åä¸€è‡´ï¼Œæ˜¯è¯¥ Activity ç‹¬æœ‰çš„ã€‚</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.sharedpreference;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> androidx.appcompat.app.AppCompatActivity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.content.Context;</span><br><span class="line"><span class="keyword">import</span> android.content.SharedPreferences;</span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>{</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line">        SharedPreferences shp = getPreferences(Context.MODE_PRIVATE);</span><br><span class="line">        SharedPreferences.Editor editor = shp.edit();</span><br><span class="line">        editor.putInt(<span class="string">"data"</span>, <span class="number">1234</span>);</span><br><span class="line">        editor.apply();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>æ•°æ®è¢«å†™å…¥åˆ° /data/data/packageï¼ˆåŒ…åï¼‰/shared_prefs/MainActivity.xml ä¸­</p>
<figure class="highlight xml"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version='1.0' encoding='utf-8' standalone='yes' ?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">map</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">int</span> <span class="attr">name</span>=<span class="string">"data"</span> <span class="attr">value</span>=<span class="string">"1234"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">map</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>
<p>â€‹    (2) getSharedPreferences ä¸ (1)ç±»ä¼¼ï¼Œå¯ä»¥è‡ªå·±è®¾ç½®æ–‡ä»¶åï¼Œ è€Œä¸”æ˜¯å…±äº«çš„ã€‚</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.sharedpreference;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> androidx.appcompat.app.AppCompatActivity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.content.Context;</span><br><span class="line"><span class="keyword">import</span> android.content.SharedPreferences;</span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>{</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line">        SharedPreferences shp = getSharedPreferences(<span class="string">"SavedData"</span>, Context.MODE_PRIVATE);</span><br><span class="line">        SharedPreferences.Editor editor = shp.edit();</span><br><span class="line">        editor.putInt(<span class="string">"data"</span>, <span class="number">8888</span>);</span><br><span class="line">        editor.apply();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>æ•°æ®è¢«å†™å…¥åˆ° /data/data/packageï¼ˆåŒ…åï¼‰/shared_prefs/SavedData.xml ä¸­</p>
<figure class="highlight xml"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version='1.0' encoding='utf-8' standalone='yes' ?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">map</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">int</span> <span class="attr">name</span>=<span class="string">"data"</span> <span class="attr">value</span>=<span class="string">"8888"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">map</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>
<p><br></p>
<p><strong>è¿ç”¨åˆ°ViewModelä¸­</strong></p>
<p>ViewModeléƒ¨åˆ†</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.androidviewmodel;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.app.Application;</span><br><span class="line"><span class="keyword">import</span> android.content.Context;</span><br><span class="line"><span class="keyword">import</span> android.content.SharedPreferences;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> androidx.lifecycle.AndroidViewModel;</span><br><span class="line"><span class="keyword">import</span> androidx.lifecycle.LiveData;</span><br><span class="line"><span class="keyword">import</span> androidx.lifecycle.MutableLiveData;</span><br><span class="line"><span class="keyword">import</span> androidx.lifecycle.SavedStateHandle;</span><br><span class="line"><span class="keyword">import</span> androidx.lifecycle.ViewModel;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyViewModel</span> <span class="keyword">extends</span> <span class="title">AndroidViewModel</span> </span>{</span><br><span class="line">    <span class="keyword">private</span> SavedStateHandle handle;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MyViewModel</span><span class="params">(Application application, SavedStateHandle handle)</span> </span>{</span><br><span class="line">        <span class="keyword">super</span>(application);</span><br><span class="line">        <span class="keyword">this</span>.handle = handle;</span><br><span class="line">        <span class="keyword">if</span> (!handle.contains(MainActivity.KEY_NAME)) {</span><br><span class="line">            load();</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> LiveData&lt;Integer&gt; <span class="title">getNumber</span><span class="params">()</span></span>{</span><br><span class="line">        <span class="keyword">return</span> handle.getLiveData(MainActivity.KEY_NAME);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">load</span><span class="params">()</span></span>{</span><br><span class="line">        SharedPreferences shp = getApplication().getSharedPreferences(<span class="string">"data"</span>, Context.MODE_PRIVATE);</span><br><span class="line">        handle.set(MainActivity.KEY_NAME, shp.getInt(MainActivity.KEY_NAME, <span class="number">0</span>));</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">()</span></span>{</span><br><span class="line">        SharedPreferences shp = getApplication().getSharedPreferences(<span class="string">"data"</span>, Context.MODE_PRIVATE);</span><br><span class="line">        SharedPreferences.Editor editor = shp.edit();</span><br><span class="line">        editor.putInt(MainActivity.KEY_NAME, handle.get(MainActivity.KEY_NAME));</span><br><span class="line">        editor.apply();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> x)</span></span>{</span><br><span class="line">        handle.set(MainActivity.KEY_NAME, getNumber().getValue() + x);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>
<p>MainaActivityéƒ¨åˆ†</p>
<p>è¿™é‡Œ viewModel.save() ä¹‹æ‰€ä»¥æ”¾åœ¨onPause() ä¸­ï¼Œæ˜¯å› ä¸ºæ¯”è¾ƒä¿é™©ï¼Œå¦‚æœæ”¾åœ¨ add() ä¸­ï¼Œæ¯åŠ ä¸€æ¬¡éƒ½è¿›è¡Œä¸€æ¬¡è¯»å†™æ“ä½œï¼Œå¼€é”€ä¼šæ¯”è¾ƒå¤§ï¼Œè€Œå¦‚æœæ”¾åœ¨onStop() æˆ– onDestory() ä¸­ï¼Œåˆä¼šé¢ä¸´ç€ä¸‡ä¸€å‡ºç°æ„æ–™ä»¥å¤–çš„é—®é¢˜æ²¡æœ‰è°ƒç”¨è¿™ä¸¤ä¸ªæ–¹æ³•å¯¼è‡´æ•°æ®ä¸¢å¤±å°±æ¯”è¾ƒå°´å°¬äº†ã€‚</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.androidviewmodel;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> androidx.appcompat.app.AppCompatActivity;</span><br><span class="line"><span class="keyword">import</span> androidx.databinding.DataBindingUtil;</span><br><span class="line"><span class="keyword">import</span> androidx.lifecycle.SavedStateViewModelFactory;</span><br><span class="line"><span class="keyword">import</span> androidx.lifecycle.ViewModelProvider;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.example.androidviewmodel.databinding.ActivityMainBinding;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> </span>{</span><br><span class="line">    <span class="keyword">private</span> ActivityMainBinding binding;</span><br><span class="line">    <span class="keyword">private</span> MyViewModel viewModel;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">static</span> String KEY_NAME = <span class="string">"Number"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>{</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        viewModel = <span class="keyword">new</span> ViewModelProvider(<span class="keyword">this</span>).get(MyViewModel.class);</span><br><span class="line">        binding = DataBindingUtil.setContentView(<span class="keyword">this</span>, R.layout.activity_main);</span><br><span class="line">        binding.setData(viewModel);</span><br><span class="line">        binding.setLifecycleOwner(<span class="keyword">this</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onPause</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">super</span>.onPause();</span><br><span class="line">        viewModel.save();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
]]></content>
      <categories>
        <category>Android</category>
      </categories>
  </entry>
  <entry>
    <title>Hexoä½¿ç”¨è‡ªå®šä¹‰çš„CSSå’ŒJS</title>
    <url>/2021/08/26/Hexo%E4%BD%BF%E7%94%A8%E8%87%AA%E5%AE%9A%E4%B9%89%E7%9A%84CSS%E5%92%8CJS/</url>
    <content><![CDATA[<h2 id="Hexoçš„æ‰§è¡Œé€»è¾‘"><a href="#Hexoçš„æ‰§è¡Œé€»è¾‘" class="headerlink" title="Hexoçš„æ‰§è¡Œé€»è¾‘"></a>Hexoçš„æ‰§è¡Œé€»è¾‘</h2><p>Hexoæ˜¯æ ¹æ®ç”¨æˆ·å†™çš„mdæ–‡ä»¶è¿›è¡Œæ¸²æŸ“ï¼Œå¾—åˆ°å¯¹åº”çš„htmlæ–‡ä»¶åœ¨ç½‘ç«™ä¸Šæ˜¾ç¤ºã€‚ä½†æœ‰çš„æ—¶å€™ä¼šéœ€è¦è‡ªå®šä¹‰é¡µé¢ï¼Œå½“ç„¶Hexoä¹Ÿç»™æˆ‘ä»¬é¢„ç•™äº†è§£å†³æ–¹æ¡ˆã€‚</p>
<p>è¿™é‡Œæˆ‘è¦å®ç°çš„æ•ˆæœå°±æ˜¯æ–°å»ºä¸€ä¸ªæ¸¸æˆæ ‡ç­¾é¡µï¼Œæ•ˆæœå¦‚ä¸‹ã€‚</p>
<p><img src="https://z3.ax1x.com/2021/08/29/hG12W9.png" alt="game"></p>
<p><br></p>
<h2 id="åˆ›å»ºæ ‡ç­¾"><a href="#åˆ›å»ºæ ‡ç­¾" class="headerlink" title="åˆ›å»ºæ ‡ç­¾"></a>åˆ›å»ºæ ‡ç­¾</h2><p>é¦–å…ˆï¼Œè¦æ–°å»ºä¸€ä¸ªæ ‡ç­¾é¡µé¢å°±éœ€è¦åœ¨NexTçš„é…ç½®æ–‡ä»¶ä¸­æ·»åŠ æ ‡ç­¾ä»¥åŠå¯¹åº”è·¯ç”±ã€‚</p>
<p>å…¶ä¸­<code>fa fa-gamepad</code>æ˜¯<a href="http://www.fontawesome.com.cn">Font Awesome</a>æä¾›çš„çŸ¢é‡å›¾æ ‡ã€‚</p>
<figure class="highlight markdown"><table><tbody><tr><td class="code"><pre><span class="line">menu:</span><br><span class="line">  home: / || fa fa-home</span><br><span class="line">  #about: /about/ || fa fa-user</span><br><span class="line">  tags: /tags/ || fa fa-tags</span><br><span class="line">  categories: /categories/ || fa fa-th</span><br><span class="line">  archives: /archives/ || fa fa-archive</span><br><span class="line">  #schedule: /schedule/ || fa fa-calendar</span><br><span class="line">  #sitemap: /sitemap.xml || fa fa-sitemap</span><br><span class="line">  #commonweal: /404/ || fa fa-heartbeat</span><br><span class="line">  game: /game/ || fa fa-gamepad</span><br></pre></td></tr></tbody></table></figure>
<p>å¦‚æœä¸æƒ³è¦è‹±æ–‡çš„æ ‡ç­¾çš„è¯ï¼Œä»¥ä¸­æ–‡ä¸¾ä¾‹ï¼Œå¯ä»¥åˆ°<code>themes/next/languages/zh-CN.yml</code>ä¸‹æ·»åŠ gameå¯¹åº”çš„ä¸­æ–‡ã€‚</p>
<figure class="highlight markdown"><table><tbody><tr><td class="code"><pre><span class="line">menu:</span><br><span class="line">  home: é¦–é¡µ</span><br><span class="line">  archives: å½’æ¡£</span><br><span class="line">  categories: åˆ†ç±»</span><br><span class="line">  tags: æ ‡ç­¾</span><br><span class="line">  about: å…³äº</span><br><span class="line">  search: æœç´¢</span><br><span class="line">  schedule: æ—¥ç¨‹è¡¨</span><br><span class="line">  sitemap: ç«™ç‚¹åœ°å›¾</span><br><span class="line">  commonweal: å…¬ç›Š 404</span><br><span class="line">  game: æ¸¸æˆ</span><br></pre></td></tr></tbody></table></figure>
<p>ç„¶åä½¿ç”¨gitå‘½ä»¤<code>hexo new page game</code>ï¼Œåˆ›å»º/gameå¯¹åº”mdæ–‡ä»¶ã€‚</p>
<p>æ³¨ï¼šå¦‚éœ€æ›´æ”¹ä¸€äº›å…¨å±€æ ·å¼ï¼Œå¯åˆ°Nexté…ç½®æ–‡ä»¶çš„<code>custom_file_path</code>ä¸­ä¿®æ”¹</p>
<span id="more"></span>
<p><br></p>
<h2 id="è‡ªå®šä¹‰æ¸²æŸ“"><a href="#è‡ªå®šä¹‰æ¸²æŸ“" class="headerlink" title="è‡ªå®šä¹‰æ¸²æŸ“"></a>è‡ªå®šä¹‰æ¸²æŸ“</h2><p>è‡ªå®šä¹‰æ¸²æŸ“åˆ†ä¸ºä¸¤ç§ï¼Œä¸€ç§æ˜¯ä¸»é¢˜å†…æ¸²æŸ“ï¼Œä¸€ç§æ˜¯å®Œå…¨é¡µé¢æ¸²æŸ“ã€‚</p>
<h4 id="1-ä¸»é¢˜å†…æ¸²æŸ“"><a href="#1-ä¸»é¢˜å†…æ¸²æŸ“" class="headerlink" title="1.ä¸»é¢˜å†…æ¸²æŸ“"></a>1.ä¸»é¢˜å†…æ¸²æŸ“</h4><p><code>layout: false</code>è¡¨ç¤ºè¯¥mdä¸ä¼šç»è¿‡layoutçš„æ¸²æŸ“ã€‚</p>
<p>åŒæ—¶å¯ä»¥ä¿å­˜æ·»åŠ çš„æ¨¡å—ï¼Œä¸»é¢˜çš„å¤´éƒ¨ä¿¡æ¯ï¼Œä»…å¯¹ä¸»ä½“éƒ¨åˆ†è¿›è¡Œè‡ªå®šä¹‰ã€‚</p>
<figure class="highlight markdown"><table><tbody><tr><td class="code"><pre><span class="line">title: game</span><br><span class="line">date: 2021-08-26 15:45:42</span><br><span class="line">layout: false</span><br></pre></td></tr></tbody></table></figure>
<p>è¿™é‡Œå¤´éƒ¨çš„å¯¼èˆªæ ä»¥åŠä¾§è¾¹çš„ç»Ÿè®¡æ éƒ½æ˜¯ä¿å­˜çš„ã€‚</p>
<p><img src="https://z3.ax1x.com/2021/08/29/hG12W9.png" alt="game"></p>
<h4 id="2-å®Œå…¨é¡µé¢æ¸²æŸ“"><a href="#2-å®Œå…¨é¡µé¢æ¸²æŸ“" class="headerlink" title="2.å®Œå…¨é¡µé¢æ¸²æŸ“"></a>2.å®Œå…¨é¡µé¢æ¸²æŸ“</h4><p>åœ¨Hexoçš„é…ç½®æ–‡ä»¶ä¸­ï¼Œ<code>skip_render</code>ç”¨æ¥é…ç½®è·³è¿‡æ¸²æŸ“çš„æ–‡ä»¶ã€‚</p>
<p>ä¾‹ï¼š<code>skip_render: game/*</code>ï¼ŒæŒ‡game/ä¸‹çš„æ–‡ä»¶ä¸ä¼šè¢«æ¸²æŸ“ã€‚</p>
<p>è‹¥æ˜¯<code>game/**</code>åˆ™ä»£è¡¨ç›®å½•é€’å½’ï¼ŒåŒ…å«å­ç›®å½•ä¸­çš„æ–‡ä»¶ã€‚</p>
<p>æˆ–æ˜¯æŒ‡å®šæŸä¸ªæ–‡ä»¶ï¼š<code>game/index.md</code></p>
<figure class="highlight markdown"><table><tbody><tr><td class="code"><pre><span class="line"><span class="section"># Directory</span></span><br><span class="line">source<span class="emphasis">_dir: source</span></span><br><span class="line"><span class="emphasis">public_</span>dir: public</span><br><span class="line">tag<span class="emphasis">_dir: tags</span></span><br><span class="line"><span class="emphasis">archive_</span>dir: archives</span><br><span class="line">category<span class="emphasis">_dir: categories</span></span><br><span class="line"><span class="emphasis">code_</span>dir: downloads/code</span><br><span class="line">i18n<span class="emphasis">_dir: :lang</span></span><br><span class="line"><span class="emphasis">skip_</span>render: game/<span class="emphasis">*</span></span><br></pre></td></tr></tbody></table></figure>
<p>å®Œå…¨é¡µé¢æ¸²æŸ“æ­£å¦‚å…¶åï¼Œä¸ä¼šåŒ…å«ä¸»é¢˜æ¨¡å—ç­‰ä¿¡æ¯ï¼Œå…¨æƒç”±è‡ªå·±æ¥è®¾è®¡ã€‚</p>
<p>è¿™é‡Œæˆ‘è¿˜æ²¡æœ‰æ·»åŠ CSSå’ŒJSã€‚</p>
<p><img src="https://z3.ax1x.com/2021/08/29/hG1fQ1.png" alt="example2"></p>
<p><br></p>
<h2 id="è‡ªå®šä¹‰CSS"><a href="#è‡ªå®šä¹‰CSS" class="headerlink" title="è‡ªå®šä¹‰CSS"></a>è‡ªå®šä¹‰CSS</h2><p>ä¸»é¢˜å†…æ¸²æŸ“ç”±äºå¤´éƒ¨ä¿¡æ¯æ˜¯ä¸»é¢˜ç»™å®šçš„ï¼Œå› æ­¤CSSä¸èƒ½ç›´æ¥ä½¿ç”¨htmlçš„<code>&lt;style&gt;</code>å¯¼å…¥CSSï¼ŒJSåŒç†ã€‚</p>
<p>æ‰€ä»¥éœ€è¦ç›´æ¥ç»™NexTæ·»åŠ æˆ‘ä»¬éœ€è¦çš„CSSæ–‡ä»¶ã€‚</p>
<p>åœ¨<code>themes/next/source/css</code>ä¸­ï¼Œé¦–å…ˆåˆ›å»ºCSSæ–‡ä»¶çš„ç›®å½•ï¼Œä¸ºäº†ä¸ä¸»é¢˜è‡ªå¸¦çš„CSSåŒºåˆ†å¼€ï¼Œæˆ‘ä»¬æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹<code>_mycss</code>ï¼Œç„¶ååˆ›å»º<code>game.styl</code>ï¼Œä»£ç å¦‚ä¸‹ã€‚</p>
<figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line">.game_img *,.game_img *:after,.game_img *:before { -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; }</span><br><span class="line">body .game_img, html .game_img { font-size: 100%; padding: 0; margin: 0;}</span><br><span class="line">body .game_img{</span><br><span class="line">	font-family: 'Lato', Calibri, Arial, sans-serif;</span><br><span class="line">	color: #b3b9bf;</span><br><span class="line">	background: #f9f9f9;</span><br><span class="line">}</span><br><span class="line">.game_img a {</span><br><span class="line">	color: #888;</span><br><span class="line">	text-decoration: none;</span><br><span class="line">}</span><br><span class="line">.game_img a:hover,.game_img a:active {</span><br><span class="line">	color: #333;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">.grid {</span><br><span class="line">	padding: 20px 20px 100px 20px;</span><br><span class="line">	max-width: 1300px;</span><br><span class="line">	margin: 0 auto;</span><br><span class="line">	list-style: none;</span><br><span class="line">	text-align: center;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">.grid li {</span><br><span class="line">	display: inline-block;</span><br><span class="line">	width: 350px;</span><br><span class="line">	margin: 0;</span><br><span class="line">	padding: 20px;</span><br><span class="line">	text-align: left;</span><br><span class="line">	position: relative;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">.grid figure {</span><br><span class="line">	margin: 0;</span><br><span class="line">	position: relative;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">.grid figure img {</span><br><span class="line">	max-width: 100%;</span><br><span class="line">	display: block;</span><br><span class="line">	position: relative;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">.grid figcaption {</span><br><span class="line">	position: absolute;</span><br><span class="line">	top: 0;</span><br><span class="line">	left: 0;</span><br><span class="line">	padding: 20px;</span><br><span class="line">	background: #2c3f52;</span><br><span class="line">	color: #ed4e6e;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">.grid figcaption h3 {</span><br><span class="line">	margin: 0;</span><br><span class="line">	padding: 0;</span><br><span class="line">	color: #fff;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">.grid figcaption span:before {</span><br><span class="line">	content: 'by ';</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">.grid figcaption a {</span><br><span class="line">	text-align: center;</span><br><span class="line">	padding: 5px 10px;</span><br><span class="line">	border-radius: 2px;</span><br><span class="line">	display: inline-block;</span><br><span class="line">	background: #ed4e6e;</span><br><span class="line">	color: #fff;</span><br><span class="line">}</span><br><span class="line">   </span><br><span class="line">/* è¯´æ˜æ–‡å­—æ ·å¼ 1 */</span><br><span class="line"></span><br><span class="line">.cs-style-1 figcaption {</span><br><span class="line">	height: 100%;</span><br><span class="line">	width: 100%;</span><br><span class="line">	opacity: 0;</span><br><span class="line">	text-align: center;</span><br><span class="line">	-webkit-backface-visibility: hidden;</span><br><span class="line">	-moz-backface-visibility: hidden;</span><br><span class="line">	backface-visibility: hidden;</span><br><span class="line">	-webkit-transition: -webkit-transform 0.3s, opacity 0.3s;</span><br><span class="line">	-moz-transition: -moz-transform 0.3s, opacity 0.3s;</span><br><span class="line">	transition: transform 0.3s, opacity 0.3s;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">.no-touch .cs-style-1 figure:hover figcaption,</span><br><span class="line">.cs-style-1 figure.cs-hover figcaption {</span><br><span class="line">	opacity: 1;</span><br><span class="line">	-webkit-transform: translate(15px, 15px);</span><br><span class="line">	-moz-transform: translate(15px, 15px);</span><br><span class="line">	-ms-transform: translate(15px, 15px);</span><br><span class="line">	transform: translate(15px, 15px);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">.cs-style-1 figcaption h3 {</span><br><span class="line">	margin-top: 35px;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">.cs-style-1 figcaption span {</span><br><span class="line">	display: block;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">.cs-style-1 figcaption a {</span><br><span class="line">	margin-top: 20px;</span><br><span class="line">} </span><br></pre></td></tr></tbody></table></figure>
<p>ç„¶åè¿”å›ä¸Šä¸€çº§ç›®å½•ï¼Œç°åœ¨åœ¨<code>themes/next/source/css</code>ä¸­ï¼Œæ‰“å¼€<code>main.styl</code>åœ¨å°¾éƒ¨æ·»åŠ å¦‚ä¸‹ä»£ç ï¼Œå°†æˆ‘ä»¬çš„CSSå¯¼å…¥è¿›æ¥å°±å¥½äº†ï¼</p>
<p>ä¸€å®šè¦åŠ æ³¨é‡Šï¼ä¸ç„¶è¿‡å‡ å¤©éƒ½ä¸çŸ¥é“è¿™ä¸€æ®µCSSæ˜¯å¹²ä»€ä¹ˆç”¨çš„ã€‚</p>
<figure class="highlight markdown"><table><tbody><tr><td class="code"><pre><span class="line">//Games</span><br><span class="line">@import "<span class="emphasis">_mycss/game";</span></span><br></pre></td></tr></tbody></table></figure>
<p><br></p>
<h2 id="è‡ªå®šä¹‰JS"><a href="#è‡ªå®šä¹‰JS" class="headerlink" title="è‡ªå®šä¹‰JS"></a>è‡ªå®šä¹‰JS</h2><p>åŒCSSä¸€æ ·ï¼Œæ¥åˆ°<code>themes/next/source/js</code>ä¸‹ï¼Œå…ˆåˆ›å»ºä¸€ä¸ªæˆ‘ä»¬è‡ªå·±çš„JSæ–‡ä»¶å¤¹<code>game</code>ï¼Œç„¶åå°†æˆ‘ä»¬é¢„å…ˆä¸‹è½½å¥½çš„<code>modernizr.custom.js</code>æ”¾åœ¨è¯¥ç›®å½•ä¸‹ï¼Œå‡†å¤‡å·¥ä½œå°±å®Œæ¯•äº†ã€‚</p>
<p>ç„¶åå°±éœ€è¦å¯¼å…¥JSæ–‡ä»¶ï¼Œæˆ‘ä»¬æ‰“å¼€<code>themes/next/layout/_layout.swig</code>ï¼Œåœ¨<code>&lt;head&gt;</code>æ ‡ç­¾ä¸‹ï¼Œæ·»åŠ JSè·¯å¾„ï¼Œå°±å¤§åŠŸå‘Šæˆäº†ï¼</p>
<figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"/js/game/modernizr.custom.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>
<p><br></p>
<h2 id="HTMLä»£ç "><a href="#HTMLä»£ç " class="headerlink" title="HTMLä»£ç "></a>HTMLä»£ç </h2><p>æœ€åé™„ä¸Šæˆ‘çš„HTMLä»£ç ï¼Œç›®å‰åªæœ‰ä¸€ä¸ªæ¡†æ¶ï¼Œæ¸¸æˆè¿˜æ²¡æœ‰å†™<span class="github-emoji" style="display:inline;vertical-align:middle"><span>ğŸŒ</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f31d.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></p>
<figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"game_img"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">"grid cs-style-1"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">figure</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"/uploads/images/tetris.jpg"</span> <span class="attr">alt</span>=<span class="string">"img04"</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">figcaption</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">h3</span>&gt;</span>ä¿„ç½—æ–¯æ–¹å—<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">span</span>&gt;</span>DeFlory<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>Take a look<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;/<span class="name">figcaption</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">figure</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">figure</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"/uploads/images/tetris.jpg"</span> <span class="attr">alt</span>=<span class="string">"img04"</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">figcaption</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">h3</span>&gt;</span>ä¿„ç½—æ–¯æ–¹å—<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">span</span>&gt;</span>DeFlory<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>Take a look<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;/<span class="name">figcaption</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">figure</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">figure</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"/uploads/images/tetris.jpg"</span> <span class="attr">alt</span>=<span class="string">"img04"</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">figcaption</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">h3</span>&gt;</span>ä¿„ç½—æ–¯æ–¹å—<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">span</span>&gt;</span>DeFlory<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>Take a look<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;/<span class="name">figcaption</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">figure</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>
]]></content>
      <categories>
        <category>Hexo</category>
      </categories>
      <tags>
        <tag>å…¥é—¨</tag>
      </tags>
  </entry>
  <entry>
    <title>Activityç”Ÿå‘½å‘¨æœŸ</title>
    <url>/2021/09/23/Android%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/</url>
    <content><![CDATA[<h2 id="ActivityçŠ¶æ€"><a href="#ActivityçŠ¶æ€" class="headerlink" title="ActivityçŠ¶æ€"></a>ActivityçŠ¶æ€</h2><p>Activity ç”Ÿå‘½å‘¨æœŸæ˜¯æŒ‡ Activity ä»<code>åˆ›å»º</code>åˆ°<code>é”€æ¯</code>çš„è¿‡ç¨‹ï¼Œåœ¨è¿™ä¸€è¿‡ç¨‹ä¸­ï¼ŒActivity ä¸€èˆ¬å¤„äº4ç§çŠ¶æ€ï¼Œå³Active/Runningã€Pausedã€Stopã€Killedã€‚</p>
<ol>
<li>Active/Runningã€‚æ­¤æ—¶ Activity ä¸€å®šå¤„äºå±å¹•çš„æœ€é¡¶ç«¯ï¼Œå¯ä»¥è¢«çœ‹åˆ°ï¼Œå¹¶ä¸”å¯ä»¥ä¸ç”¨æˆ·è¿›è¡Œäº¤äº’ã€‚å¯¹äº Activity æ ˆæ¥è¯´ï¼Œå®ƒå¤„äº<code>æ ˆé¡¶</code>ã€‚</li>
<li>Pausedã€‚æ­¤æ—¶ Activity åœ¨å±å¹•ä¸Šä»ç„¶<code>å¯è§</code>ï¼Œä½†å®ƒå·²ç»å¤±å»äº†ç„¦ç‚¹ï¼Œç”¨æˆ·ä¸èƒ½ä¸ä¹‹äº¤äº’ã€‚å¤„äºæš‚åœçš„ Activity ä»ç„¶æ˜¯å­˜æ´»çš„ï¼Œå®ƒä»ç„¶ç»´æŒç€å…¶å†…éƒ¨çš„çŠ¶æ€çš„ä¿¡æ¯ï¼Œä½†æ˜¯ç³»ç»Ÿå¯èƒ½ä¼šåœ¨å†…å­˜ä¸è¶³æ—¶æ€æ­»è¯¥ Activityã€‚</li>
<li>Stopã€‚æ­¤æ—¶ Activity åœ¨å±å¹•ä¸Šä¸èƒ½è¢«ç”¨æˆ·æ‰€è§ï¼Œå³è¯¥ Activity è¢«å…¶å®ƒ Activity æ‰€<code>é®ç›–</code>ã€‚åŒ Paused çŠ¶æ€ç±»ä¼¼ï¼Œå¤„äºåœæ­¢çŠ¶æ€çš„ Activity ä»ç„¶ä¿ç•™ç€å…¶å†…éƒ¨çš„çŠ¶æ€å’Œæˆå‘˜ä¿¡æ¯ï¼Œä½†æ˜¯ä¼šç”±äºæ‰‹æœºç³»ç»Ÿå†…å­˜è¢«å¾ç”¨è€Œè¢«ç³»ç»Ÿæ€æ­»å›æ”¶ã€‚</li>
<li>Killedã€‚Activity è¢«ç³»ç»Ÿæ€æ­»<code>å›æ”¶</code>æˆ–æœªå¯åŠ¨ã€‚</li>
</ol>
<p><br></p>
<h2 id="ç”Ÿå‘½å‘¨æœŸçš„äº‹ä»¶å›è°ƒå‡½æ•°"><a href="#ç”Ÿå‘½å‘¨æœŸçš„äº‹ä»¶å›è°ƒå‡½æ•°" class="headerlink" title="ç”Ÿå‘½å‘¨æœŸçš„äº‹ä»¶å›è°ƒå‡½æ•°"></a>ç”Ÿå‘½å‘¨æœŸçš„äº‹ä»¶å›è°ƒå‡½æ•°</h2><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">å‡½æ•°</th>
<th style="text-align:center">æè¿°</th>
<th style="text-align:center">å¯è¢«æ€æ­»</th>
<th style="text-align:center">ä¸‹ä¸€ä¸ª</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">onCreate()</td>
<td style="text-align:center">å½“ Activity ç¬¬ä¸€æ¬¡è¢«åˆ›å»ºæ—¶è°ƒç”¨</td>
<td style="text-align:center">å¦</td>
<td style="text-align:center">onStart()</td>
</tr>
<tr>
<td style="text-align:center">onRestart()</td>
<td style="text-align:center">å½“ Activity åœæ­¢åï¼Œå†æ¬¡å¯åŠ¨å‰è°ƒç”¨</td>
<td style="text-align:center">å¦</td>
<td style="text-align:center">onStart()</td>
</tr>
<tr>
<td style="text-align:center">onStart()</td>
<td style="text-align:center">å½“ Activity æ­£è¦å˜å¾—ä¸ºç”¨æˆ·æ‰€è§æ—¶è¢«è°ƒç”¨<br>å½“ Activity è½¬å‘å‰å°æ—¶ç»§ä»¥ onResume()<br>å½“ Activity å˜ä¸ºéšè—æ—¶ç»§ä»¥ onStop()</td>
<td style="text-align:center">å¦</td>
<td style="text-align:center">onResume() <br>onStop()</td>
</tr>
<tr>
<td style="text-align:center">onResume()</td>
<td style="text-align:center">å½“ Activity å¼€å§‹ä¸ç”¨æˆ·è¿›è¡Œäº¤äº’å‰è¢«è°ƒç”¨<br>æ­¤æ—¶ Activity ä½äºå †æ ˆé¡¶éƒ¨ï¼Œç”¨æˆ·å¯è§ã€‚ç»§ä»¥ onPause()</td>
<td style="text-align:center">å¦</td>
<td style="text-align:center">onPause()</td>
</tr>
<tr>
<td style="text-align:center">onPause()</td>
<td style="text-align:center">å½“ç³»ç»Ÿå°†è¦å¯åŠ¨å¦ä¸€ä¸ª Activity æˆ–è€…å¼¹å‡ºå¯¹è¯æ¡†æ—¶è°ƒç”¨<br>æ­¤æ–¹æ³•ä¼šå°†æ‰€æœ‰æŒä¹…æ€§æ•°æ®å†™å…¥å­˜å‚¨ä¸­ï¼Œä¸‹ä¸€ä¸ª Activity å¿…é¡»å¾…å…¶å®Œæˆæ‰èƒ½ç»§ç»­<br>å½“ Activity é‡æ–°å›åˆ°å‰å°æ—¶ç»§ä»¥ onResume()<br>å½“ Activity å˜ä¸ºç”¨æˆ·ä¸å¯è§æ—¶ç»§ä»¥ onStop()</td>
<td style="text-align:center">æ˜¯</td>
<td style="text-align:center">onResume()<br>onStop()</td>
</tr>
<tr>
<td style="text-align:center">onStop()</td>
<td style="text-align:center">å½“ Activity ä¸å†ä¸ºç”¨æˆ·å¯è§æ—¶è°ƒç”¨<br>è¿™å¯èƒ½å‘ç”Ÿåœ¨å®ƒè¢«é”€æ¯æˆ–è€…å¦ä¸€ä¸ª Activity ï¼ˆå¯èƒ½æ˜¯ç°å­˜æˆ–æ–°å»ºçš„ï¼‰å›åˆ°è¿è¡ŒçŠ¶æ€å¹¶è¦†ç›–å®ƒæ—¶<br>å¦‚æœ Activity å†æ¬¡å›åˆ°å‰å°è·Ÿç”¨æˆ·äº¤äº’åˆ™ç»§ä»¥ onRestart()<br>å¦‚æœå…³é—­ Activity åˆ™ç»§ä»¥ onDestory()</td>
<td style="text-align:center">æ˜¯</td>
<td style="text-align:center">onRestart()<br>onDestory()</td>
</tr>
<tr>
<td style="text-align:center">onDestroy()</td>
<td style="text-align:center">åœ¨ Activity é”€æ¯å‰è°ƒç”¨<br>è¿™å¯èƒ½å‘ç”Ÿåœ¨ Activity ç»“æŸï¼ˆè°ƒç”¨å®ƒçš„ finish() æ–¹æ³•ï¼‰æˆ–è€…å› ä¸ºç³»ç»Ÿéœ€è¦ä¸´æ—¶ç©ºé—´è€Œé”€æ¯è¯¥ Activity å®ä¾‹æ—¶<br>å¯ä»¥ç”¨ isFinishing() æ¥åŒºåˆ†è¿™ä¸¤ç§æƒ…å†µ</td>
<td style="text-align:center">æ˜¯</td>
<td style="text-align:center">æ— </td>
</tr>
</tbody>
</table>
</div>
<p>æ³¨ï¼šè¡¨æ ¼ä¸­â€œå¯è¢«æ€æ­»â€ä¸€åˆ—æ˜¯æŒ‡åœ¨è¯¥æ–¹æ³•è¢«è°ƒç”¨åï¼Œç³»ç»Ÿæ˜¯å¦å¯ä»¥æ€æ­»åŒ…å«æ­¤ Activity çš„è¿›ç¨‹ã€‚</p>
<p><br></p>
<p>ä¸ºäº†è·å– Activity è¢«æ€æ­»å‰çš„çŠ¶æ€ï¼Œå¯ä»¥åœ¨ Activity è¢«é”€æ¯å‰ä½¿ç”¨ onSaveInstanceState() æ–¹æ³•ã€‚</p>
<p>å®ƒä¼šå°†ä¸€ä¸ª<code>é”®å€¼å¯¹</code>æ–¹å¼è®°å½•çš„ Activity åŠ¨æ€çŠ¶æ€çš„ Bundle å¯¹è±¡ä¼ é€’ç»™è¯¥æ–¹æ³•ã€‚</p>
<p>è€Œå½“ Activity å†æ¬¡å¯åŠ¨æ—¶ï¼Œè¿™ä¸ª Bundle ä¼šä¼ é€’ç»™ onCreate() æ–¹æ³•æˆ–éšç€ onStart() æ–¹æ³•è°ƒç”¨çš„ onRestoreInstanceState()ï¼Œæ‰€ä»¥å®ƒä»¬ä¸¤ä¸ªéƒ½èƒ½æ¢å¤ä¹‹å‰ä¿å­˜çš„çŠ¶æ€ã€‚</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">æ–¹æ³•</th>
<th style="text-align:center">æè¿°</th>
<th style="text-align:center">æ˜¯å¦å¯ç»ˆæ­¢</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">onSaveInstanceState()</td>
<td style="text-align:center">Android ç³»ç»Ÿå› èµ„æºä¸è¶³è€Œç»ˆæ­¢ Activity å‰è¢«è°ƒç”¨ï¼Œç”¨ä»¥ä¿å­˜ Activity çš„çŠ¶æ€ä¿¡æ¯<br>ä¾› onCreate() å’Œ onRestoreInstanceState()æ–¹æ³•æ¢å¤ä½¿ç”¨</td>
<td style="text-align:center">å¦</td>
</tr>
<tr>
<td style="text-align:center">onRestoreInstanceState()</td>
<td style="text-align:center">æ¢å¤ onSaveInstanceState() ä¿å­˜çš„ Activity çŠ¶æ€ä¿¡æ¯<br>åœ¨ onStart() å’Œ onResume() æ–¹æ³•ä¹‹é—´ä½¿ç”¨</td>
<td style="text-align:center">å¦</td>
</tr>
</tbody>
</table>
</div>
<span id="more"></span>
<p><br></p>
<h2 id="å®ä¾‹"><a href="#å®ä¾‹" class="headerlink" title="å®ä¾‹"></a>å®ä¾‹</h2><p>Android ç•Œé¢å¦‚ä¸‹ï¼Œå½“å‰æ˜¯åœ¨ Activity1 ä¸‹ã€‚</p>
<p><img src="https://z3.ax1x.com/2021/09/23/40dtr8.png" height="400px" width="230px"></p>
<p>ç‚¹å‡» â€œè¿›å…¥Activity2â€ï¼Œæ­¤æ—¶å…ˆè°ƒç”¨äº† onPause() ï¼ŒActivity1 å…ˆè¿›å…¥PausedçŠ¶æ€ï¼Œç„¶åå†è°ƒç”¨onCreate() -&gt; onStart() -&gt; onResume() ï¼Œæ­¤ä¹ƒåˆ›å»º Activity ä¸‰ä»¶å¥—ã€‚ç„¶å Activity1 è°ƒç”¨ onStop() è½¬å‘åå°ï¼ŒonSaveInstanceState() ä¿å­˜çŠ¶æ€ä¿¡æ¯ã€‚</p>
<div style="display: flex;justify-content: center;">
    <img src="https://z3.ax1x.com/2021/09/24/4BJI1K.png" height="400px" width="230px" style="margin: 50px;">
    <img src="https://z3.ax1x.com/2021/09/23/40wUQx.png" height="400px" width="230px" style="margin: 50px;">
</div>

<figure class="highlight markdown"><table><tbody><tr><td class="code"><pre><span class="line">E/Activity1: onPause</span><br><span class="line">E/Activity2: onCreate</span><br><span class="line">E/Activity2: onStart</span><br><span class="line">E/Activity2: onResume</span><br><span class="line">E/Activity1: onStop</span><br><span class="line">E/Activity1: onSaveInstanceState</span><br></pre></td></tr></tbody></table></figure>
<p>éšå³ç‚¹å‡»â€œè¿›å…¥ Activity1 â€å›åˆ°ä¸»ç•Œé¢ï¼Œä¸ä¸Šé¢æƒ…å†µç±»ä¼¼ï¼Œæ˜¯å…ˆæš‚åœ Activity2ï¼Œè€Œå<code>åˆ›å»º</code>Activity1ï¼Œåœ¨ä¿å­˜ Activity2 çš„çŠ¶æ€ä¿¡æ¯ã€‚</p>
<div style="display: flex;justify-content: center;">
    <img src="https://z3.ax1x.com/2021/09/24/4BNr1P.png" height="400px" width="230px" style="margin: 50px;">
    <img src="https://z3.ax1x.com/2021/09/23/40dtr8.png" height="400px" width="230px" style="margin: 50px;">
</div>

<figure class="highlight markdown"><table><tbody><tr><td class="code"><pre><span class="line">E/Activity2: onPause</span><br><span class="line">E/Activity1: onCreate</span><br><span class="line">E/Activity1: onStart</span><br><span class="line">E/Activity1: onResume</span><br><span class="line">E/Activity2: onStop</span><br><span class="line">E/Activity2: onSaveInstanceState</span><br></pre></td></tr></tbody></table></figure>
<p>ä½†å¦‚æœä½¿ç”¨çš„æ˜¯ç‰©ç†æŒ‰é”®<span class="github-emoji" style="display:inline;vertical-align:middle"><span>â—€</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/25c0.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>ï¼Œåˆ™æ˜¯<code>é‡å¯</code> Activity1ï¼Œç„¶åæŠŠ Activity2 <code>é”€æ¯</code>ã€‚</p>
<div style="display: flex;justify-content: center;">
    <img src="https://z3.ax1x.com/2021/09/24/4BNocV.png" height="400px" width="230px" style="margin: 50px;">
    <img src="https://z3.ax1x.com/2021/09/23/40dtr8.png" height="400px" width="230px" style="margin: 50px;">
</div>

<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">E/Activity2: onPause</span><br><span class="line">E/Activity1: onRestart</span><br><span class="line">E/Activity1: onStart</span><br><span class="line">E/Activity1: onResume</span><br><span class="line">E/Activity2: onStop</span><br><span class="line">E/Activity2: onDestroy</span><br></pre></td></tr></tbody></table></figure>
<p>æœ€åæˆ‘ä»¬å°è¯•ä¸€ä¸‹ç‚¹å‡»â€œè¿›å…¥ Activity3 â€ï¼Œä¼šè·³å‡ºä¸€ä¸ªå¯¹è¯æ¡†ï¼Œæ­¤æ—¶ Activity1 è¿˜æ˜¯å¯è§çš„ã€‚</p>
<p>å› æ­¤æ˜¯æ²¡æœ‰ onStop() ï¼ˆåœæ­¢ Activityï¼‰å’Œ onSaveInstanceState() ï¼ˆä¿å­˜ Activity çŠ¶æ€ä¿¡æ¯ï¼‰è¿™ä¸€æ­¥çš„ã€‚</p>
<div style="display: flex;justify-content: center;">
    <img src="https://z3.ax1x.com/2021/09/24/4BNx91.png" height="400px" width="230px" style="margin: 50px;">
    <img src="https://z3.ax1x.com/2021/09/24/4BUPBD.png" height="400px" width="230px" style="margin: 50px;">
</div>

<figure class="highlight markdown"><table><tbody><tr><td class="code"><pre><span class="line">E/Activity1: onPause</span><br><span class="line">E/Activity3: onCreate</span><br><span class="line">E/Activity3: onStart</span><br><span class="line">E/Activity3: onResume</span><br></pre></td></tr></tbody></table></figure>
<p>ç‚¹å‡»å¯¹è¯æ¡†å¤–é¢å…³é—­è¯¥å¯¹è¯æ¡†ï¼Œæ˜¯å…ˆæš‚åœ Activity3ï¼Œéšå³ Activity1 è°ƒç”¨ onResume()ï¼Œä½¿å¾—å®ƒå¯ä»¥ä¸ç”¨æˆ·è¿›è¡Œäº¤äº’ï¼Œæœ€ååœæ­¢å¹¶é”€æ¯ Activity3ã€‚</p>
<figure class="highlight markdown"><table><tbody><tr><td class="code"><pre><span class="line">E/Activity3: onPause</span><br><span class="line">E/Activity1: onResume</span><br><span class="line">E/Activity3: onStop</span><br><span class="line">E/Activity3: onDestroy</span><br></pre></td></tr></tbody></table></figure>
]]></content>
      <categories>
        <category>Android</category>
      </categories>
  </entry>
  <entry>
    <title>LeetCodeP0001â€”â€”ä¸¤æ•°ä¹‹å’Œ</title>
    <url>/2021/08/31/LeetCodeP0001%E2%80%94%E2%80%94%E4%B8%A4%E6%95%B0%E4%B9%8B%E5%92%8C/</url>
    <content><![CDATA[<h2 id="é¢˜ç›®"><a href="#é¢˜ç›®" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h2><p>ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ <code>nums</code> å’Œä¸€ä¸ªæ•´æ•°ç›®æ ‡å€¼ <code>target</code>ï¼Œè¯·ä½ åœ¨è¯¥æ•°ç»„ä¸­æ‰¾å‡º <strong>å’Œä¸ºç›®æ ‡å€¼</strong> <code>target</code>  çš„é‚£ ä¸¤ä¸ª <strong>æ•´æ•°</strong>ï¼Œå¹¶è¿”å›å®ƒä»¬çš„æ•°ç»„ä¸‹æ ‡ã€‚</p>
<p>ä½ å¯ä»¥å‡è®¾æ¯ç§è¾“å…¥åªä¼šå¯¹åº”ä¸€ä¸ªç­”æ¡ˆã€‚ä½†æ˜¯ï¼Œæ•°ç»„ä¸­åŒä¸€ä¸ªå…ƒç´ åœ¨ç­”æ¡ˆé‡Œä¸èƒ½é‡å¤å‡ºç°ã€‚</p>
<p>ä½ å¯ä»¥æŒ‰ä»»æ„é¡ºåºè¿”å›ç­”æ¡ˆã€‚</p>
<h3 id="ç¤ºä¾‹1"><a href="#ç¤ºä¾‹1" class="headerlink" title="ç¤ºä¾‹1"></a>ç¤ºä¾‹1</h3><figure class="highlight markdown"><table><tbody><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šnums = [2,7,11,15], target = 9</span><br><span class="line">è¾“å‡ºï¼š[0,1]</span><br><span class="line">è§£é‡Šï¼šå› ä¸º nums[0] + nums[1] == 9 ï¼Œè¿”å› [0, 1] ã€‚</span><br></pre></td></tr></tbody></table></figure>
<span id="more"></span>
<h3 id="ç¤ºä¾‹2"><a href="#ç¤ºä¾‹2" class="headerlink" title="ç¤ºä¾‹2"></a>ç¤ºä¾‹2</h3><figure class="highlight markdown"><table><tbody><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šnums = [3,2,4], target = 6</span><br><span class="line">è¾“å‡ºï¼š[1,2]</span><br></pre></td></tr></tbody></table></figure>
<h3 id="ç¤ºä¾‹3"><a href="#ç¤ºä¾‹3" class="headerlink" title="ç¤ºä¾‹3"></a>ç¤ºä¾‹3</h3><figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šnums = [3,3], target = 6</span><br><span class="line">è¾“å‡ºï¼š[0,1]</span><br></pre></td></tr></tbody></table></figure>
<h3 id="æç¤ºï¼š"><a href="#æç¤ºï¼š" class="headerlink" title="æç¤ºï¼š"></a>æç¤ºï¼š</h3><ul>
<li>2 &lt;= nums.length &lt;= 104</li>
<li>-109 &lt;= nums[i] &lt;= 109</li>
<li>-109 &lt;= target &lt;= 109</li>
<li>åªä¼šå­˜åœ¨ä¸€ä¸ªæœ‰æ•ˆç­”æ¡ˆ</li>
</ul>
<p><br></p>
<h3 id="é¢˜è§£1-æš´åŠ›æœç´¢"><a href="#é¢˜è§£1-æš´åŠ›æœç´¢" class="headerlink" title="é¢˜è§£1: æš´åŠ›æœç´¢"></a>é¢˜è§£1: æš´åŠ›æœç´¢</h3><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>{</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span>[] twoSum(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> target) {</span><br><span class="line">        <span class="keyword">int</span> len = nums.length;</span><br><span class="line">        <span class="keyword">int</span> sum = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;len;i++){</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=i+<span class="number">1</span>;j&lt;len;j++){</span><br><span class="line">                sum = nums[i] + nums[j];</span><br><span class="line">                <span class="keyword">if</span>(sum == target){</span><br><span class="line">                    <span class="keyword">return</span> <span class="keyword">new</span> <span class="keyword">int</span>[]{i,j};</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>ç”¨æ—¶ï¼š50ms</p>
<p>æ—¶é—´å¤æ‚åº¦ï¼šOï¼ˆ$n^2$ï¼‰</p>
<p>ç©ºé—´å¤æ‚åº¦ï¼šSï¼ˆ1ï¼‰</p>
<p><br></p>
<h3 id="é¢˜è§£2-å“ˆå¸ŒæŸ¥æ‰¾"><a href="#é¢˜è§£2-å“ˆå¸ŒæŸ¥æ‰¾" class="headerlink" title="é¢˜è§£2: å“ˆå¸ŒæŸ¥æ‰¾"></a>é¢˜è§£2: å“ˆå¸ŒæŸ¥æ‰¾</h3><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>{</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span>[] twoSum(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> target) {</span><br><span class="line">       Map&lt;Integer, Integer&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">       <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;nums.length;i++){</span><br><span class="line">    	   <span class="keyword">int</span> rest = target - nums[i];</span><br><span class="line">    	   <span class="keyword">if</span>(map.containsKey(rest)){</span><br><span class="line">    		   <span class="keyword">return</span> <span class="keyword">new</span> <span class="keyword">int</span>[]{i,map.get(rest)};</span><br><span class="line">    	   }</span><br><span class="line">    	   map.put(nums[i], i);</span><br><span class="line">       }</span><br><span class="line">       <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>ç”¨æ—¶ï¼š2ms</p>
<p>è¿™é‡Œå°†å“ˆå¸ŒæŸ¥æ‰¾çš„æ—¶é—´å¤æ‚åº¦è¿‘ä¼¼æˆOï¼ˆ1ï¼‰</p>
<p>æ—¶é—´å¤æ‚åº¦ï¼šOï¼ˆ$n$ï¼‰</p>
<p>ç©ºé—´å¤æ‚åº¦ï¼šSï¼ˆ$n$ï¼‰</p>
]]></content>
      <categories>
        <category>LeetCode</category>
      </categories>
      <tags>
        <tag>æ¯æ—¥ä¸€é¢˜</tag>
        <tag>JAVA</tag>
        <tag>å“ˆå¸ŒæŸ¥æ‰¾</tag>
        <tag>LeetCodeTop100</tag>
      </tags>
  </entry>
  <entry>
    <title>KNNç®—æ³•</title>
    <url>/2021/09/12/KNN%E7%AE%97%E6%B3%95/</url>
    <content><![CDATA[<h2 id="ç®—æ³•æ€æƒ³"><a href="#ç®—æ³•æ€æƒ³" class="headerlink" title="ç®—æ³•æ€æƒ³"></a>ç®—æ³•æ€æƒ³</h2><p>KNNç®—æ³•éœ€è¦å…ˆç»™å®šä¸€ç»„å¸¦æœ‰æ ‡ç­¾çš„æ•°æ®ï¼Œéœ€è¦é¢„æµ‹çš„æ•°æ®åªéœ€å’Œç°æœ‰çš„æ•°æ®æµ‹å‡ºâ€œè·ç¦»â€ï¼Œé€‰å‡ºæœ€è¿‘çš„Kä¸ªã€‚</p>
<p>å¦‚æœæ˜¯åˆ†ç±»é—®é¢˜å°±é€‰æ‹©å¤šæ•°çš„é‚£ä¸ªæ ·æœ¬ç±»åˆ«ï¼Œæ˜¯å›å½’é—®é¢˜å°±å–å¹³å‡å€¼å³å¯ã€‚</p>
<p>å› æ­¤Kçš„é€‰æ‹©ä¸€èˆ¬éƒ½æ˜¯å¥‡æ•°ï¼Œä¸ä¼šå‡ºç°å¹³ç¥¨çš„æƒ…å†µã€‚</p>
<p>æ³¨ï¼šKNNå…¨ç§°K-Nearest Neighborï¼Œä¹Ÿå«ä½œKè¿‘é‚»ç®—æ³•ã€‚</p>
<p><br></p>
<h2 id="å®ä¾‹"><a href="#å®ä¾‹" class="headerlink" title="å®ä¾‹"></a>å®ä¾‹</h2><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> Counter</span><br><span class="line"></span><br><span class="line">x1 = np.random.random(<span class="number">100</span>) * <span class="number">10</span></span><br><span class="line">x2 = np.random.random(<span class="number">100</span>) * <span class="number">10</span></span><br><span class="line">y = (x1 &lt; <span class="number">5</span>) &amp; (x2 &lt; <span class="number">5</span>)</span><br><span class="line">y.dtype = np.int8</span><br><span class="line"></span><br><span class="line">plt.scatter(x1[y], x2[y], color = <span class="string">"red"</span>)</span><br><span class="line">plt.scatter(x1[~y], x2[~y], color = <span class="string">"blue"</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></tbody></table></figure>
<p>è¿™é‡Œæˆ‘éšæœºåˆ›å»ºäº†ä¸€ç»„æ•°æ®</p>
<p><img src="https://z3.ax1x.com/2021/09/12/4SxwnK.png" alt=""></p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">z_x1 = np.random.random() * <span class="number">10</span></span><br><span class="line">z_x2 = np.random.random() * <span class="number">10</span></span><br><span class="line">y = y.dtype.int8</span><br><span class="line"></span><br><span class="line">distance = np.sqrt(np.square(x1 - z_x1) + np.square(x2 - z_x2))</span><br><span class="line">distance_nearest = np.argsort(distance)</span><br><span class="line"></span><br><span class="line"><span class="string">''' distance_nearest</span></span><br><span class="line"><span class="string">array([94, 20, 11, 23, 52, 62, 63, 51, 81, 60, 85, 73, 84, 70, 25, 59, 90,</span></span><br><span class="line"><span class="string">       29, 82, 46, 35, 38, 71, 61, 66, 49, 22, 76,  0, 68, 58,  6, 13,  8,</span></span><br><span class="line"><span class="string">       54, 98, 56, 80, 48, 78, 86, 10, 50, 44, 93, 16, 67, 92, 64, 41, 95,</span></span><br><span class="line"><span class="string">       91, 79, 83, 53,  9, 88,  1, 24, 45, 87, 89, 21, 34, 32, 33, 28, 72,</span></span><br><span class="line"><span class="string">       17, 69, 77, 40, 27, 39,  2,  7, 96, 65, 42, 14, 31,  4, 47, 97, 18,</span></span><br><span class="line"><span class="string">        3, 57, 36, 30, 37, 15, 43,  5, 26, 12, 74, 55, 99, 75, 19],</span></span><br><span class="line"><span class="string">      dtype=int64)</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"></span><br><span class="line">plt.scatter(x1[y], x2[y], color = <span class="string">"red"</span>)</span><br><span class="line">plt.scatter(x1[~y], x2[~y], color = <span class="string">"blue"</span>)</span><br><span class="line">plt.scatter(z_x1, z_x2, color = <span class="string">"cyan"</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></tbody></table></figure>
<p><img src="https://z3.ax1x.com/2021/09/12/4p1ai4.png" alt=""></p>
<p>è¿™é‡Œæˆ‘éšæœºç”Ÿæˆäº†ä¸€ä¸ªæµ…è“è‰²çš„ç‚¹ï¼Œæ˜¾è€Œæ˜“è§ï¼Œä»–åº”è¯¥æ˜¯å±äºè“è‰²è¿™ä¸€ç±»çš„ã€‚</p>
<p>ç„¶åæˆ‘ä»¬å»æ±‚å®ƒå’Œç°æœ‰æ•°æ®çš„æ¬§æ‹‰è·ç¦»$d = \sqrt{(x - x_1)^2 +(x-x_2)^2}$ï¼Œå½“ç„¶æ›¼å“ˆé¡¿è·ç¦»æˆ–æ˜¯é—µå¯å¤«æ–¯åŸºè·ç¦»ã€‚</p>
<p>å–å‡ºå‰Kä¸ªè¿›è¡ŒæŠ•ç¥¨å³å¯ã€‚</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">distance = np.sqrt(np.square(x1 - z_x1) + np.square(x2 - z_x2))</span><br><span class="line">distance_nearest = np.argsort(distance)</span><br><span class="line"></span><br><span class="line"><span class="string">""" distance_nearest</span></span><br><span class="line"><span class="string">array([94, 20, 11, 23, 52, 62, 63, 51, 81, 60, 85, 73, 84, 70, 25, 59, 90,</span></span><br><span class="line"><span class="string">       29, 82, 46, 35, 38, 71, 61, 66, 49, 22, 76,  0, 68, 58,  6, 13,  8,</span></span><br><span class="line"><span class="string">       54, 98, 56, 80, 48, 78, 86, 10, 50, 44, 93, 16, 67, 92, 64, 41, 95,</span></span><br><span class="line"><span class="string">       91, 79, 83, 53,  9, 88,  1, 24, 45, 87, 89, 21, 34, 32, 33, 28, 72,</span></span><br><span class="line"><span class="string">       17, 69, 77, 40, 27, 39,  2,  7, 96, 65, 42, 14, 31,  4, 47, 97, 18,</span></span><br><span class="line"><span class="string">        3, 57, 36, 30, 37, 15, 43,  5, 26, 12, 74, 55, 99, 75, 19],</span></span><br><span class="line"><span class="string">      dtype=int64)</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"></span><br><span class="line"><span class="string">""" distance_nearest[:6]</span></span><br><span class="line"><span class="string">array([94, 20, 11, 23, 52, 62], dtype=int64)</span></span><br><span class="line"><span class="string">"""</span></span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">counter = Counter(y[distance_nearest[:<span class="number">6</span>]])		<span class="comment"># Counter({0: 6})</span></span><br><span class="line">counter.most_common(<span class="number">1</span>)							<span class="comment"># [(0, 6)]</span></span><br><span class="line">counter.most_common(<span class="number">1</span>)[<span class="number">0</span>][<span class="number">0</span>]					<span class="comment"># 0</span></span><br></pre></td></tr></tbody></table></figure>
<p><br></p>
<h2 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h2><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">KNN</span>:</span></span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, neighbour</span>):</span></span><br><span class="line">        self.neighbour = neighbour</span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">fit</span>(<span class="params">self, X, y</span>):</span></span><br><span class="line">        self.data = X</span><br><span class="line">        self.label = y</span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">transform</span>(<span class="params">self, X_test</span>):</span></span><br><span class="line">        distance = [np.square(x - x1) <span class="keyword">for</span> X_data <span class="keyword">in</span> self.data </span><br><span class="line">                    				  <span class="keyword">for</span> x,x1 <span class="keyword">in</span> <span class="built_in">zip</span>(X_data,X_test)]</span><br><span class="line">        distance = np.sqrt(np.<span class="built_in">sum</span>(distance))</span><br><span class="line">        distance_sorted_idx = np.argsort(distance)</span><br><span class="line">        distance_sorted_idx_top_k = distance_sorted_idx[:self.neighbour]</span><br><span class="line">        counter = Counter(self.label[distance_sorted_idx_top_k])</span><br><span class="line">        <span class="keyword">return</span> counter.most_common(<span class="number">1</span>)[<span class="number">0</span>][<span class="number">0</span>]</span><br></pre></td></tr></tbody></table></figure>
<p><br></p>
<h2 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h2><p>æ•°æ®ä½¿ç”¨æˆ‘ä»¬ä¹‹å‰éšæœºå‡ºæ¥çš„æ•°æ®ï¼Œæµ‹è¯•ç»“æœä¸åŸç»“æœä¸€è‡´</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># [100, 2]</span></span><br><span class="line">X = np.vstack([x1, x2])</span><br><span class="line">Z = np.vstack([z_x1, z_x2])</span><br><span class="line"><span class="comment"># [2, 100]</span></span><br><span class="line">X = np.transpose(X)</span><br><span class="line">Z = np.transpose(Z)</span><br><span class="line"></span><br><span class="line">knn_clf = KNN(<span class="number">3</span>)</span><br><span class="line">knn_clf.fit(X,y)</span><br><span class="line">knn_clf.transform(Z)			<span class="comment"># 0</span></span><br></pre></td></tr></tbody></table></figure>
]]></content>
      <categories>
        <category>Machine Learning</category>
      </categories>
  </entry>
  <entry>
    <title>LeetCodeP0002â€”â€”ä¸¤æ•°ç›¸åŠ </title>
    <url>/2021/08/31/LeetCodeP0002%E2%80%94%E2%80%94%E4%B8%A4%E6%95%B0%E7%9B%B8%E5%8A%A0/</url>
    <content><![CDATA[<h2 id="é¢˜ç›®"><a href="#é¢˜ç›®" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h2><p>ç»™ä½ ä¸¤ä¸ª éç©º çš„é“¾è¡¨ï¼Œè¡¨ç¤ºä¸¤ä¸ªéè´Ÿçš„æ•´æ•°ã€‚å®ƒä»¬æ¯ä½æ•°å­—éƒ½æ˜¯æŒ‰ç…§ é€†åº çš„æ–¹å¼å­˜å‚¨çš„ï¼Œå¹¶ä¸”æ¯ä¸ªèŠ‚ç‚¹åªèƒ½å­˜å‚¨ ä¸€ä½ æ•°å­—ã€‚</p>
<p>è¯·ä½ å°†ä¸¤ä¸ªæ•°ç›¸åŠ ï¼Œå¹¶ä»¥ç›¸åŒå½¢å¼è¿”å›ä¸€ä¸ªè¡¨ç¤ºå’Œçš„é“¾è¡¨ã€‚</p>
<p>ä½ å¯ä»¥å‡è®¾é™¤äº†æ•°å­— 0 ä¹‹å¤–ï¼Œè¿™ä¸¤ä¸ªæ•°éƒ½ä¸ä¼šä»¥ 0 å¼€å¤´ã€‚</p>
<h3 id="ç¤ºä¾‹1"><a href="#ç¤ºä¾‹1" class="headerlink" title="ç¤ºä¾‹1"></a>ç¤ºä¾‹1</h3><p><img src="https://z3.ax1x.com/2021/09/02/hDEmrR.jpg" alt="example"></p>
<figure class="highlight markdown"><table><tbody><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šl1 = [2,4,3], l2 = [5,6,4]</span><br><span class="line">è¾“å‡ºï¼š[7,0,8]</span><br><span class="line">è§£é‡Šï¼š342 + 465 = 807.</span><br></pre></td></tr></tbody></table></figure>
<span id="more"></span>
<h3 id="ç¤ºä¾‹2"><a href="#ç¤ºä¾‹2" class="headerlink" title="ç¤ºä¾‹2"></a>ç¤ºä¾‹2</h3><figure class="highlight markdown"><table><tbody><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šl1 = [0], l2 = [0]</span><br><span class="line">è¾“å‡ºï¼š[0]</span><br></pre></td></tr></tbody></table></figure>
<h3 id="ç¤ºä¾‹3"><a href="#ç¤ºä¾‹3" class="headerlink" title="ç¤ºä¾‹3"></a>ç¤ºä¾‹3</h3><figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šl1 = [9,9,9,9,9,9,9], l2 = [9,9,9,9]</span><br><span class="line">è¾“å‡ºï¼š[8,9,9,9,0,0,0,1]</span><br></pre></td></tr></tbody></table></figure>
<h3 id="æç¤ºï¼š"><a href="#æç¤ºï¼š" class="headerlink" title="æç¤ºï¼š"></a>æç¤ºï¼š</h3><ul>
<li>æ¯ä¸ªé“¾è¡¨ä¸­çš„èŠ‚ç‚¹æ•°åœ¨èŒƒå›´ <code>[1, 100]</code> å†…</li>
<li><code>0 &lt;= Node.val &lt;= 9</code></li>
<li>é¢˜ç›®æ•°æ®ä¿è¯åˆ—è¡¨è¡¨ç¤ºçš„æ•°å­—ä¸å«å‰å¯¼é›¶</li>
</ul>
<p><br></p>
<h3 id="é¢˜è§£1-åˆ†ä¸‰ç±»è®¨è®º"><a href="#é¢˜è§£1-åˆ†ä¸‰ç±»è®¨è®º" class="headerlink" title="é¢˜è§£1: åˆ†ä¸‰ç±»è®¨è®º"></a>é¢˜è§£1: åˆ†ä¸‰ç±»è®¨è®º</h3><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for singly-linked list.</span></span><br><span class="line"><span class="comment"> * public class ListNode {</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     ListNode next;</span></span><br><span class="line"><span class="comment"> *     ListNode() {}</span></span><br><span class="line"><span class="comment"> *     ListNode(int val) { this.val = val; }</span></span><br><span class="line"><span class="comment"> *     ListNode(int val, ListNode next) { this.val = val; this.next = next; }</span></span><br><span class="line"><span class="comment"> * }</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> ListNode <span class="title">addTwoNumbers</span><span class="params">(ListNode l1, ListNode l2)</span> </span>{</span><br><span class="line">        ListNode pre = <span class="keyword">new</span> ListNode(<span class="number">0</span>);</span><br><span class="line">        ListNode cur = pre;</span><br><span class="line">        <span class="keyword">int</span> carry = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(l1 != <span class="keyword">null</span> || l2 != <span class="keyword">null</span>) {</span><br><span class="line">            <span class="keyword">int</span> x = l1 == <span class="keyword">null</span> ? <span class="number">0</span> : l1.val;</span><br><span class="line">            <span class="keyword">int</span> y = l2 == <span class="keyword">null</span> ? <span class="number">0</span> : l2.val;</span><br><span class="line">            <span class="keyword">int</span> sum = x + y + carry;</span><br><span class="line">            </span><br><span class="line">            carry = sum / <span class="number">10</span>;</span><br><span class="line">            sum = sum % <span class="number">10</span>;</span><br><span class="line">            cur.next = <span class="keyword">new</span> ListNode(sum);</span><br><span class="line"></span><br><span class="line">            cur = cur.next;</span><br><span class="line">            <span class="keyword">if</span>(l1 != <span class="keyword">null</span>)</span><br><span class="line">                l1 = l1.next;</span><br><span class="line">            <span class="keyword">if</span>(l2 != <span class="keyword">null</span>)</span><br><span class="line">                l2 = l2.next;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">if</span>(carry == <span class="number">1</span>) {</span><br><span class="line">            cur.next = <span class="keyword">new</span> ListNode(carry);</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> pre.next;</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>
<p>åˆ†ä¸‰ç§æƒ…å†µè®¨è®º</p>
<p>(1)  l1 != null;</p>
<p>(2)  l2 != null;</p>
<p>(3)  l1 != null &amp;&amp; l2 != null</p>
<p>æ³¨ï¼šé“¾è¡¨é•¿åº¦ä¸å¤Ÿå€¼æŒ‰0å¤„ç†</p>
<p><br></p>
<p>ç”¨æ—¶ï¼š2ms</p>
<p>å‡å®šä¸¤ä¸ªé“¾è¡¨é•¿åº¦ä¸ºmï¼Œn</p>
<p>æ—¶é—´å¤æ‚åº¦ï¼šOï¼ˆm + nï¼‰</p>
<p>ç©ºé—´å¤æ‚åº¦ï¼šSï¼ˆ1ï¼‰</p>
]]></content>
      <categories>
        <category>LeetCode</category>
      </categories>
      <tags>
        <tag>æ¯æ—¥ä¸€é¢˜</tag>
        <tag>JAVA</tag>
        <tag>LeetCodeTop100</tag>
      </tags>
  </entry>
  <entry>
    <title>LeetCodeP0003â€”â€”æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²</title>
    <url>/2021/08/31/LeetCodeP0003%E2%80%94%E2%80%94%E6%97%A0%E9%87%8D%E5%A4%8D%E5%AD%97%E7%AC%A6%E7%9A%84%E6%9C%80%E9%95%BF%E5%AD%90%E4%B8%B2/</url>
    <content><![CDATA[<h2 id="é¢˜ç›®"><a href="#é¢˜ç›®" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h2><p>ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸² <code>s</code> ï¼Œè¯·ä½ æ‰¾å‡ºå…¶ä¸­ä¸å«æœ‰é‡å¤å­—ç¬¦çš„ <strong>æœ€é•¿å­ä¸²</strong> çš„é•¿åº¦ã€‚</p>
<h3 id="ç¤ºä¾‹1"><a href="#ç¤ºä¾‹1" class="headerlink" title="ç¤ºä¾‹1"></a>ç¤ºä¾‹1</h3><figure class="highlight markdown"><table><tbody><tr><td class="code"><pre><span class="line">è¾“å…¥: s = "abcabcbb"</span><br><span class="line">è¾“å‡º: 3 </span><br><span class="line">è§£é‡Š: å› ä¸ºæ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²æ˜¯ "abc"ï¼Œæ‰€ä»¥å…¶é•¿åº¦ä¸º 3ã€‚</span><br></pre></td></tr></tbody></table></figure>
<span id="more"></span>
<h3 id="ç¤ºä¾‹2"><a href="#ç¤ºä¾‹2" class="headerlink" title="ç¤ºä¾‹2"></a>ç¤ºä¾‹2</h3><figure class="highlight markdown"><table><tbody><tr><td class="code"><pre><span class="line">è¾“å…¥: s = "bbbbb"</span><br><span class="line">è¾“å‡º: 1</span><br><span class="line">è§£é‡Š: å› ä¸ºæ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²æ˜¯ "b"ï¼Œæ‰€ä»¥å…¶é•¿åº¦ä¸º 1ã€‚</span><br></pre></td></tr></tbody></table></figure>
<h3 id="ç¤ºä¾‹3"><a href="#ç¤ºä¾‹3" class="headerlink" title="ç¤ºä¾‹3"></a>ç¤ºä¾‹3</h3><figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">è¾“å…¥: s = "pwwkew"</span><br><span class="line">è¾“å‡º: 3</span><br><span class="line">è§£é‡Š: å› ä¸ºæ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²æ˜¯&nbsp;"wke"ï¼Œæ‰€ä»¥å…¶é•¿åº¦ä¸º 3ã€‚</span><br><span class="line">&nbsp;    è¯·æ³¨æ„ï¼Œä½ çš„ç­”æ¡ˆå¿…é¡»æ˜¯ å­ä¸² çš„é•¿åº¦ï¼Œ"pwke"&nbsp;æ˜¯ä¸€ä¸ªå­åºåˆ—ï¼Œä¸æ˜¯å­ä¸²ã€‚</span><br></pre></td></tr></tbody></table></figure>
<h3 id="ç¤ºä¾‹4"><a href="#ç¤ºä¾‹4" class="headerlink" title="ç¤ºä¾‹4"></a>ç¤ºä¾‹4</h3><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line">è¾“å…¥: s = <span class="string">""</span></span><br><span class="line">è¾“å‡º: <span class="number">0</span></span><br></pre></td></tr></tbody></table></figure>
<h3 id="æç¤º"><a href="#æç¤º" class="headerlink" title="æç¤º"></a>æç¤º</h3><ul>
<li><code>0 &lt;= s.length &lt;= 5 * 104</code></li>
<li><code>s</code> ç”±è‹±æ–‡å­—æ¯ã€æ•°å­—ã€ç¬¦å·å’Œç©ºæ ¼ç»„æˆ</li>
</ul>
<p><br></p>
<h3 id="é¢˜è§£1-æ»‘åŠ¨çª—å£"><a href="#é¢˜è§£1-æ»‘åŠ¨çª—å£" class="headerlink" title="é¢˜è§£1: æ»‘åŠ¨çª—å£"></a>é¢˜è§£1: æ»‘åŠ¨çª—å£</h3><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">lengthOfLongestSubstring</span><span class="params">(String s)</span> </span>{</span><br><span class="line">        <span class="keyword">int</span>[] ascll = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">128</span>];</span><br><span class="line">        <span class="keyword">int</span> maxLen = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>,j=<span class="number">0</span>;j&lt;s.length();j++){</span><br><span class="line">            <span class="comment">// iä¸èƒ½å¾€å›é€€ï¼Œä¾‹ï¼šâ€œabbaâ€</span></span><br><span class="line">            i = Math.max(i, ascll[s.charAt(j)]);</span><br><span class="line">            maxLen = Math.max(maxLen, j-i+<span class="number">1</span>);</span><br><span class="line">            ascll[s.charAt(j)] = j+<span class="number">1</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> maxLen;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>ç”¨æ—¶ï¼š2ms</p>
<p>æ—¶é—´å¤æ‚åº¦ï¼šOï¼ˆnï¼‰</p>
<p>ç©ºé—´å¤æ‚åº¦ï¼šSï¼ˆ1ï¼‰</p>
<h2 id="å›¾ç¤º"><a href="#å›¾ç¤º" class="headerlink" title="å›¾ç¤º"></a>å›¾ç¤º</h2><p>åˆå§‹æ—¶ï¼Œiå’ŒjåŒæŒ‡é’ˆéƒ½æŒ‡å‘ä¸‹æ ‡0ã€‚å¦å¤–è¿˜æœ‰ä¸€ä¸ªASCIIï¼ˆsize = 128ï¼‰çš„è¡¨æ¥å­˜å‚¨æ¯ä¸ªå­—ç¬¦åœ¨éå†å­—ç¬¦ä¸²è¿‡ç¨‹ä¸­å‡ºç°çš„ä½ç½®å†+1ã€‚<img src="https://z3.ax1x.com/2021/09/01/h0A7D0.jpg" alt="img1"></p>
<p>å¤§é¢˜çš„éå†æ€è·¯ï¼šiä¸åŠ¨ï¼Œjæ¥éå†å­—ç¬¦ä¸²ï¼ŒmaxLen=j - i +1ï¼Œå½“jæŒ‡å‘çš„å­—ç¬¦æœ‰é‡å¤æ—¶ï¼Œå°†iç§»åˆ°è¯¥é‡å¤å­—ç¬¦æ­¤å‰å‡ºç°ä½ç½®çš„åé¢ä¸€ä¸ªä½ç½®ï¼Œå› æ­¤åœ¨ASCIIä¸­å­˜å‚¨çš„æ˜¯æ¯ä¸ªå­—ç¬¦å‡ºç°çš„åä¸€ä¸ªä½ç½®ï¼Œç„¶åå°†ASCIIè¡¨æ›´æ–°ã€‚</p>
<p>ä¸‹å›¾æ˜¯j=3æ—¶ï¼Œè¿™æ—¶jæŒ‡å‘çš„aå’ŒiæŒ‡å‘çš„aé‡å¤äº†ï¼Œéœ€è¦å°†iç§»åˆ°æ­¤å‰å‡ºç°açš„åä¸€ä¸ªä½ç½®ï¼ŒæŸ¥çœ‹ASCIIè¡¨ï¼Œå°†aç§»åˆ°1å¤„ï¼Œæ›´æ–°ASCIIè¡¨ä¸­açš„ä½ç½®ã€‚</p>
<p><img src="https://z3.ax1x.com/2021/09/01/h0AHbV.jpg" alt="h0AHbV.jpg"></p>
<p><img src="https://z3.ax1x.com/2021/09/01/h0ATuq.jpg" alt="h0ATuq.jpg"></p>
<p><br></p>
]]></content>
      <categories>
        <category>LeetCode</category>
      </categories>
      <tags>
        <tag>æ¯æ—¥ä¸€é¢˜</tag>
        <tag>JAVA</tag>
        <tag>LeetCodeTop100</tag>
        <tag>æ»‘åŠ¨çª—å£</tag>
      </tags>
  </entry>
  <entry>
    <title>LeetCodeP0004â€”â€”å¯»æ‰¾ä¸¤ä¸ªæ­£åºæ•°ç»„çš„ä¸­ä½æ•°</title>
    <url>/2021/09/01/LeetCodeP0004%E2%80%94%E2%80%94%E5%AF%BB%E6%89%BE%E4%B8%A4%E4%B8%AA%E6%AD%A3%E5%BA%8F%E6%95%B0%E7%BB%84%E7%9A%84%E4%B8%AD%E4%BD%8D%E6%95%B0/</url>
    <content><![CDATA[<h2 id="é¢˜ç›®"><a href="#é¢˜ç›®" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h2><p>ç»™å®šä¸¤ä¸ªå¤§å°åˆ†åˆ«ä¸º <code>m</code> å’Œ <code>n</code> çš„æ­£åºï¼ˆä»å°åˆ°å¤§ï¼‰æ•°ç»„ <code>nums1</code> å’Œ <code>nums2</code>ã€‚è¯·ä½ æ‰¾å‡ºå¹¶è¿”å›è¿™ä¸¤ä¸ªæ­£åºæ•°ç»„çš„ <strong>ä¸­ä½æ•°</strong> ã€‚</p>
<h3 id="ç¤ºä¾‹1"><a href="#ç¤ºä¾‹1" class="headerlink" title="ç¤ºä¾‹1"></a>ç¤ºä¾‹1</h3><figure class="highlight markdown"><table><tbody><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šnums1 = [1,3], nums2 = [2]</span><br><span class="line">è¾“å‡ºï¼š2.00000</span><br><span class="line">è§£é‡Šï¼šåˆå¹¶æ•°ç»„ = [1,2,3] ï¼Œä¸­ä½æ•° 2</span><br></pre></td></tr></tbody></table></figure>
<span id="more"></span>
<h3 id="ç¤ºä¾‹2"><a href="#ç¤ºä¾‹2" class="headerlink" title="ç¤ºä¾‹2"></a>ç¤ºä¾‹2</h3><figure class="highlight markdown"><table><tbody><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šnums1 = [1,2], nums2 = [3,4]</span><br><span class="line">è¾“å‡ºï¼š2.50000</span><br><span class="line">è§£é‡Šï¼šåˆå¹¶æ•°ç»„ = [1,2,3,4] ï¼Œä¸­ä½æ•° (2 + 3) / 2 = 2.5</span><br></pre></td></tr></tbody></table></figure>
<h3 id="ç¤ºä¾‹3"><a href="#ç¤ºä¾‹3" class="headerlink" title="ç¤ºä¾‹3"></a>ç¤ºä¾‹3</h3><figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šnums1 = [0,0], nums2 = [0,0]</span><br><span class="line">è¾“å‡ºï¼š0.00000</span><br></pre></td></tr></tbody></table></figure>
<h3 id="ç¤ºä¾‹4"><a href="#ç¤ºä¾‹4" class="headerlink" title="ç¤ºä¾‹4"></a>ç¤ºä¾‹4</h3><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šnums1 = [], nums2 = [<span class="number">1</span>]</span><br><span class="line">è¾“å‡ºï¼š<span class="number">1.00000</span></span><br></pre></td></tr></tbody></table></figure>
<h3 id="æç¤ºï¼š"><a href="#æç¤ºï¼š" class="headerlink" title="æç¤ºï¼š"></a>æç¤ºï¼š</h3><ul>
<li><code>nums1.length == m</code></li>
<li><code>nums2.length == n</code></li>
<li><code>0 &lt;= m &lt;= 1000</code></li>
<li><code>0 &lt;= n &lt;= 1000</code></li>
<li><code>1 &lt;= m + n &lt;= 2000</code></li>
<li><code>-106 &lt;= nums1[i], nums2[i] &lt;= 106</code></li>
</ul>
<p><br></p>
<h3 id="é¢˜è§£1-ç±»ä¼¼å½’å¹¶æ’åº"><a href="#é¢˜è§£1-ç±»ä¼¼å½’å¹¶æ’åº" class="headerlink" title="é¢˜è§£1: ç±»ä¼¼å½’å¹¶æ’åº"></a>é¢˜è§£1: ç±»ä¼¼å½’å¹¶æ’åº</h3><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">findMedianSortedArrays</span><span class="params">(<span class="keyword">int</span>[] nums1, <span class="keyword">int</span>[] nums2)</span> </span>{</span><br><span class="line">        <span class="keyword">int</span> len1 = nums1.length;</span><br><span class="line">        <span class="keyword">int</span> len2 = nums2.length;</span><br><span class="line">        <span class="keyword">int</span> len = len1 + len2;</span><br><span class="line">        <span class="keyword">int</span> mid = len / <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">int</span> i=<span class="number">0</span>,j=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">double</span> left=<span class="number">0</span>,right=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> k=<span class="number">0</span>;k&lt;=mid;k++){</span><br><span class="line">            left = right;</span><br><span class="line">            <span class="keyword">if</span>(i &lt; len1 &amp;&amp; (j &gt;= len2 || nums1[i] &lt;= nums2[j])){</span><br><span class="line">                right = nums1[i++];</span><br><span class="line">            }<span class="keyword">else</span>{</span><br><span class="line">                right = nums2[j++];</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">if</span>(len % <span class="number">2</span> == <span class="number">0</span>){</span><br><span class="line">            <span class="keyword">return</span> (left + right) / <span class="number">2</span>;</span><br><span class="line">        }<span class="keyword">else</span>{</span><br><span class="line">            <span class="keyword">return</span> right;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>ç±»ä¼¼å½’å¹¶æ’åºçš„æ€æƒ³ï¼Œä½†ä¸ç”¨å¼€è¾Ÿæ–°çš„ç©ºé—´ï¼Œåªç§»åŠ¨æŒ‡é’ˆæ¥å¯»æ‰¾ä¸­ä½æ•°ã€‚</p>
<p>éœ€è¦å°†é•¿åº¦ä¸ºå¥‡æ•°å’Œå¶æ•°æ—¶ï¼Œä¸­ä½æ•°çš„æƒ…å†µåˆå¹¶ã€‚</p>
<p>è¿™é‡Œæˆ‘ä»¬è®¾ç½®mid = len / 2ï¼Œå½“é•¿åº¦ä¸ºå¥‡æ•°æ—¶ï¼Œè¿”å›ç¬¬midä¸ªæ•°å°±è¡Œï¼›å½“é•¿åº¦ä¸ºå¶æ•°æ—¶ï¼Œè¿”å›ç¬¬mid-1å’Œç¬¬midä¸ªæ•°å–å¹³å‡å°±è¡Œã€‚</p>
<p>ä¸ºæ­¤æˆ‘ä»¬éœ€è¦leftå’Œrightï¼Œleftä¿å­˜ä¸Šä¸€ä¸ªæ•°ï¼Œrightä¿å­˜ä¸‹ä¸€ä¸ªæ•°ã€‚</p>
<p>å…³äºåˆ†ç±»è®¨è®ºï¼Œè¿™é‡Œåªæœ‰ä¸¤ç§ç»“æœï¼šç§»åŠ¨nums1çš„æŒ‡é’ˆå’Œç§»åŠ¨nums2çš„æŒ‡é’ˆã€‚</p>
<p>æ‰€ä»¥åªéœ€è¦æŠŠç§»åŠ¨nums1çš„æŒ‡é’ˆçš„æƒ…å†µå†™å®Œæ•´äº†ï¼Œå¦ä¸€ä¸ªæƒ…å†µç”¨elseå³å¯ã€‚</p>
<p><br></p>
<p>ç”¨æ—¶ï¼š2ms</p>
<p>å‡å®šä¸¤ä¸ªæ•°ç»„é•¿åº¦ä¸ºmï¼Œn</p>
<p>æ—¶é—´å¤æ‚åº¦ï¼šOï¼ˆm + nï¼‰</p>
<p>ç©ºé—´å¤æ‚åº¦ï¼šSï¼ˆ1ï¼‰</p>
<p><br></p>
<h3 id="é¢˜è§£2-äºŒåˆ†æŸ¥æ‰¾"><a href="#é¢˜è§£2-äºŒåˆ†æŸ¥æ‰¾" class="headerlink" title="é¢˜è§£2: äºŒåˆ†æŸ¥æ‰¾"></a>é¢˜è§£2: äºŒåˆ†æŸ¥æ‰¾</h3><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">findMedianSortedArrays</span><span class="params">(<span class="keyword">int</span>[] nums1, <span class="keyword">int</span>[] nums2)</span> </span>{</span><br><span class="line">        <span class="keyword">int</span> len1 = nums1.length;</span><br><span class="line">        <span class="keyword">int</span> len2 = nums2.length;</span><br><span class="line">        <span class="keyword">int</span> len = len1 + len2;</span><br><span class="line">        <span class="keyword">if</span>(len % <span class="number">2</span> == <span class="number">0</span>){</span><br><span class="line">            <span class="keyword">return</span> (findNum(nums1,nums2,len/<span class="number">2</span>+<span class="number">1</span>) + findNum(nums1,nums2,len/<span class="number">2</span>))/<span class="number">2</span>;</span><br><span class="line">        }<span class="keyword">else</span>{</span><br><span class="line">            <span class="keyword">return</span> findNum(nums1,nums2,len/<span class="number">2</span>+<span class="number">1</span>);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">findNum</span><span class="params">(<span class="keyword">int</span>[] nums1,<span class="keyword">int</span>[] nums2, <span class="keyword">int</span> idx)</span></span>{</span><br><span class="line">        <span class="keyword">int</span> offset_1 = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> offset_2 = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> half = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> len1 = nums1.length;</span><br><span class="line">        <span class="keyword">int</span> len2 = nums2.length;</span><br><span class="line">        <span class="keyword">while</span>(<span class="keyword">true</span>){</span><br><span class="line">            <span class="keyword">if</span>(offset_2 &gt;= len2){</span><br><span class="line">                <span class="keyword">return</span> nums1[offset_1+idx-<span class="number">1</span>];</span><br><span class="line">            }<span class="keyword">else</span> <span class="keyword">if</span> (offset_1 &gt;= len1){</span><br><span class="line">                <span class="keyword">return</span> nums2[offset_2+idx-<span class="number">1</span>];</span><br><span class="line">            }</span><br><span class="line">            half = idx / <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">int</span> index1 = Math.min(offset_1 + half - <span class="number">1</span>, len1-<span class="number">1</span>);</span><br><span class="line">            <span class="keyword">int</span> index2 = Math.min(offset_2 + half - <span class="number">1</span>, len2-<span class="number">1</span>);</span><br><span class="line">            <span class="keyword">if</span>(idx == <span class="number">1</span>){</span><br><span class="line">                <span class="keyword">return</span> Math.min(nums1[offset_1],nums2[offset_2]);</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">if</span>(nums1[index1] &gt; nums2[index2]){</span><br><span class="line">                idx -= index2 - offset_2 + <span class="number">1</span>;</span><br><span class="line">                offset_2 += half;</span><br><span class="line">            }<span class="keyword">else</span>{</span><br><span class="line">                idx -= index1 - offset_1 + <span class="number">1</span>;</span><br><span class="line">                offset_1 += half;</span><br><span class="line">            }</span><br><span class="line">            </span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>å¦‚æœéœ€è¦æ‰¾åˆ°ç¬¬nå¤§çš„æ•°å­—ï¼Œé‚£ä¹ˆåªéœ€è¦æ¯”è¾ƒä¸¤ä¸ªæ•°ç»„çš„ç¬¬n/2ä¸ªæ•°ï¼ŒæŠŠè¾ƒå°çš„é‚£ä¸ªæ•°å’Œå®ƒå‰é¢çš„n/2-1ä¸ªæ•°å…¨éƒ¨æ’é™¤ï¼Œè®¾ç½®åç½®å€¼offset=n/2ã€‚ç„¶ån = n/2ã€‚ä¹‹åå†é™¤ä»¥2ï¼Œæ¯”è¾ƒä¸¤ä¸ªæ•°ç»„çš„ç¬¬n/2ä¸ªæ•°ï¼Œè¿™é‡Œæœ‰ä¸ªæ•°ç»„è¦ä»åç½®å€¼å¼€å§‹ç¬¬n/2ä¸ªæ•°ã€‚</p>
<p>é™¤æ­¤ä¹‹å¤–è¿˜è¦è€ƒè™‘n/2å¤§äºæ•°ç»„é•¿åº¦çš„æƒ…å†µï¼Œå› æ­¤æ¯ä¸€æ¬¡çš„åç½®å€¼ä¸ä¸€å®šæ˜¯n/2ï¼Œå¯èƒ½åˆ°æ•°ç»„æœ«å°¾å°±åœæ­¢äº†ã€‚</p>
<p>ç”¨æ—¶ï¼š2ms</p>
<p>æ—¶é—´å¤æ‚åº¦ï¼šOï¼ˆlog(m + n)ï¼‰</p>
<p>ç©ºé—´å¤æ‚åº¦ï¼šSï¼ˆ1ï¼‰</p>
]]></content>
      <categories>
        <category>LeetCode</category>
      </categories>
      <tags>
        <tag>æ¯æ—¥ä¸€é¢˜</tag>
        <tag>JAVA</tag>
        <tag>LeetCodeTop100</tag>
        <tag>äºŒåˆ†æŸ¥æ‰¾</tag>
      </tags>
  </entry>
  <entry>
    <title>LeetCodeP0010â€”â€”æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…</title>
    <url>/2021/09/02/LeetCodeP0010%E2%80%94%E2%80%94%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E5%8C%B9%E9%85%8D/</url>
    <content><![CDATA[<h2 id="é¢˜ç›®"><a href="#é¢˜ç›®" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h2><p>ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸² s å’Œä¸€ä¸ªå­—ç¬¦è§„å¾‹ pï¼Œè¯·ä½ æ¥å®ç°ä¸€ä¸ªæ”¯æŒ â€˜.â€™ å’Œ â€˜*â€™ çš„æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…ã€‚</p>
<p>â€˜.â€™ åŒ¹é…ä»»æ„å•ä¸ªå­—ç¬¦<br>â€˜*â€™ åŒ¹é…é›¶ä¸ªæˆ–å¤šä¸ªå‰é¢çš„é‚£ä¸€ä¸ªå…ƒç´ <br>æ‰€è°“åŒ¹é…ï¼Œæ˜¯è¦æ¶µç›– æ•´ä¸ª å­—ç¬¦ä¸² sçš„ï¼Œè€Œä¸æ˜¯éƒ¨åˆ†å­—ç¬¦ä¸²ã€‚</p>
<h3 id="ç¤ºä¾‹1"><a href="#ç¤ºä¾‹1" class="headerlink" title="ç¤ºä¾‹1"></a>ç¤ºä¾‹1</h3><figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šs = "aa" p = "a"</span><br><span class="line">è¾“å‡ºï¼šfalse</span><br><span class="line">è§£é‡Šï¼š"a" æ— æ³•åŒ¹é… "aa" æ•´ä¸ªå­—ç¬¦ä¸²ã€‚</span><br></pre></td></tr></tbody></table></figure>
<span id="more"></span>
<h3 id="ç¤ºä¾‹2"><a href="#ç¤ºä¾‹2" class="headerlink" title="ç¤ºä¾‹2"></a>ç¤ºä¾‹2</h3><figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šs = "aa" p = "a*"</span><br><span class="line">è¾“å‡ºï¼štrue</span><br><span class="line">è§£é‡Šï¼šå› ä¸º '*' ä»£è¡¨å¯ä»¥åŒ¹é…é›¶ä¸ªæˆ–å¤šä¸ªå‰é¢çš„é‚£ä¸€ä¸ªå…ƒç´ , åœ¨è¿™é‡Œå‰é¢çš„å…ƒç´ å°±æ˜¯ 'a'ã€‚å› æ­¤ï¼Œå­—ç¬¦ä¸² "aa" å¯è¢«è§†ä¸º 'a' é‡å¤äº†ä¸€æ¬¡ã€‚</span><br></pre></td></tr></tbody></table></figure>
<h3 id="ç¤ºä¾‹3"><a href="#ç¤ºä¾‹3" class="headerlink" title="ç¤ºä¾‹3"></a>ç¤ºä¾‹3</h3><figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šs = "aa" p = "a*"</span><br><span class="line">è¾“å‡ºï¼štrue</span><br><span class="line">è§£é‡Šï¼šå› ä¸º '*' ä»£è¡¨å¯ä»¥åŒ¹é…é›¶ä¸ªæˆ–å¤šä¸ªå‰é¢çš„é‚£ä¸€ä¸ªå…ƒç´ , åœ¨è¿™é‡Œå‰é¢çš„å…ƒç´ å°±æ˜¯ 'a'ã€‚å› æ­¤ï¼Œå­—ç¬¦ä¸² "aa" å¯è¢«è§†ä¸º 'a' é‡å¤äº†ä¸€æ¬¡ã€‚</span><br></pre></td></tr></tbody></table></figure>
<h3 id="ç¤ºä¾‹4"><a href="#ç¤ºä¾‹4" class="headerlink" title="ç¤ºä¾‹4"></a>ç¤ºä¾‹4</h3><figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šs = "" p = "c*"</span><br><span class="line">è¾“å‡ºï¼štrue</span><br><span class="line">è§£é‡Šï¼šå› ä¸º '*' è¡¨ç¤ºé›¶ä¸ªæˆ–å¤šä¸ªï¼Œè¿™é‡Œ 'c' ä¸º 0 ä¸ªã€‚å› æ­¤å¯ä»¥åŒ¹é…å­—ç¬¦ä¸² ""ã€‚</span><br></pre></td></tr></tbody></table></figure>
<h3 id="æç¤ºï¼š"><a href="#æç¤ºï¼š" class="headerlink" title="æç¤ºï¼š"></a>æç¤ºï¼š</h3><ul>
<li><code>0 &lt;= s.length &lt;= 20</code></li>
<li><code>0 &lt;= p.length &lt;= 30</code></li>
<li><code>s</code> å¯èƒ½ä¸ºç©ºï¼Œä¸”åªåŒ…å«ä» <code>a-z</code> çš„å°å†™å­—æ¯ã€‚</li>
<li><code>p</code> å¯èƒ½ä¸ºç©ºï¼Œä¸”åªåŒ…å«ä» <code>a-z</code> çš„å°å†™å­—æ¯ï¼Œä»¥åŠå­—ç¬¦ <code>.</code> å’Œ <code>*</code>ã€‚</li>
<li>ä¿è¯æ¯æ¬¡å‡ºç°å­—ç¬¦ <code>*</code> æ—¶ï¼Œå‰é¢éƒ½åŒ¹é…åˆ°æœ‰æ•ˆçš„å­—ç¬¦</li>
</ul>
<p><br></p>
<h3 id="é¢˜è§£1-åŠ¨æ€è§„åˆ’"><a href="#é¢˜è§£1-åŠ¨æ€è§„åˆ’" class="headerlink" title="é¢˜è§£1: åŠ¨æ€è§„åˆ’"></a>é¢˜è§£1: åŠ¨æ€è§„åˆ’</h3><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isMatch</span><span class="params">(String s, String p)</span> </span>{</span><br><span class="line">        <span class="keyword">int</span> len1 = s.length();</span><br><span class="line">        <span class="keyword">int</span> len2 = p.length();</span><br><span class="line">        <span class="keyword">boolean</span>[][] dp = <span class="keyword">new</span> <span class="keyword">boolean</span>[len1+<span class="number">1</span>][len2+<span class="number">1</span>];</span><br><span class="line">        <span class="keyword">char</span>[] pc = p.toCharArray();</span><br><span class="line">        <span class="keyword">char</span>[] sc = s.toCharArray();</span><br><span class="line">        dp[<span class="number">0</span>][<span class="number">0</span>] = <span class="keyword">true</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;=len1;i++){</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=len2;j++){</span><br><span class="line">                <span class="keyword">if</span>(pc[j-<span class="number">1</span>] == <span class="string">'*'</span>){</span><br><span class="line">                    <span class="keyword">if</span>(match(i,j-<span class="number">1</span>,sc,pc)){</span><br><span class="line">                        dp[i][j] = dp[i][j-<span class="number">2</span>] || dp[i-<span class="number">1</span>][j];</span><br><span class="line">                    }<span class="keyword">else</span>{</span><br><span class="line">                        dp[i][j] = dp[i][j-<span class="number">2</span>];</span><br><span class="line">                    }</span><br><span class="line">                }<span class="keyword">else</span>{</span><br><span class="line">                    <span class="keyword">if</span>(match(i,j,sc,pc)){</span><br><span class="line">                        dp[i][j] = dp[i-<span class="number">1</span>][j-<span class="number">1</span>];</span><br><span class="line">                    }</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> dp[len1][len2];</span><br><span class="line">    }</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">match</span><span class="params">(<span class="keyword">int</span> i,<span class="keyword">int</span> j,<span class="keyword">char</span>[] sc,<span class="keyword">char</span>[] pc)</span></span>{</span><br><span class="line">        <span class="keyword">if</span>(i==<span class="number">0</span>){</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">if</span>(pc[j-<span class="number">1</span>] == <span class="string">'.'</span>){</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> sc[i-<span class="number">1</span>] == pc[j-<span class="number">1</span>];</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">å¦‚æœP[j]ç­‰äº'*'ï¼Œå½“P[j-1]ç­‰äºS[i]æ—¶ï¼Œæœ‰ä¸¤ç§æ–¹å¼ï¼š</span><br><span class="line"></span><br><span class="line">1. dp[i][j] = dp[i][j-2]ï¼Œç›´æ¥å°†â€œå­—ç¬¦*â€è¿™ä¸ªç»„åˆæ‰”æ‰ï¼Œ*è¿™é‡Œå–0æ¬¡ã€‚</span><br><span class="line">2. dp[i][j] = dp[i-1][j]ï¼Œå°†S[i-1]çš„å­—ç¬¦å†å¤åˆ¶ä¸€ä¸ªï¼Œ*è¿™é‡Œå–1æ¬¡ã€‚</span><br><span class="line"></span><br><span class="line">å¦‚æœP[j]ç­‰äº'*'ï¼Œå½“P[j-1]ä¸ç­‰äºS[i]æ—¶ï¼Œdp[i][j] = dp[i][j-2]ï¼Œä¹Ÿæ˜¯å°†è¯¥ç»„åˆæ‰”æ‰ã€‚</span><br><span class="line">å¦‚æœP[j]ä¸ç­‰äº'*'ï¼Œå½“P[j-1]ç­‰äºS[i]æ—¶ï¼Œdp[i][j] = dp[i-1][j-1]ã€‚</span><br><span class="line"></span><br><span class="line">éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç”±äºSå’ŒPå¯ä»¥ä¸ºç©ºå­—ç¬¦ä¸²ï¼Œå› æ­¤dpå¤§å°æ˜¯[len1+1][len2+1]ï¼Œæ‰€ä»¥å­—ç¬¦ä¸²charAtçš„æ—¶å€™ä¸‹æ ‡è¦-1ã€‚</span><br><span class="line">è€Œä¸”ï¼Œè‹¥Sä¸ºéç©ºä¸²ï¼Œè€ŒPä¸ºç©ºä¸²ï¼Œåˆ™ä¸€å®šåŒ¹é…ä¸æˆåŠŸã€‚</span><br><span class="line">	 è‹¥Sä¸ºç©ºä¸²ï¼ŒPä¸ºéç©ºä¸²ï¼Œè¿˜æ˜¯æœ‰å¯èƒ½åŒ¹é…æˆåŠŸçš„ï¼Œè§ç¤ºä¾‹4ã€‚</span><br><span class="line">	 </span><br><span class="line">è¿™é‡Œå”¯ä¸€çš„è¾¹ç•Œæ¡ä»¶å°±æ˜¯dp[0][0] = trueï¼Œå³ä¸¤ä¸ªç©ºä¸²å¯ä»¥åŒ¹é…æˆåŠŸã€‚</span><br></pre></td></tr></tbody></table></figure>
<p>çŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼š</p>
<p><img src="https://z3.ax1x.com/2021/09/02/hscgnf.jpg" alt="state"></p>
<p>ç”¨æ—¶ï¼š1ms</p>
<p>æ—¶é—´å¤æ‚åº¦ï¼šOï¼ˆm*nï¼‰</p>
<p>ç©ºé—´å¤æ‚åº¦ï¼šSï¼ˆm*nï¼‰</p>
<p><br></p>
<h3 id="é¢˜è§£2-è®°å¿†åŒ–é€’å½’"><a href="#é¢˜è§£2-è®°å¿†åŒ–é€’å½’" class="headerlink" title="é¢˜è§£2: è®°å¿†åŒ–é€’å½’"></a>é¢˜è§£2: è®°å¿†åŒ–é€’å½’</h3><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>{</span><br><span class="line">    <span class="keyword">int</span>[][] states;</span><br><span class="line">    <span class="keyword">char</span>[] pc;</span><br><span class="line">    <span class="keyword">char</span>[] sc;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isMatch</span><span class="params">(String s, String p)</span> </span>{</span><br><span class="line">        <span class="keyword">int</span> len1 = s.length();</span><br><span class="line">        <span class="keyword">int</span> len2 = p.length();</span><br><span class="line">        states = <span class="keyword">new</span> <span class="keyword">int</span>[len1+<span class="number">1</span>][len2+<span class="number">1</span>];</span><br><span class="line">        pc = p.toCharArray();</span><br><span class="line">        sc = s.toCharArray();</span><br><span class="line">        <span class="keyword">return</span> dps(<span class="number">0</span>,<span class="number">0</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">dps</span><span class="params">(<span class="keyword">int</span> i,<span class="keyword">int</span> j)</span></span>{</span><br><span class="line">        <span class="keyword">if</span>(j == pc.length){</span><br><span class="line">            <span class="keyword">return</span> i == sc.length;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">if</span>(states[i][j] != <span class="number">0</span>){</span><br><span class="line">            <span class="keyword">return</span> states[i][j] &gt; <span class="number">0</span>;</span><br><span class="line">        }</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">boolean</span> match = i&lt;sc.length &amp;&amp; (sc[i] == pc[j] || pc[j] == <span class="string">'.'</span>);</span><br><span class="line">        <span class="keyword">boolean</span> t;</span><br><span class="line">        <span class="keyword">if</span>((j+<span class="number">1</span>)&lt;pc.length &amp;&amp; pc[j+<span class="number">1</span>]==<span class="string">'*'</span>){</span><br><span class="line">            t = dps(i,j+<span class="number">2</span>) ||(match &amp;&amp; dps(i+<span class="number">1</span>,j));</span><br><span class="line">            states[i][j] = t?<span class="number">1</span>:-<span class="number">1</span>;</span><br><span class="line">            <span class="keyword">return</span> t;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        t = match &amp;&amp; dps(i+<span class="number">1</span>,j+<span class="number">1</span>);</span><br><span class="line">        states[i][j] = t?<span class="number">1</span>:-<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">return</span> t;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>å’ŒåŠ¨æ€è§„åˆ’ç±»ä¼¼ï¼Œé€’å½’ä¹Ÿæœ‰å››ç§æƒ…å†µï¼Œå…·ä½“å†™ä»£ç æ—¶ï¼Œè¦æ³¨æ„å„ä¸ªæ¡ä»¶çš„å…ˆåé¡ºåºï¼Œä¸ç„¶å¾ˆå®¹æ˜“æ‰“æ­»ç»“ã€‚</p>
<p><img src="https://z3.ax1x.com/2021/09/03/hs7KHA.png" alt="img"></p>
<p>ç”¨æ—¶ï¼š1ms</p>
<p>æ—¶é—´å¤æ‚åº¦ï¼šOï¼ˆm*nï¼‰</p>
<p>ç©ºé—´å¤æ‚åº¦ï¼šSï¼ˆm*nï¼‰</p>
]]></content>
      <categories>
        <category>LeetCode</category>
      </categories>
      <tags>
        <tag>æ¯æ—¥ä¸€é¢˜</tag>
        <tag>JAVA</tag>
        <tag>LeetCodeTop100</tag>
        <tag>åŠ¨æ€è§„åˆ’</tag>
        <tag>é€’å½’</tag>
      </tags>
  </entry>
  <entry>
    <title>LeetCodeP0005â€”â€”æœ€é•¿å›æ–‡å­ä¸²</title>
    <url>/2021/09/02/LeetCodeP0005%E2%80%94%E2%80%94%E6%9C%80%E9%95%BF%E5%9B%9E%E6%96%87%E5%AD%90%E4%B8%B2/</url>
    <content><![CDATA[<h2 id="é¢˜ç›®"><a href="#é¢˜ç›®" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h2><p>ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸² <code>s</code>ï¼Œæ‰¾åˆ° <code>s</code> ä¸­æœ€é•¿çš„å›æ–‡å­ä¸²ã€‚</p>
<h3 id="ç¤ºä¾‹1"><a href="#ç¤ºä¾‹1" class="headerlink" title="ç¤ºä¾‹1"></a>ç¤ºä¾‹1</h3><figure class="highlight markdown"><table><tbody><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šs = "babad"</span><br><span class="line">è¾“å‡ºï¼š"bab"</span><br><span class="line">è§£é‡Šï¼š"aba" åŒæ ·æ˜¯ç¬¦åˆé¢˜æ„çš„ç­”æ¡ˆã€‚</span><br></pre></td></tr></tbody></table></figure>
<span id="more"></span>
<h3 id="ç¤ºä¾‹2"><a href="#ç¤ºä¾‹2" class="headerlink" title="ç¤ºä¾‹2"></a>ç¤ºä¾‹2</h3><figure class="highlight markdown"><table><tbody><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šs = "cbbd"</span><br><span class="line">è¾“å‡ºï¼š"bb"</span><br></pre></td></tr></tbody></table></figure>
<h3 id="ç¤ºä¾‹3"><a href="#ç¤ºä¾‹3" class="headerlink" title="ç¤ºä¾‹3"></a>ç¤ºä¾‹3</h3><figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šs = "a"</span><br><span class="line">è¾“å‡ºï¼š"a"</span><br></pre></td></tr></tbody></table></figure>
<h3 id="æç¤ºï¼š"><a href="#æç¤ºï¼š" class="headerlink" title="æç¤ºï¼š"></a>æç¤ºï¼š</h3><ul>
<li><code>1 &lt;= s.length &lt;= 1000</code></li>
<li><code>s</code> ä»…ç”±æ•°å­—å’Œè‹±æ–‡å­—æ¯ï¼ˆå¤§å†™å’Œ/æˆ–å°å†™ï¼‰ç»„æˆ</li>
</ul>
<p><br></p>
<h3 id="é¢˜è§£1-åŠ¨æ€è§„åˆ’"><a href="#é¢˜è§£1-åŠ¨æ€è§„åˆ’" class="headerlink" title="é¢˜è§£1: åŠ¨æ€è§„åˆ’"></a>é¢˜è§£1: åŠ¨æ€è§„åˆ’</h3><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">longestPalindrome</span><span class="params">(String s)</span> </span>{</span><br><span class="line">        <span class="keyword">int</span> maxLen = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">int</span> len = s.length();</span><br><span class="line">        <span class="keyword">if</span>(len&lt;<span class="number">2</span>){</span><br><span class="line">            <span class="keyword">return</span> s;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">boolean</span>[][] dp = <span class="keyword">new</span> <span class="keyword">boolean</span>[len][len];</span><br><span class="line">        <span class="keyword">int</span> begin = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;len;i++){</span><br><span class="line">            dp[i][i] = <span class="keyword">true</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="comment">// å­—ç¬¦ä¸²è½¬æ¢ä¸ºcharæ•°ç»„æŸ¥æ‰¾å¿«ï¼</span></span><br><span class="line">        <span class="keyword">char</span>[] charArray = s.toCharArray();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">2</span>;i&lt;=len;i++){</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;len-i+<span class="number">1</span>;j++){</span><br><span class="line">                <span class="keyword">int</span> end = i + j - <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">if</span>(charArray[j] == charArray[end]){</span><br><span class="line">                    <span class="keyword">if</span>(i &lt;= <span class="number">3</span>){</span><br><span class="line">                        dp[j][end] = <span class="keyword">true</span>;</span><br><span class="line">                    }<span class="keyword">else</span>{</span><br><span class="line">                        dp[j][end] = dp[j+<span class="number">1</span>][end-<span class="number">1</span>];</span><br><span class="line">                    }</span><br><span class="line">                }</span><br><span class="line">                <span class="keyword">if</span>(dp[j][end] &amp;&amp; maxLen &lt; i){</span><br><span class="line">                    begin = j;</span><br><span class="line">                    maxLen = i;</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> s.substring(begin,begin+maxLen);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>å­—ç¬¦ä¸²éå†é¢‘ç¹çš„æ—¶å€™ï¼Œå¯ä»¥å…ˆè½¬æ¢ä¸ºcharæ•°ç»„ä¾¿äºæŸ¥æ‰¾ï¼Œå› ä¸º<code>charAt</code>æ–¹æ³•å¤šäº†ä¸€å±‚æ ˆçš„æ·±åº¦ï¼ˆéœ€è¦è¿›å‡ºå¯¹è±¡ï¼‰ã€‚</p>
<p>æ€è·¯ï¼šå¦‚æœä¸€ä¸ªå­—ç¬¦ä¸²æ˜¯å›æ–‡å­—ç¬¦ä¸²ï¼Œé‚£ä¹ˆå®ƒå»æ‰å¤´å’Œå°¾ä¹Ÿä»æ—§æ˜¯å›æ–‡å­—ç¬¦ä¸²ï¼Œä¹Ÿå°±å¯ä»¥å¾—å‡ºåŠ¨æ€è§„åˆ’çš„çŠ¶æ€è½¬ç§»æ–¹ç¨‹ã€‚</p>
<p>P[i, j] = P[i+1, j-1] &amp;&amp; charArray[i] == charArray[j]</p>
<p>ç„¶åå¯¹äºé•¿åº¦ä¸º1çš„å­—ç¬¦ä¸²ï¼Œæœ¬èº«å°±æ˜¯å›æ–‡å­—ç¬¦ä¸²ã€‚å¯¹äºé•¿åº¦ä¸º2çš„å­—ç¬¦ä¸²ï¼Œåªè¦å¤´å’Œå°¾ç›¸åŒå°±æ˜¯å›æ–‡å­—ç¬¦ä¸²ã€‚å› æ­¤æˆ‘ä»¬å°±å¯ä»¥å†™å‡ºåŠ¨æ€è§„åˆ’çš„è¾¹ç•Œæ¡ä»¶ã€‚</p>
<p>P[i, i] = true</p>
<p>P[i, i+1] = true &amp;&amp; charArray[i] == charArray[i+1]</p>
<p><br></p>
<p>ç”¨æ—¶ï¼š124ms</p>
<p>æ—¶é—´å¤æ‚åº¦ï¼šOï¼ˆ$n^2$ï¼‰</p>
<p>ç©ºé—´å¤æ‚åº¦ï¼šSï¼ˆ$n^2$ï¼‰</p>
<p><br></p>
<h3 id="é¢˜è§£2-ä¸­å¿ƒæ‰©æ•£æ³•"><a href="#é¢˜è§£2-ä¸­å¿ƒæ‰©æ•£æ³•" class="headerlink" title="é¢˜è§£2: ä¸­å¿ƒæ‰©æ•£æ³•"></a>é¢˜è§£2: ä¸­å¿ƒæ‰©æ•£æ³•</h3><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">longestPalindrome</span><span class="params">(String s)</span> </span>{</span><br><span class="line">        <span class="keyword">int</span> len = s.length();</span><br><span class="line">        <span class="keyword">int</span> maxLen = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> begin = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span>(len &lt; <span class="number">2</span>){</span><br><span class="line">            <span class="keyword">return</span> s;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">char</span>[] charArray = s.toCharArray();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;len;i++){</span><br><span class="line">            <span class="keyword">int</span> len1 = getPalindromeLen(charArray, i, i);</span><br><span class="line">            <span class="keyword">int</span> len2 = getPalindromeLen(charArray, i, i+<span class="number">1</span>);</span><br><span class="line">            <span class="keyword">int</span> max = Math.max(len1, len2);</span><br><span class="line">            <span class="keyword">if</span>(max &gt; maxLen){</span><br><span class="line">                maxLen = max;</span><br><span class="line">                begin = i - (maxLen-<span class="number">1</span>) / <span class="number">2</span>;</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> s.substring(begin,begin+maxLen);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getPalindromeLen</span><span class="params">(<span class="keyword">char</span>[] charArray, <span class="keyword">int</span> left, <span class="keyword">int</span> right)</span></span>{</span><br><span class="line">        <span class="keyword">int</span> len = charArray.length;</span><br><span class="line">        <span class="keyword">while</span>(left&gt;=<span class="number">0</span> &amp;&amp; right&lt;len &amp;&amp; charArray[left] == charArray[right]){</span><br><span class="line">            left--;</span><br><span class="line">            right++;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> right - left - <span class="number">1</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬å…ˆè§‚å¯ŸåŠ¨æ€è§„åˆ’çš„çŠ¶æ€è½¬ç§»æ–¹ç¨‹</p>
<p>P[i, i] = true</p>
<p>P[i, i+1] = S[i] == S[i+1]</p>
<p>P[i, j] = P[i+1, j-1] &amp;&amp; S[i] == S[j]</p>
<p>å¯ä»¥æ‰¾åˆ°å…¶ä¸­çš„çŠ¶æ€è½¬ç§»é“¾</p>
<p><em>P</em>(<em>i</em>,<em>j</em>)â†<em>P</em>(<em>i</em>+1,<em>j</em>âˆ’1)â†<em>P</em>(<em>i</em>+2,<em>j</em>âˆ’2)â†â‹¯â†æŸä¸€è¾¹ç•Œæƒ…å†µ</p>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œ<strong>æ‰€æœ‰çš„çŠ¶æ€åœ¨è½¬ç§»çš„æ—¶å€™å¯èƒ½æ€§éƒ½æ˜¯å”¯ä¸€çš„</strong>ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥ä»æ¯ä¸€ç§è¾¹ç•Œæƒ…å†µå¼€å§‹å‘å¤–æ‰©æ•£ï¼Œå°±èƒ½å¾—åˆ°æ‰€æœ‰çŠ¶æ€å¯¹åº”çš„ç­”æ¡ˆã€‚</p>
<p>ä¸‹é¢ä¸¤å¥ä»£ç å°±å¯¹åº”ç€ä¸¤ç§è¾¹ç•ŒçŠ¶æ€ã€‚</p>
<p><code>int len1 = getPalindromeLen(charArray, i, i);</code> </p>
<p><code>int len2 = getPalindromeLen(charArray, i, i+1);</code></p>
<p><br></p>
<p>ç”¨æ—¶ï¼š9ms</p>
<p>æ—¶é—´å¤æ‚åº¦ï¼šOï¼ˆ$n^2$ï¼‰</p>
<p>ç©ºé—´å¤æ‚åº¦ï¼šSï¼ˆ1ï¼‰</p>
]]></content>
      <categories>
        <category>LeetCode</category>
      </categories>
      <tags>
        <tag>æ¯æ—¥ä¸€é¢˜</tag>
        <tag>JAVA</tag>
        <tag>LeetCodeTop100</tag>
        <tag>åŠ¨æ€è§„åˆ’</tag>
      </tags>
  </entry>
  <entry>
    <title>LeetCodeP0011â€”â€”ç››æœ€å¤šæ°´çš„å®¹å™¨</title>
    <url>/2021/09/05/LeetCodeP0011%E2%80%94%E2%80%94%E7%9B%9B%E6%9C%80%E5%A4%9A%E6%B0%B4%E7%9A%84%E5%AE%B9%E5%99%A8/</url>
    <content><![CDATA[<h2 id="é¢˜ç›®"><a href="#é¢˜ç›®" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h2><p>ç»™ä½  <code>n</code> ä¸ªéè´Ÿæ•´æ•° <code>a1ï¼Œa2ï¼Œ...ï¼Œa``n</code>ï¼Œæ¯ä¸ªæ•°ä»£è¡¨åæ ‡ä¸­çš„ä¸€ä¸ªç‚¹ <code>(i, ai)</code> ã€‚åœ¨åæ ‡å†…ç”» <code>n</code> æ¡å‚ç›´çº¿ï¼Œå‚ç›´çº¿ <code>i</code> çš„ä¸¤ä¸ªç«¯ç‚¹åˆ†åˆ«ä¸º <code>(i, ai)</code> å’Œ <code>(i, 0)</code> ã€‚æ‰¾å‡ºå…¶ä¸­çš„ä¸¤æ¡çº¿ï¼Œä½¿å¾—å®ƒä»¬ä¸ <code>x</code> è½´å…±åŒæ„æˆçš„å®¹å™¨å¯ä»¥å®¹çº³æœ€å¤šçš„æ°´ã€‚</p>
<p><strong>è¯´æ˜ï¼š</strong>ä½ ä¸èƒ½å€¾æ–œå®¹å™¨ã€‚</p>
<h3 id="ç¤ºä¾‹1"><a href="#ç¤ºä¾‹1" class="headerlink" title="ç¤ºä¾‹1"></a>ç¤ºä¾‹1</h3><p><img src="https://z3.ax1x.com/2021/09/05/hRke0g.jpg" alt="example"></p>
<figure class="highlight markdown"><table><tbody><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š[1,8,6,2,5,4,8,3,7]</span><br><span class="line">è¾“å‡ºï¼š49 </span><br><span class="line">è§£é‡Šï¼šå›¾ä¸­å‚ç›´çº¿ä»£è¡¨è¾“å…¥æ•°ç»„ [1,8,6,2,5,4,8,3,7]ã€‚åœ¨æ­¤æƒ…å†µä¸‹ï¼Œå®¹å™¨èƒ½å¤Ÿå®¹çº³æ°´ï¼ˆè¡¨ç¤ºä¸ºè“è‰²éƒ¨åˆ†ï¼‰çš„æœ€å¤§å€¼ä¸º&nbsp;49ã€‚</span><br></pre></td></tr></tbody></table></figure>
<span id="more"></span>
<h3 id="ç¤ºä¾‹2"><a href="#ç¤ºä¾‹2" class="headerlink" title="ç¤ºä¾‹2"></a>ç¤ºä¾‹2</h3><figure class="highlight markdown"><table><tbody><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šheight = [1,1]</span><br><span class="line">è¾“å‡ºï¼š1</span><br></pre></td></tr></tbody></table></figure>
<h3 id="ç¤ºä¾‹3"><a href="#ç¤ºä¾‹3" class="headerlink" title="ç¤ºä¾‹3"></a>ç¤ºä¾‹3</h3><figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šheight = [4,3,2,1,4]</span><br><span class="line">è¾“å‡ºï¼š16</span><br></pre></td></tr></tbody></table></figure>
<h3 id="æç¤ºï¼š"><a href="#æç¤ºï¼š" class="headerlink" title="æç¤ºï¼š"></a>æç¤ºï¼š</h3><ul>
<li><code>n == height.length</code></li>
<li><code>2 &lt;= n &lt;= 105</code></li>
<li><code>0 &lt;= height[i] &lt;= 104</code></li>
</ul>
<p><br></p>
<h3 id="é¢˜è§£1-åŒæŒ‡é’ˆ"><a href="#é¢˜è§£1-åŒæŒ‡é’ˆ" class="headerlink" title="é¢˜è§£1: åŒæŒ‡é’ˆ"></a>é¢˜è§£1: åŒæŒ‡é’ˆ</h3><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">maxArea</span><span class="params">(<span class="keyword">int</span>[] height)</span> </span>{</span><br><span class="line">        <span class="keyword">int</span> len = height.length;</span><br><span class="line">        <span class="keyword">int</span> max = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> left = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> right = len-<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span>(left &lt; right){</span><br><span class="line">            <span class="keyword">int</span> lh = height[left];</span><br><span class="line">            <span class="keyword">int</span> rh = height[right];</span><br><span class="line">            <span class="keyword">if</span>(height[left] &lt;= height[right]){</span><br><span class="line">                max = Math.max(max, lh * (right - left));</span><br><span class="line">                <span class="keyword">while</span>(left&lt;right &amp;&amp; height[left] &lt;= lh){</span><br><span class="line">                    left++;</span><br><span class="line">                }</span><br><span class="line">            }<span class="keyword">else</span>{</span><br><span class="line">                max = Math.max(max, rh * (right - left));</span><br><span class="line">                <span class="keyword">while</span>(left&lt;right &amp;&amp; height[right] &lt;= rh){</span><br><span class="line">                    right--;</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> max;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>åŒæŒ‡é’ˆåˆ†åˆ«æŒ‡å‘æ•°ç»„çš„å¤´å’Œå°¾ï¼Œç„¶åç§»åŠ¨heightè¾ƒä½çš„æŒ‡é’ˆï¼Œç§»åŠ¨åçš„é«˜åº¦è‹¥æ²¡æœ‰ç§»åŠ¨ä¹‹å‰é«˜åˆ™ä¸ç”¨æ¯”è¾ƒç»§ç»­ç§»åŠ¨ï¼Œç›´åˆ°ä¸¤ä¸ªæŒ‡é’ˆé‡åˆåˆ™éå†ç»“æŸã€‚</p>
<p>å¦‚æœç§»åŠ¨çš„æ˜¯heightè¾ƒé«˜çš„æŒ‡é’ˆï¼Œé‚£ä¹‹åæ— è®ºæ€ä¹ˆç§»åŠ¨ï¼ˆä¸èƒ½å‘å¤–ç§»åŠ¨ï¼‰ï¼Œmaxå€¼éƒ½ä¸å¯èƒ½æ›´é«˜äº†ã€‚</p>
<p>ç”¨æ—¶ï¼š1ms</p>
<p>æ—¶é—´å¤æ‚åº¦ï¼šOï¼ˆnï¼‰</p>
<p>ç©ºé—´å¤æ‚åº¦ï¼šSï¼ˆ1ï¼‰</p>
]]></content>
      <categories>
        <category>LeetCode</category>
      </categories>
      <tags>
        <tag>æ¯æ—¥ä¸€é¢˜</tag>
        <tag>JAVA</tag>
        <tag>LeetCodeTop100</tag>
        <tag>åŒæŒ‡é’ˆ</tag>
      </tags>
  </entry>
  <entry>
    <title>LeetCodeP0015â€”â€”ä¸‰æ•°ä¹‹å’Œ</title>
    <url>/2021/09/08/LeetCodeP0015%E2%80%94%E2%80%94%E4%B8%89%E6%95%B0%E4%B9%8B%E5%92%8C/</url>
    <content><![CDATA[<h2 id="é¢˜ç›®"><a href="#é¢˜ç›®" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h2><p>ç»™ä½ ä¸€ä¸ªåŒ…å« n ä¸ªæ•´æ•°çš„æ•°ç»„ numsï¼Œåˆ¤æ–­ nums ä¸­æ˜¯å¦å­˜åœ¨ä¸‰ä¸ªå…ƒç´  aï¼Œbï¼Œc ï¼Œä½¿å¾— a + b + c = 0 ï¼Ÿè¯·ä½ æ‰¾å‡ºæ‰€æœ‰å’Œä¸º 0 ä¸”ä¸é‡å¤çš„ä¸‰å…ƒç»„ã€‚</p>
<p>æ³¨æ„ï¼šç­”æ¡ˆä¸­ä¸å¯ä»¥åŒ…å«é‡å¤çš„ä¸‰å…ƒç»„ã€‚</p>
<h3 id="ç¤ºä¾‹1"><a href="#ç¤ºä¾‹1" class="headerlink" title="ç¤ºä¾‹1"></a>ç¤ºä¾‹1</h3><figure class="highlight markdown"><table><tbody><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šnums = [-1,0,1,2,-1,-4]</span><br><span class="line">è¾“å‡ºï¼š[[-1,-1,2],[-1,0,1]]</span><br></pre></td></tr></tbody></table></figure>
<span id="more"></span>
<h3 id="ç¤ºä¾‹2"><a href="#ç¤ºä¾‹2" class="headerlink" title="ç¤ºä¾‹2"></a>ç¤ºä¾‹2</h3><figure class="highlight markdown"><table><tbody><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šnums = []</span><br><span class="line">è¾“å‡ºï¼š[]</span><br></pre></td></tr></tbody></table></figure>
<h3 id="ç¤ºä¾‹3"><a href="#ç¤ºä¾‹3" class="headerlink" title="ç¤ºä¾‹3"></a>ç¤ºä¾‹3</h3><figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šnums = [0]</span><br><span class="line">è¾“å‡ºï¼š[]</span><br></pre></td></tr></tbody></table></figure>
<h3 id="æç¤ºï¼š"><a href="#æç¤ºï¼š" class="headerlink" title="æç¤ºï¼š"></a>æç¤ºï¼š</h3><ul>
<li><code>0 &lt;= nums.length &lt;= 3000</code></li>
<li><code>-105 &lt;= nums[i] &lt;= 105</code></li>
</ul>
<p><br></p>
<h3 id="é¢˜è§£1-åŒæŒ‡é’ˆ"><a href="#é¢˜è§£1-åŒæŒ‡é’ˆ" class="headerlink" title="é¢˜è§£1: åŒæŒ‡é’ˆ"></a>é¢˜è§£1: åŒæŒ‡é’ˆ</h3><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>{</span><br><span class="line">    <span class="keyword">public</span> List&lt;List&lt;Integer&gt;&gt; threeSum(<span class="keyword">int</span>[] nums) {</span><br><span class="line">        Arrays.sort(nums);</span><br><span class="line">        <span class="keyword">int</span> len = nums.length;</span><br><span class="line">        List&lt;List&lt;Integer&gt;&gt; res = <span class="keyword">new</span> ArrayList&lt;List&lt;Integer&gt;&gt;();</span><br><span class="line">        <span class="keyword">int</span> target = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;len-<span class="number">2</span>;i++){</span><br><span class="line">            <span class="keyword">if</span>(i &gt; <span class="number">0</span> &amp;&amp; nums[i-<span class="number">1</span>] == nums[i]){</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">int</span> third = len - <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=i+<span class="number">1</span>;j&lt;len-<span class="number">1</span>;j++){</span><br><span class="line">                <span class="keyword">if</span>(j &gt; i+<span class="number">1</span> &amp;&amp; nums[j-<span class="number">1</span>] == nums[j]){</span><br><span class="line">                    <span class="keyword">continue</span>;</span><br><span class="line">                }</span><br><span class="line">                target = -nums[i] - nums[j];</span><br><span class="line">                <span class="keyword">while</span>(j &lt; third &amp;&amp; nums[third] &gt; target){</span><br><span class="line">                    third--;</span><br><span class="line">                }</span><br><span class="line">                <span class="keyword">if</span>(j == third){</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                }</span><br><span class="line">                <span class="keyword">if</span>(nums[third] == target){</span><br><span class="line">                    ArrayList&lt;Integer&gt; tmp = <span class="keyword">new</span> ArrayList&lt;Integer&gt;();</span><br><span class="line">                    tmp.add(nums[i]);</span><br><span class="line">                    tmp.add(nums[j]);</span><br><span class="line">                    tmp.add(nums[third]);</span><br><span class="line">                    res.add(tmp);</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>ç”±äºä¸èƒ½æœ‰é‡å¤çš„ç»„åˆï¼Œå› æ­¤æˆ‘ä»¬å…ˆå°†æ•°ç»„è¿›è¡Œæ’åºï¼Œè¿˜æ˜¯ä¸‰å±‚å¾ªç¯ï¼Œå¦‚æœä¸‹ä¸€æ¬¡éå†çš„å€¼å’Œè¿™ä¸€æ¬¡éå†çš„å€¼ç›¸ç­‰å°±ä¼šäº§ç”Ÿé‡å¤çš„ç»„åˆï¼Œå› æ­¤éœ€è¦åŠ ä»¥åˆ¤æ–­ã€‚</p>
<p>å¦å¤–ï¼Œå› ä¸ºæ•°ç»„æ˜¯å•è°ƒé€’å¢çš„ï¼Œåœ¨ç¬¬ä¸€å±‚å¾ªç¯iå·²ç»ç¡®å®šæ—¶ï¼Œè€Œç¬¬äºŒå±‚å¾ªç¯jåœ¨éå†çš„è¿‡ç¨‹ä¸­æ¯æ¬¡åŠ 1ï¼Œéå†çš„å€¼ä¹Ÿéšä¹‹é€’å¢ï¼Œæ‰€ä»¥åœ¨ç¬¬ä¸‰å±‚å¾ªç¯kä¸­éœ€è¦é€çº§é€’å‡ï¼Œä¹Ÿå°±æ˜¯ä»æ•°ç»„æœ«å°¾å¼€å§‹éå†ï¼Œç›´åˆ°jå’Œkç›¸ç­‰åˆ™breakã€‚</p>
<p>ç”¨æ—¶ï¼š19ms</p>
<p>æ—¶é—´å¤æ‚åº¦ï¼šOï¼ˆ$n^2$ï¼‰</p>
<p>ç©ºé—´å¤æ‚åº¦ï¼šSï¼ˆ$log_n$ï¼‰ï¼ˆæ’åºæ‰€éœ€ç©ºé—´ï¼‰</p>
]]></content>
      <categories>
        <category>LeetCode</category>
      </categories>
      <tags>
        <tag>æ¯æ—¥ä¸€é¢˜</tag>
        <tag>JAVA</tag>
        <tag>LeetCodeTop100</tag>
        <tag>åŒæŒ‡é’ˆ</tag>
      </tags>
  </entry>
  <entry>
    <title>LeetCodeP0019â€”â€”åˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬Nä¸ªèŠ‚ç‚¹</title>
    <url>/2021/09/09/LeetCodeP0019%E2%80%94%E2%80%94%E5%88%A0%E9%99%A4%E9%93%BE%E8%A1%A8%E7%9A%84%E5%80%92%E6%95%B0%E7%AC%ACN%E4%B8%AA%E8%8A%82%E7%82%B9/</url>
    <content><![CDATA[<h2 id="é¢˜ç›®"><a href="#é¢˜ç›®" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h2><p>ç»™ä½ ä¸€ä¸ªé“¾è¡¨ï¼Œåˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬ <code>n</code> ä¸ªç»“ç‚¹ï¼Œå¹¶ä¸”è¿”å›é“¾è¡¨çš„å¤´ç»“ç‚¹ã€‚</p>
<p><strong>è¿›é˜¶ï¼š</strong>ä½ èƒ½å°è¯•ä½¿ç”¨ä¸€è¶Ÿæ‰«æå®ç°å—ï¼Ÿ</p>
<h3 id="ç¤ºä¾‹1"><a href="#ç¤ºä¾‹1" class="headerlink" title="ç¤ºä¾‹1"></a>ç¤ºä¾‹1</h3><p><img src="https://z3.ax1x.com/2021/09/09/hLJDOg.jpg" alt="img"></p>
<figure class="highlight markdown"><table><tbody><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šhead = [1,2,3,4,5], n = 2</span><br><span class="line">è¾“å‡ºï¼š[1,2,3,5]</span><br></pre></td></tr></tbody></table></figure>
<span id="more"></span>
<h3 id="ç¤ºä¾‹2"><a href="#ç¤ºä¾‹2" class="headerlink" title="ç¤ºä¾‹2"></a>ç¤ºä¾‹2</h3><figure class="highlight markdown"><table><tbody><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šhead = [1], n = 1</span><br><span class="line">è¾“å‡ºï¼š[]</span><br></pre></td></tr></tbody></table></figure>
<h3 id="ç¤ºä¾‹3"><a href="#ç¤ºä¾‹3" class="headerlink" title="ç¤ºä¾‹3"></a>ç¤ºä¾‹3</h3><figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šhead = [1,2], n = 1</span><br><span class="line">è¾“å‡ºï¼š[1]</span><br></pre></td></tr></tbody></table></figure>
<h3 id="æç¤ºï¼š"><a href="#æç¤ºï¼š" class="headerlink" title="æç¤ºï¼š"></a>æç¤ºï¼š</h3><ul>
<li>é“¾è¡¨ä¸­ç»“ç‚¹çš„æ•°ç›®ä¸º <code>sz</code></li>
<li><code>1 &lt;= sz &lt;= 30</code></li>
<li><code>0 &lt;= Node.val &lt;= 100</code></li>
<li><code>1 &lt;= n &lt;= sz</code></li>
</ul>
<p><br></p>
<h3 id="é¢˜è§£1-é“¾è¡¨è½¬æ•°ç»„"><a href="#é¢˜è§£1-é“¾è¡¨è½¬æ•°ç»„" class="headerlink" title="é¢˜è§£1: é“¾è¡¨è½¬æ•°ç»„"></a>é¢˜è§£1: é“¾è¡¨è½¬æ•°ç»„</h3><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for singly-linked list.</span></span><br><span class="line"><span class="comment"> * public class ListNode {</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     ListNode next;</span></span><br><span class="line"><span class="comment"> *     ListNode() {}</span></span><br><span class="line"><span class="comment"> *     ListNode(int val) { this.val = val; }</span></span><br><span class="line"><span class="comment"> *     ListNode(int val, ListNode next) { this.val = val; this.next = next; }</span></span><br><span class="line"><span class="comment"> * }</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> ListNode <span class="title">removeNthFromEnd</span><span class="params">(ListNode head, <span class="keyword">int</span> n)</span> </span>{</span><br><span class="line">        ListNode[] nodes = <span class="keyword">new</span> ListNode[<span class="number">30</span>];</span><br><span class="line">        <span class="keyword">int</span> targetNum = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> nodeNums = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">30</span>;i++){</span><br><span class="line">            nodes[i] = head;</span><br><span class="line">            <span class="keyword">if</span>(head.next == <span class="keyword">null</span>){</span><br><span class="line">                nodeNums = i + <span class="number">1</span>;</span><br><span class="line">                targetNum = nodeNums - n;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            }</span><br><span class="line">            head = head.next;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">if</span>(targetNum == <span class="number">0</span>){</span><br><span class="line">            <span class="keyword">if</span>(nodeNums &gt; <span class="number">1</span>){</span><br><span class="line">                <span class="keyword">return</span> nodes[<span class="number">1</span>];</span><br><span class="line">            }<span class="keyword">else</span>{</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        nodes[targetNum-<span class="number">1</span>].next = nodes[targetNum].next;</span><br><span class="line">        <span class="keyword">return</span> nodes[<span class="number">0</span>];</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>ç”¨æ—¶ï¼š0ms</p>
<p>æ—¶é—´å¤æ‚åº¦ï¼šOï¼ˆnï¼‰</p>
<p>ç©ºé—´å¤æ‚åº¦ï¼šSï¼ˆnï¼‰</p>
<p><br></p>
<h3 id="é¢˜è§£2-å¿«æ…¢æŒ‡é’ˆ"><a href="#é¢˜è§£2-å¿«æ…¢æŒ‡é’ˆ" class="headerlink" title="é¢˜è§£2: å¿«æ…¢æŒ‡é’ˆ"></a>é¢˜è§£2: å¿«æ…¢æŒ‡é’ˆ</h3><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> ListNode <span class="title">removeNthFromEnd</span><span class="params">(ListNode head, <span class="keyword">int</span> n)</span> </span>{</span><br><span class="line">        ListNode lnode = head;</span><br><span class="line">        ListNode pnode = <span class="keyword">null</span>;</span><br><span class="line">        ListNode rnode = head;</span><br><span class="line">        <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(count &lt; n){</span><br><span class="line">            rnode = rnode.next;</span><br><span class="line">            count++;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">if</span>(rnode == <span class="keyword">null</span>){</span><br><span class="line">            <span class="keyword">return</span> head.next;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">while</span>(rnode != <span class="keyword">null</span>){</span><br><span class="line">            rnode = rnode.next;</span><br><span class="line">            pnode = lnode;</span><br><span class="line">            lnode = lnode.next;</span><br><span class="line">        }</span><br><span class="line">        pnode.next = pnode.next.next;</span><br><span class="line">        <span class="keyword">return</span> head;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>å› ä¸ºè¦æ‰¾åˆ°å€’æ•°ç¬¬nä¸ªèŠ‚ç‚¹ï¼Œå› æ­¤æˆ‘ä»¬è®¾ç«‹ä¸¤ä¸ªæŒ‡é’ˆï¼Œç¬¬ä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ï¼Œç¬¬äºŒä¸ªæŒ‡å‘ç¬¬nä¸ªèŠ‚ç‚¹ã€‚</p>
<p>ç„¶ååŒæ—¶å‘åéå†ï¼Œå½“ç¬¬äºŒä¸ªæŒ‡é’ˆæŒ‡å‘nullæ—¶ï¼Œç¬¬ä¸€ä¸ªæŒ‡é’ˆä¹Ÿå°±æŒ‡å‘äº†ç¬¬nä¸ªèŠ‚ç‚¹ã€‚</p>
<p>ç”¨æ—¶ï¼š0ms</p>
<p>æ—¶é—´å¤æ‚åº¦ï¼šOï¼ˆnï¼‰</p>
<p>ç©ºé—´å¤æ‚åº¦ï¼šSï¼ˆ1ï¼‰</p>
]]></content>
      <categories>
        <category>LeetCode</category>
      </categories>
      <tags>
        <tag>æ¯æ—¥ä¸€é¢˜</tag>
        <tag>JAVA</tag>
        <tag>LeetCodeTop100</tag>
        <tag>å¿«æ…¢æŒ‡é’ˆ</tag>
      </tags>
  </entry>
  <entry>
    <title>LeetCodeP0017â€”â€”ç”µè¯å·ç çš„å­—æ¯ç»„åˆ</title>
    <url>/2021/09/09/LeetCodeP0017%E2%80%94%E2%80%94%E7%94%B5%E8%AF%9D%E5%8F%B7%E7%A0%81%E7%9A%84%E5%AD%97%E6%AF%8D%E7%BB%84%E5%90%88/</url>
    <content><![CDATA[<h2 id="é¢˜ç›®"><a href="#é¢˜ç›®" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h2><p>ç»™å®šä¸€ä¸ªä»…åŒ…å«æ•°å­— 2-9 çš„å­—ç¬¦ä¸²ï¼Œè¿”å›æ‰€æœ‰å®ƒèƒ½è¡¨ç¤ºçš„å­—æ¯ç»„åˆã€‚ç­”æ¡ˆå¯ä»¥æŒ‰ ä»»æ„é¡ºåº è¿”å›ã€‚</p>
<p>ç»™å‡ºæ•°å­—åˆ°å­—æ¯çš„æ˜ å°„å¦‚ä¸‹ï¼ˆä¸ç”µè¯æŒ‰é”®ç›¸åŒï¼‰ã€‚æ³¨æ„ 1 ä¸å¯¹åº”ä»»ä½•å­—æ¯ã€‚</p>
<p><img src="https://z3.ax1x.com/2021/09/09/hqmRZ8.png" alt="img"></p>
<h3 id="ç¤ºä¾‹1"><a href="#ç¤ºä¾‹1" class="headerlink" title="ç¤ºä¾‹1"></a>ç¤ºä¾‹1</h3><figure class="highlight markdown"><table><tbody><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šdigits = "23"</span><br><span class="line">è¾“å‡ºï¼š["ad","ae","af","bd","be","bf","cd","ce","cf"]</span><br></pre></td></tr></tbody></table></figure>
<span id="more"></span>
<h3 id="ç¤ºä¾‹2"><a href="#ç¤ºä¾‹2" class="headerlink" title="ç¤ºä¾‹2"></a>ç¤ºä¾‹2</h3><figure class="highlight markdown"><table><tbody><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šdigits = ""</span><br><span class="line">è¾“å‡ºï¼š[]</span><br></pre></td></tr></tbody></table></figure>
<h3 id="ç¤ºä¾‹3"><a href="#ç¤ºä¾‹3" class="headerlink" title="ç¤ºä¾‹3"></a>ç¤ºä¾‹3</h3><figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šdigits = "2"</span><br><span class="line">è¾“å‡ºï¼š["a","b","c"]</span><br></pre></td></tr></tbody></table></figure>
<h3 id="æç¤ºï¼š"><a href="#æç¤ºï¼š" class="headerlink" title="æç¤ºï¼š"></a>æç¤ºï¼š</h3><ul>
<li><code>0 &lt;= digits.length &lt;= 4</code></li>
<li><code>digits[i]</code> æ˜¯èŒƒå›´ <code>['2', '9']</code> çš„ä¸€ä¸ªæ•°å­—ã€‚</li>
</ul>
<p><br></p>
<h3 id="é¢˜è§£1-å›æº¯æ³•"><a href="#é¢˜è§£1-å›æº¯æ³•" class="headerlink" title="é¢˜è§£1: å›æº¯æ³•"></a>é¢˜è§£1: å›æº¯æ³•</h3><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>{</span><br><span class="line">    List&lt;String&gt; res = <span class="keyword">null</span>;</span><br><span class="line">    List&lt;<span class="keyword">char</span>[]&gt; number = <span class="keyword">null</span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;String&gt; <span class="title">letterCombinations</span><span class="params">(String digits)</span> </span>{</span><br><span class="line">        <span class="keyword">if</span>(digits.length() == <span class="number">0</span>){</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> ArrayList&lt;String&gt;();</span><br><span class="line">        }</span><br><span class="line">        res = <span class="keyword">new</span> ArrayList&lt;String&gt;();</span><br><span class="line">        number = <span class="keyword">new</span> ArrayList();</span><br><span class="line">        number.add(<span class="keyword">new</span> <span class="keyword">char</span>[]{<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'c'</span>});</span><br><span class="line">        number.add(<span class="keyword">new</span> <span class="keyword">char</span>[]{<span class="string">'d'</span>,<span class="string">'e'</span>,<span class="string">'f'</span>});</span><br><span class="line">        number.add(<span class="keyword">new</span> <span class="keyword">char</span>[]{<span class="string">'g'</span>,<span class="string">'h'</span>,<span class="string">'i'</span>});</span><br><span class="line">        number.add(<span class="keyword">new</span> <span class="keyword">char</span>[]{<span class="string">'j'</span>,<span class="string">'k'</span>,<span class="string">'l'</span>});</span><br><span class="line">        number.add(<span class="keyword">new</span> <span class="keyword">char</span>[]{<span class="string">'m'</span>,<span class="string">'n'</span>,<span class="string">'o'</span>});</span><br><span class="line">        number.add(<span class="keyword">new</span> <span class="keyword">char</span>[]{<span class="string">'p'</span>,<span class="string">'q'</span>,<span class="string">'r'</span>,<span class="string">'s'</span>});</span><br><span class="line">        number.add(<span class="keyword">new</span> <span class="keyword">char</span>[]{<span class="string">'t'</span>,<span class="string">'u'</span>,<span class="string">'v'</span>});</span><br><span class="line">        number.add(<span class="keyword">new</span> <span class="keyword">char</span>[]{<span class="string">'w'</span>,<span class="string">'x'</span>,<span class="string">'y'</span>,<span class="string">'z'</span>});</span><br><span class="line">        <span class="keyword">char</span>[] digitsArray = digits.toCharArray();</span><br><span class="line">        dps(digitsArray, <span class="keyword">new</span> StringBuilder(), <span class="number">0</span>);</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    }</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">dps</span><span class="params">(<span class="keyword">char</span>[] digitsArray, StringBuilder str, <span class="keyword">int</span> count)</span></span>{</span><br><span class="line">        <span class="keyword">if</span>(count == digitsArray.length){</span><br><span class="line">            res.add(str.toString());</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">int</span> num = digitsArray[count] - <span class="number">48</span>;</span><br><span class="line">        <span class="keyword">char</span>[] chars = number.get(num - <span class="number">2</span>);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;chars.length;i++){</span><br><span class="line">            StringBuilder str_copy = <span class="keyword">new</span> StringBuilder(str);</span><br><span class="line">            str_copy.append(chars[i]);</span><br><span class="line">            dps(digitsArray, str_copy, count + <span class="number">1</span>);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>ç”¨æ—¶ï¼š0ms</p>
<p>æ—¶é—´å¤æ‚åº¦ï¼šOï¼ˆ$3^m \times 4^n$ï¼‰</p>
<p>ç©ºé—´å¤æ‚åº¦ï¼šSï¼ˆm + nï¼‰ï¼Œé€’å½’è°ƒç”¨å±‚æ•°ä¸ºï¼ˆm+nï¼‰</p>
<p>å…¶ä¸­mæ˜¯è¾“å…¥ä¸­å¯¹åº”3ä¸ªå­—æ¯çš„æ•°å­—ä¸ªæ•°ï¼ˆåŒ…æ‹¬æ•°å­—2ã€3ã€4ã€5ã€6ã€8ï¼‰</p>
<p>â€‹         næ˜¯è¾“å…¥ä¸­å¯¹åº”4ä¸ªå­—æ¯çš„æ•°å­—ä¸ªæ•°ï¼ˆåŒ…æ‹¬æ•°å­—7ã€9ï¼‰</p>
]]></content>
      <categories>
        <category>LeetCode</category>
      </categories>
      <tags>
        <tag>æ¯æ—¥ä¸€é¢˜</tag>
        <tag>JAVA</tag>
        <tag>LeetCodeTop100</tag>
        <tag>dfs</tag>
      </tags>
  </entry>
  <entry>
    <title>LeetCodeP0020â€”â€”æœ‰æ•ˆçš„æ‹¬å·</title>
    <url>/2021/09/09/LeetCodeP0020%E2%80%94%E2%80%94%E6%9C%89%E6%95%88%E7%9A%84%E6%8B%AC%E5%8F%B7/</url>
    <content><![CDATA[<h2 id="é¢˜ç›®"><a href="#é¢˜ç›®" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h2><h2 id="é¢˜ç›®-1"><a href="#é¢˜ç›®-1" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h2><p>ç»™å®šä¸€ä¸ªåªåŒ…æ‹¬ â€˜(â€˜ï¼Œâ€™)â€™ï¼Œâ€™{â€˜ï¼Œâ€™}â€™ï¼Œâ€™[â€˜ï¼Œâ€™]â€™ çš„å­—ç¬¦ä¸² s ï¼Œåˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦æœ‰æ•ˆã€‚</p>
<p>æœ‰æ•ˆå­—ç¬¦ä¸²éœ€æ»¡è¶³ï¼š</p>
<ol>
<li>å·¦æ‹¬å·å¿…é¡»ç”¨ç›¸åŒç±»å‹çš„å³æ‹¬å·é—­åˆã€‚</li>
<li>å·¦æ‹¬å·å¿…é¡»ä»¥æ­£ç¡®çš„é¡ºåºé—­åˆã€‚</li>
</ol>
<h3 id="ç¤ºä¾‹1"><a href="#ç¤ºä¾‹1" class="headerlink" title="ç¤ºä¾‹1"></a>ç¤ºä¾‹1</h3><figure class="highlight markdown"><table><tbody><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šs = "()"</span><br><span class="line">è¾“å‡ºï¼štrue</span><br></pre></td></tr></tbody></table></figure>
<span id="more"></span>
<h3 id="ç¤ºä¾‹2"><a href="#ç¤ºä¾‹2" class="headerlink" title="ç¤ºä¾‹2"></a>ç¤ºä¾‹2</h3><figure class="highlight markdown"><table><tbody><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šs = "{[]}"</span><br><span class="line">è¾“å‡ºï¼štrue</span><br></pre></td></tr></tbody></table></figure>
<h3 id="ç¤ºä¾‹3"><a href="#ç¤ºä¾‹3" class="headerlink" title="ç¤ºä¾‹3"></a>ç¤ºä¾‹3</h3><figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šs = "(]"</span><br><span class="line">è¾“å‡ºï¼šfalse</span><br></pre></td></tr></tbody></table></figure>
<h3 id="ç¤ºä¾‹4"><a href="#ç¤ºä¾‹4" class="headerlink" title="ç¤ºä¾‹4"></a>ç¤ºä¾‹4</h3><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šs = <span class="string">"([)]"</span></span><br><span class="line">è¾“å‡ºï¼š<span class="keyword">false</span></span><br></pre></td></tr></tbody></table></figure>
<h3 id="æç¤ºï¼š"><a href="#æç¤ºï¼š" class="headerlink" title="æç¤ºï¼š"></a>æç¤ºï¼š</h3><ul>
<li><code>1 &lt;= s.length &lt;= 104</code></li>
<li><code>s</code> ä»…ç”±æ‹¬å· <code>'()[]{}'</code> ç»„æˆ</li>
</ul>
<p><br></p>
<h3 id="é¢˜è§£1-æ ˆ"><a href="#é¢˜è§£1-æ ˆ" class="headerlink" title="é¢˜è§£1: æ ˆ"></a>é¢˜è§£1: æ ˆ</h3><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>{</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isValid</span><span class="params">(String s)</span> </span>{</span><br><span class="line">        <span class="keyword">char</span>[] chars = s.toCharArray();</span><br><span class="line">        Stack&lt;Character&gt; brackets = <span class="keyword">new</span> Stack&lt;Character&gt;();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;chars.length;i++){</span><br><span class="line">            <span class="keyword">char</span> bracket = chars[i];</span><br><span class="line">            <span class="keyword">if</span>(bracket == <span class="string">'('</span> || bracket == <span class="string">'['</span> || bracket == <span class="string">'{'</span>){</span><br><span class="line">                brackets.push(bracket);</span><br><span class="line">            }<span class="keyword">else</span>{</span><br><span class="line">                <span class="keyword">if</span>(canMatch(bracket, brackets)){</span><br><span class="line">                    brackets.pop();</span><br><span class="line">                }<span class="keyword">else</span>{</span><br><span class="line">                    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">if</span>(brackets.size() == <span class="number">0</span>){</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        }<span class="keyword">else</span>{</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">canMatch</span><span class="params">(<span class="keyword">char</span> bracket, Stack&lt;Character&gt; brackets)</span></span>{</span><br><span class="line">        <span class="keyword">if</span>(brackets.size() == <span class="number">0</span>){</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">if</span>((bracket == <span class="string">')'</span> &amp;&amp; brackets.peek() == <span class="string">'('</span>) || </span><br><span class="line">           (bracket == <span class="string">']'</span> &amp;&amp; brackets.peek() == <span class="string">'['</span>) ||</span><br><span class="line">           (bracket == <span class="string">'}'</span> &amp;&amp; brackets.peek() == <span class="string">'{'</span>)){</span><br><span class="line">               <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">           }<span class="keyword">else</span>{</span><br><span class="line">               <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">           }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>å°†éå†åˆ°çš„å·¦æ‹¬å·æ”¾åˆ°æ ˆä¸­ï¼Œéå†åˆ°çš„å³æ‹¬å·å’Œæ ˆé¡¶çš„æ‹¬å·åšåŒ¹é…ï¼ŒåŒ¹é…æˆåŠŸåˆ™ä¸¤ä¸ªéƒ½æ¶ˆæ‰ï¼ŒåŒ¹é…ä¸æˆåŠŸå°±è¿”å›falseï¼Œå­—ç¬¦ä¸²éå†å®Œæ¯•åˆ™è¿”å›trueã€‚</p>
<p>ç”¨æ—¶ï¼š1ms</p>
<p>æ—¶é—´å¤æ‚åº¦ï¼šOï¼ˆnï¼‰</p>
<p>ç©ºé—´å¤æ‚åº¦ï¼šSï¼ˆnï¼‰</p>
<p><br></p>
<h3 id="é¢˜è§£2-æ ˆ-ascll"><a href="#é¢˜è§£2-æ ˆ-ascll" class="headerlink" title="é¢˜è§£2: æ ˆ + ascll"></a>é¢˜è§£2: æ ˆ + ascll</h3><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>{</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isValid</span><span class="params">(String s)</span> </span>{</span><br><span class="line">        <span class="keyword">char</span>[] chars = s.toCharArray();</span><br><span class="line">        Stack&lt;Character&gt; brackets = <span class="keyword">new</span> Stack&lt;Character&gt;();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;chars.length;i++){</span><br><span class="line">            <span class="keyword">char</span> bracket = chars[i];</span><br><span class="line">            <span class="keyword">if</span>(bracket == <span class="string">'('</span> || bracket == <span class="string">'['</span> || bracket == <span class="string">'{'</span>){</span><br><span class="line">                brackets.push(bracket);</span><br><span class="line">            }<span class="keyword">else</span>{</span><br><span class="line">                <span class="keyword">if</span>(brackets.size() == <span class="number">0</span>){</span><br><span class="line">                    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">                }</span><br><span class="line">                <span class="keyword">if</span>(bracket - brackets.peek() == <span class="number">1</span> || bracket - brackets.peek() == <span class="number">2</span>){</span><br><span class="line">                    brackets.pop();</span><br><span class="line">                }<span class="keyword">else</span>{</span><br><span class="line">                    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">if</span>(brackets.size() == <span class="number">0</span>){</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        }<span class="keyword">else</span>{</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>åšæ³•åŒé¢˜è§£1ï¼Œä½†åˆ¤æ–­æ‹¬å·æ˜¯å¦åŒ¹é…ä½¿ç”¨äº†ascllï¼ˆä¸¤ä¸ªæ‹¬å·çš„ascllå€¼ç›¸å·®ä¸º1æˆ–2ï¼‰ï¼Œä»£ç ç›¸å¯¹ä¼šæ›´åŠ ç®€æ´ä¸€ç‚¹ã€‚</p>
<p>ç”¨æ—¶ï¼š1ms</p>
<p>æ—¶é—´å¤æ‚åº¦ï¼šOï¼ˆnï¼‰</p>
<p>ç©ºé—´å¤æ‚åº¦ï¼šSï¼ˆnï¼‰</p>
<p><br></p>
<h3 id="é¢˜è§£3-å¥‡å¦™çš„æ–¹æ³•"><a href="#é¢˜è§£3-å¥‡å¦™çš„æ–¹æ³•" class="headerlink" title="é¢˜è§£3: å¥‡å¦™çš„æ–¹æ³•"></a>é¢˜è§£3: å¥‡å¦™çš„æ–¹æ³•</h3><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>{</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isValid</span><span class="params">(String s)</span> </span>{</span><br><span class="line">        <span class="keyword">while</span>(s.contains(<span class="string">"()"</span>) || s.contains(<span class="string">"[]"</span>) || s.contains(<span class="string">"{}"</span>)){</span><br><span class="line">            <span class="keyword">if</span>(s.contains(<span class="string">"()"</span>)){</span><br><span class="line">                s = s.replace(<span class="string">"()"</span>,<span class="string">""</span>);</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">if</span>(s.contains(<span class="string">"[]"</span>)){</span><br><span class="line">                s = s.replace(<span class="string">"[]"</span>,<span class="string">""</span>);</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">if</span>(s.contains(<span class="string">"{}"</span>)){</span><br><span class="line">                s = s.replace(<span class="string">"{}"</span>,<span class="string">""</span>);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> s.length()==<span class="number">0</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>ä¸ç®¡æ€æ ·ï¼Œæœ€é‡Œé¢ä¸€å±‚ä¸€å®šæ˜¯â€()â€,â€[]â€,â€{}â€ä¸‰è€…é€‰å…¶ä¸€ï¼Œç„¶åé€å±‚å‰–å¼€ã€‚</p>
<p>ä¸è¿‡æ—¶é—´å¤æ‚åº¦å¾ˆé«˜ï¼Œçœ‹ä¸ªä¹å‘µå°±è¡Œäº†ã€‚</p>
<p>ç”¨æ—¶ï¼š47ms</p>
<p>æ—¶é—´å¤æ‚åº¦ï¼šOï¼ˆ$n^3$ï¼‰</p>
<p>ç©ºé—´å¤æ‚åº¦ï¼šSï¼ˆ1ï¼‰</p>
]]></content>
      <categories>
        <category>LeetCode</category>
      </categories>
      <tags>
        <tag>æ¯æ—¥ä¸€é¢˜</tag>
        <tag>JAVA</tag>
        <tag>LeetCodeTop100</tag>
        <tag>æ ˆ</tag>
      </tags>
  </entry>
  <entry>
    <title>LeetCodeP0021â€”â€”åˆå¹¶ä¸¤ä¸ªæœ‰åºé“¾è¡¨</title>
    <url>/2021/09/09/LeetCodeP0021%E2%80%94%E2%80%94%E5%90%88%E5%B9%B6%E4%B8%A4%E4%B8%AA%E6%9C%89%E5%BA%8F%E9%93%BE%E8%A1%A8/</url>
    <content><![CDATA[<h2 id="é¢˜ç›®"><a href="#é¢˜ç›®" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h2><p>å°†ä¸¤ä¸ªå‡åºé“¾è¡¨åˆå¹¶ä¸ºä¸€ä¸ªæ–°çš„ <strong>å‡åº</strong> é“¾è¡¨å¹¶è¿”å›ã€‚æ–°é“¾è¡¨æ˜¯é€šè¿‡æ‹¼æ¥ç»™å®šçš„ä¸¤ä¸ªé“¾è¡¨çš„æ‰€æœ‰èŠ‚ç‚¹ç»„æˆçš„ã€‚ </p>
<h3 id="ç¤ºä¾‹1"><a href="#ç¤ºä¾‹1" class="headerlink" title="ç¤ºä¾‹1"></a>ç¤ºä¾‹1</h3><p><img src="https://z3.ax1x.com/2021/09/09/hLvmfU.jpg" alt="img"></p>
<figure class="highlight markdown"><table><tbody><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šl1 = [1,2,4], l2 = [1,3,4]</span><br><span class="line">è¾“å‡ºï¼š[1,1,2,3,4,4]</span><br></pre></td></tr></tbody></table></figure>
<span id="more"></span>
<h3 id="ç¤ºä¾‹2"><a href="#ç¤ºä¾‹2" class="headerlink" title="ç¤ºä¾‹2"></a>ç¤ºä¾‹2</h3><figure class="highlight markdown"><table><tbody><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šl1 = [], l2 = []</span><br><span class="line">è¾“å‡ºï¼š[]</span><br></pre></td></tr></tbody></table></figure>
<h3 id="ç¤ºä¾‹3"><a href="#ç¤ºä¾‹3" class="headerlink" title="ç¤ºä¾‹3"></a>ç¤ºä¾‹3</h3><figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šl1 = [], l2 = [0]</span><br><span class="line">è¾“å‡ºï¼š[0]</span><br></pre></td></tr></tbody></table></figure>
<h3 id="æç¤ºï¼š"><a href="#æç¤ºï¼š" class="headerlink" title="æç¤ºï¼š"></a>æç¤ºï¼š</h3><ul>
<li>ä¸¤ä¸ªé“¾è¡¨çš„èŠ‚ç‚¹æ•°ç›®èŒƒå›´æ˜¯ <code>[0, 50]</code></li>
<li><code>-100 &lt;= Node.val &lt;= 100</code></li>
<li><code>l1</code> å’Œ <code>l2</code> å‡æŒ‰ <strong>éé€’å‡é¡ºåº</strong> æ’åˆ—</li>
</ul>
<p><br></p>
<h3 id="é¢˜è§£1-è¿­ä»£"><a href="#é¢˜è§£1-è¿­ä»£" class="headerlink" title="é¢˜è§£1: è¿­ä»£"></a>é¢˜è§£1: è¿­ä»£</h3><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for singly-linked list.</span></span><br><span class="line"><span class="comment"> * public class ListNode {</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     ListNode next;</span></span><br><span class="line"><span class="comment"> *     ListNode() {}</span></span><br><span class="line"><span class="comment"> *     ListNode(int val) { this.val = val; }</span></span><br><span class="line"><span class="comment"> *     ListNode(int val, ListNode next) { this.val = val; this.next = next; }</span></span><br><span class="line"><span class="comment"> * }</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> ListNode <span class="title">mergeTwoLists</span><span class="params">(ListNode l1, ListNode l2)</span> </span>{</span><br><span class="line">        ListNode newHead = <span class="keyword">new</span> ListNode();</span><br><span class="line">        ListNode tmp = newHead;</span><br><span class="line">        <span class="keyword">while</span>(l1 != <span class="keyword">null</span> &amp;&amp; l2 != <span class="keyword">null</span>){</span><br><span class="line">            <span class="keyword">if</span>(l1.val &lt; l2.val){</span><br><span class="line">                tmp.next = l1;</span><br><span class="line">                l1 = l1.next;</span><br><span class="line">            }<span class="keyword">else</span>{</span><br><span class="line">                tmp.next = l2;</span><br><span class="line">                l2 = l2.next;</span><br><span class="line">            }</span><br><span class="line">            tmp = tmp.next;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(l1 != <span class="keyword">null</span>){</span><br><span class="line">            tmp.next = l1;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(l2 != <span class="keyword">null</span>){</span><br><span class="line">            tmp.next = l2;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> newHead.next;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>ç”¨æ—¶ï¼š0ms</p>
<p>æ—¶é—´å¤æ‚åº¦ï¼šOï¼ˆm + nï¼‰</p>
<p>ç©ºé—´å¤æ‚åº¦ï¼šSï¼ˆm + nï¼‰</p>
<p>må’Œnä¸ºä¸¤ä¸ªé“¾è¡¨é•¿åº¦</p>
<p><br></p>
<h3 id="é¢˜è§£2-é€’å½’"><a href="#é¢˜è§£2-é€’å½’" class="headerlink" title="é¢˜è§£2: é€’å½’"></a>é¢˜è§£2: é€’å½’</h3><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for singly-linked list.</span></span><br><span class="line"><span class="comment"> * public class ListNode {</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     ListNode next;</span></span><br><span class="line"><span class="comment"> *     ListNode() {}</span></span><br><span class="line"><span class="comment"> *     ListNode(int val) { this.val = val; }</span></span><br><span class="line"><span class="comment"> *     ListNode(int val, ListNode next) { this.val = val; this.next = next; }</span></span><br><span class="line"><span class="comment"> * }</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> ListNode <span class="title">mergeTwoLists</span><span class="params">(ListNode l1, ListNode l2)</span> </span>{</span><br><span class="line">        <span class="keyword">if</span>(l1 == <span class="keyword">null</span>){</span><br><span class="line">            <span class="keyword">return</span> l2;</span><br><span class="line">        }<span class="keyword">else</span> <span class="keyword">if</span>(l2 == <span class="keyword">null</span>){</span><br><span class="line">            <span class="keyword">return</span> l1;</span><br><span class="line">        }<span class="keyword">else</span> <span class="keyword">if</span>(l1.val &lt; l2.val){</span><br><span class="line">            l1.next = mergeTwoLists(l1.next, l2);</span><br><span class="line">            <span class="keyword">return</span> l1;</span><br><span class="line">        }<span class="keyword">else</span>{</span><br><span class="line">            l2.next = mergeTwoLists(l1, l2.next);</span><br><span class="line">            <span class="keyword">return</span> l2;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>åŸåœ°æ“ä½œï¼Œå¦‚æœL1å°ï¼Œåˆ™åˆ¤æ–­L1.nextå’ŒL2ã€‚å½“æœ‰ä¸€æ–¹ä¸ºnullæ—¶ï¼Œè¿”å›å¦ä¸€æ–¹ã€‚</p>
<p>ç”¨æ—¶ï¼š0ms</p>
<p>æ—¶é—´å¤æ‚åº¦ï¼šOï¼ˆm + nï¼‰</p>
<p>ç©ºé—´å¤æ‚åº¦ï¼šSï¼ˆm + nï¼‰ï¼Œå †æ ˆæ‰€éœ€ç©ºé—´</p>
<p>må’Œnä¸ºä¸¤ä¸ªé“¾è¡¨é•¿åº¦</p>
]]></content>
      <categories>
        <category>LeetCode</category>
      </categories>
      <tags>
        <tag>æ¯æ—¥ä¸€é¢˜</tag>
        <tag>JAVA</tag>
        <tag>LeetCodeTop100</tag>
        <tag>é€’å½’</tag>
      </tags>
  </entry>
  <entry>
    <title>LeetCodeP0023â€”â€”åˆå¹¶Kä¸ªå‡åºåˆ—è¡¨</title>
    <url>/2021/09/14/LeetCodeP0023%E2%80%94%E2%80%94%E5%90%88%E5%B9%B6K%E4%B8%AA%E5%8D%87%E5%BA%8F%E5%88%97%E8%A1%A8/</url>
    <content><![CDATA[<h2 id="é¢˜ç›®"><a href="#é¢˜ç›®" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h2><p>ç»™ä½ ä¸€ä¸ªé“¾è¡¨æ•°ç»„ï¼Œæ¯ä¸ªé“¾è¡¨éƒ½å·²ç»æŒ‰å‡åºæ’åˆ—ã€‚</p>
<p>è¯·ä½ å°†æ‰€æœ‰é“¾è¡¨åˆå¹¶åˆ°ä¸€ä¸ªå‡åºé“¾è¡¨ä¸­ï¼Œè¿”å›åˆå¹¶åçš„é“¾è¡¨ã€‚</p>
<h3 id="ç¤ºä¾‹1"><a href="#ç¤ºä¾‹1" class="headerlink" title="ç¤ºä¾‹1"></a>ç¤ºä¾‹1</h3><figure class="highlight markdown"><table><tbody><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šlists = [[1,4,5],[1,3,4],[2,6]]</span><br><span class="line">è¾“å‡ºï¼š[1,1,2,3,4,4,5,6]</span><br><span class="line">è§£é‡Šï¼šé“¾è¡¨æ•°ç»„å¦‚ä¸‹ï¼š</span><br><span class="line">[</span><br><span class="line">  1-&gt;4-&gt;5,</span><br><span class="line">  1-&gt;3-&gt;4,</span><br><span class="line">  2-&gt;6</span><br><span class="line">]</span><br><span class="line">å°†å®ƒä»¬åˆå¹¶åˆ°ä¸€ä¸ªæœ‰åºé“¾è¡¨ä¸­å¾—åˆ°ã€‚</span><br><span class="line">1-&gt;1-&gt;2-&gt;3-&gt;4-&gt;4-&gt;5-&gt;6</span><br><span class="line"></span><br><span class="line">æ¥æºï¼šåŠ›æ‰£ï¼ˆLeetCodeï¼‰</span><br><span class="line">é“¾æ¥ï¼šhttps://leetcode-cn.com/problems/merge-k-sorted-lists</span><br><span class="line">è‘—ä½œæƒå½’é¢†æ‰£ç½‘ç»œæ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»å®˜æ–¹æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</span><br></pre></td></tr></tbody></table></figure>
<span id="more"></span>
<h3 id="ç¤ºä¾‹2"><a href="#ç¤ºä¾‹2" class="headerlink" title="ç¤ºä¾‹2"></a>ç¤ºä¾‹2</h3><figure class="highlight markdown"><table><tbody><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šlists = []</span><br><span class="line">è¾“å‡ºï¼š[]</span><br></pre></td></tr></tbody></table></figure>
<h3 id="ç¤ºä¾‹3"><a href="#ç¤ºä¾‹3" class="headerlink" title="ç¤ºä¾‹3"></a>ç¤ºä¾‹3</h3><figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šlists = [[]]</span><br><span class="line">è¾“å‡ºï¼š[]</span><br></pre></td></tr></tbody></table></figure>
<h3 id="æç¤ºï¼š"><a href="#æç¤ºï¼š" class="headerlink" title="æç¤ºï¼š"></a>æç¤ºï¼š</h3><p>k == lists.length<br>0 &lt;= k &lt;= 10^4<br>0 &lt;= lists[i].length &lt;= 500<br>-10^4 &lt;= lists[i][j] &lt;= 10^4<br>lists[i] æŒ‰ å‡åº æ’åˆ—<br>lists[i].length çš„æ€»å’Œä¸è¶…è¿‡ 10^4</p>
<p><br></p>
<h3 id="é¢˜è§£1-é¡ºåºåˆå¹¶"><a href="#é¢˜è§£1-é¡ºåºåˆå¹¶" class="headerlink" title="é¢˜è§£1: é¡ºåºåˆå¹¶"></a>é¢˜è§£1: é¡ºåºåˆå¹¶</h3><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for singly-linked list.</span></span><br><span class="line"><span class="comment"> * public class ListNode {</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     ListNode next;</span></span><br><span class="line"><span class="comment"> *     ListNode() {}</span></span><br><span class="line"><span class="comment"> *     ListNode(int val) { this.val = val; }</span></span><br><span class="line"><span class="comment"> *     ListNode(int val, ListNode next) { this.val = val; this.next = next; }</span></span><br><span class="line"><span class="comment"> * }</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> ListNode <span class="title">mergeKLists</span><span class="params">(ListNode[] lists)</span> </span>{</span><br><span class="line">        ListNode newNode = <span class="keyword">new</span> ListNode();</span><br><span class="line">        <span class="keyword">if</span>(lists.length == <span class="number">0</span>){</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        }</span><br><span class="line">        ListNode sortedNode = lists[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i &lt; lists.length;i++){</span><br><span class="line">            sortedNode = mergeTwoLists(sortedNode, lists[i]);</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> sortedNode;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ListNode <span class="title">mergeTwoLists</span><span class="params">(ListNode node1, ListNode node2)</span></span>{</span><br><span class="line">        ListNode newNode = <span class="keyword">new</span> ListNode();</span><br><span class="line">        ListNode tmp = newNode;</span><br><span class="line">        <span class="keyword">while</span>(node1 !=<span class="keyword">null</span> &amp;&amp; node2 != <span class="keyword">null</span>){</span><br><span class="line">            <span class="keyword">if</span>(node1.val &lt; node2.val){</span><br><span class="line">                tmp.next = node1;</span><br><span class="line">                tmp = tmp.next;</span><br><span class="line">                node1 = node1.next;</span><br><span class="line">            }<span class="keyword">else</span>{</span><br><span class="line">                tmp.next = node2;</span><br><span class="line">                tmp = tmp.next;</span><br><span class="line">                node2 = node2.next;</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(node1 != <span class="keyword">null</span>){</span><br><span class="line">            tmp.next = node1;</span><br><span class="line">        }<span class="keyword">else</span>{</span><br><span class="line">            tmp.next = node2;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> newNode.next;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>è¿™é‡Œç»“åˆäº†ä¹‹å‰åˆå¹¶ä¸¤ä¸ªé“¾è¡¨çš„æ–¹æ³•ï¼Œå‡è®¾æœ‰kä¸ªé“¾è¡¨ï¼Œæˆ‘ä»¬æŒ‡å®šç¬¬ä¸€ä¸ªé“¾è¡¨å’Œåé¢k-1ä¸ªé“¾è¡¨è¿›è¡Œåˆå¹¶ï¼Œåªéœ€è¦åˆå¹¶k-1æ¬¡å°±è¡Œäº†ã€‚</p>
<p>ç”¨æ—¶ï¼š101ms</p>
<p>æ—¶é—´å¤æ‚åº¦ï¼šOï¼ˆ$k^2n$ï¼‰</p>
<p>ç©ºé—´å¤æ‚åº¦ï¼šSï¼ˆ1ï¼‰</p>
<p>å…¶ä¸­kä¸ºkä¸ªé“¾è¡¨ï¼Œnä¸ºæ¯ä¸ªé“¾è¡¨çš„æœ€é•¿é•¿åº¦</p>
<p><br></p>
<h3 id="é¢˜è§£2-åˆ†è€Œæ²»ä¹‹"><a href="#é¢˜è§£2-åˆ†è€Œæ²»ä¹‹" class="headerlink" title="é¢˜è§£2: åˆ†è€Œæ²»ä¹‹"></a>é¢˜è§£2: åˆ†è€Œæ²»ä¹‹</h3><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for singly-linked list.</span></span><br><span class="line"><span class="comment"> * public class ListNode {</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     ListNode next;</span></span><br><span class="line"><span class="comment"> *     ListNode() {}</span></span><br><span class="line"><span class="comment"> *     ListNode(int val) { this.val = val; }</span></span><br><span class="line"><span class="comment"> *     ListNode(int val, ListNode next) { this.val = val; this.next = next; }</span></span><br><span class="line"><span class="comment"> * }</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> ListNode <span class="title">mergeKLists</span><span class="params">(ListNode[] lists)</span> </span>{</span><br><span class="line">        <span class="keyword">if</span>(lists.length == <span class="number">0</span>){</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> merge(lists, <span class="number">0</span>, lists.length - <span class="number">1</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ListNode <span class="title">merge</span><span class="params">(ListNode[] lists, <span class="keyword">int</span> l, <span class="keyword">int</span> r)</span></span>{</span><br><span class="line">        <span class="keyword">if</span>(l == r){</span><br><span class="line">            <span class="keyword">return</span> lists[l];</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">int</span> mid = (l + r) / <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">return</span> mergeTwoLists(merge(lists, l, mid), merge(lists, mid + <span class="number">1</span>, r));</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ListNode <span class="title">mergeTwoLists</span><span class="params">(ListNode node1, ListNode node2)</span></span>{</span><br><span class="line">        ListNode newNode = <span class="keyword">new</span> ListNode();</span><br><span class="line">        ListNode tmp = newNode;</span><br><span class="line">        <span class="keyword">while</span>(node1 !=<span class="keyword">null</span> &amp;&amp; node2 != <span class="keyword">null</span>){</span><br><span class="line">            <span class="keyword">if</span>(node1.val &lt; node2.val){</span><br><span class="line">                tmp.next = node1;</span><br><span class="line">                tmp = tmp.next;</span><br><span class="line">                node1 = node1.next;</span><br><span class="line">            }<span class="keyword">else</span>{</span><br><span class="line">                tmp.next = node2;</span><br><span class="line">                tmp = tmp.next;</span><br><span class="line">                node2 = node2.next;</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(node1 != <span class="keyword">null</span>){</span><br><span class="line">            tmp.next = node1;</span><br><span class="line">        }<span class="keyword">else</span>{</span><br><span class="line">            tmp.next = node2;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> newNode.next;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p><img src="https://z3.ax1x.com/2021/09/14/4FJYZj.png" alt=""></p>
<p>è¿™æ˜¯åœ¨é¡ºåºåˆå¹¶çš„åŸºç¡€ä¸Šè¿›è¡Œäº†æ”¹è¿›ï¼Œä¸¤ä¸¤åˆå¹¶ï¼Œåªéœ€åˆå¹¶$logk$æ¬¡</p>
<p>ç”¨æ—¶ï¼š1ms</p>
<p>æ—¶é—´å¤æ‚åº¦ï¼šOï¼ˆ$kn * logk$ï¼‰</p>
<p>ç©ºé—´å¤æ‚åº¦ï¼šSï¼ˆ$logk$ï¼‰</p>
]]></content>
      <categories>
        <category>LeetCode</category>
      </categories>
      <tags>
        <tag>æ¯æ—¥ä¸€é¢˜</tag>
        <tag>JAVA</tag>
        <tag>LeetCodeTop100</tag>
        <tag>åˆ†æ²»</tag>
      </tags>
  </entry>
  <entry>
    <title>LeetCodeP0022â€”â€”æ‹¬å·ç”Ÿæˆ</title>
    <url>/2021/09/09/LeetCodeP0022%E2%80%94%E2%80%94%E6%8B%AC%E5%8F%B7%E7%94%9F%E6%88%90/</url>
    <content><![CDATA[<h2 id="é¢˜ç›®"><a href="#é¢˜ç›®" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h2><p>æ•°å­— <code>n</code> ä»£è¡¨ç”Ÿæˆæ‹¬å·çš„å¯¹æ•°ï¼Œè¯·ä½ è®¾è®¡ä¸€ä¸ªå‡½æ•°ï¼Œç”¨äºèƒ½å¤Ÿç”Ÿæˆæ‰€æœ‰å¯èƒ½çš„å¹¶ä¸” <strong>æœ‰æ•ˆçš„</strong> æ‹¬å·ç»„åˆã€‚</p>
<p>æœ‰æ•ˆæ‹¬å·ç»„åˆéœ€æ»¡è¶³ï¼šå·¦æ‹¬å·å¿…é¡»ä»¥æ­£ç¡®çš„é¡ºåºé—­åˆã€‚</p>
<h3 id="ç¤ºä¾‹1"><a href="#ç¤ºä¾‹1" class="headerlink" title="ç¤ºä¾‹1"></a>ç¤ºä¾‹1</h3><figure class="highlight markdown"><table><tbody><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šn = 3</span><br><span class="line">è¾“å‡ºï¼š["((()))","(()())","(())()","()(())","()()()"]</span><br></pre></td></tr></tbody></table></figure>
<span id="more"></span>
<h3 id="ç¤ºä¾‹2"><a href="#ç¤ºä¾‹2" class="headerlink" title="ç¤ºä¾‹2"></a>ç¤ºä¾‹2</h3><figure class="highlight markdown"><table><tbody><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šn = 1</span><br><span class="line">è¾“å‡ºï¼š["()"]</span><br></pre></td></tr></tbody></table></figure>
<h3 id="æç¤ºï¼š"><a href="#æç¤ºï¼š" class="headerlink" title="æç¤ºï¼š"></a>æç¤ºï¼š</h3><ul>
<li><code>1 &lt;= n &lt;= 8</code></li>
</ul>
<p><br></p>
<h3 id="é¢˜è§£1-dfs"><a href="#é¢˜è§£1-dfs" class="headerlink" title="é¢˜è§£1: dfs"></a>é¢˜è§£1: dfs</h3><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>{</span><br><span class="line">    List&lt;String&gt; res = <span class="keyword">new</span> ArrayList();</span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;String&gt; <span class="title">generateParenthesis</span><span class="params">(<span class="keyword">int</span> n)</span> </span>{</span><br><span class="line">        dfs(<span class="keyword">new</span> StringBuilder(), <span class="number">0</span>, n);</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">dfs</span><span class="params">(StringBuilder sb, <span class="keyword">int</span> state, <span class="keyword">int</span> count)</span></span>{</span><br><span class="line">        <span class="keyword">if</span>(count == <span class="number">0</span> &amp;&amp; state == <span class="number">0</span>){</span><br><span class="line">            res.add(sb.toString());</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">if</span>(count &gt; <span class="number">0</span>){</span><br><span class="line">            sb.append(<span class="string">"("</span>);</span><br><span class="line">            dfs(sb, state + <span class="number">1</span>, count - <span class="number">1</span>);</span><br><span class="line">            sb.deleteCharAt(sb.length() - <span class="number">1</span>); </span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">if</span>(state &gt; <span class="number">0</span>){</span><br><span class="line">            sb.append(<span class="string">")"</span>);</span><br><span class="line">            dfs(sb, state - <span class="number">1</span>, count);</span><br><span class="line">            sb.deleteCharAt(sb.length() - <span class="number">1</span>);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>ç”¨æ—¶ï¼š0ms</p>
<p>æ—¶é—´å¤æ‚åº¦ï¼š<em>O</em>($\frac{4^n}{\sqrt{n}}$)</p>
<p>ç©ºé—´å¤æ‚åº¦ï¼šSï¼ˆnï¼‰</p>
<p><br></p>
<h3 id="é¢˜è§£2-åŠ¨æ€è§„åˆ’"><a href="#é¢˜è§£2-åŠ¨æ€è§„åˆ’" class="headerlink" title="é¢˜è§£2: åŠ¨æ€è§„åˆ’"></a>é¢˜è§£2: åŠ¨æ€è§„åˆ’</h3><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>{</span><br><span class="line">    List&lt;String&gt; res = <span class="keyword">new</span> ArrayList();</span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;String&gt; <span class="title">generateParenthesis</span><span class="params">(<span class="keyword">int</span> n)</span> </span>{</span><br><span class="line">        List&lt;List&lt;String&gt;&gt; brackets = <span class="keyword">new</span> ArrayList();</span><br><span class="line">        List&lt;String&gt; zero = <span class="keyword">new</span> ArrayList();</span><br><span class="line">        zero.add(<span class="string">""</span>);</span><br><span class="line">        List&lt;String&gt; one = <span class="keyword">new</span> ArrayList();</span><br><span class="line">        one.add(<span class="string">"()"</span>);</span><br><span class="line">        brackets.add(zero);</span><br><span class="line">        brackets.add(one);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">2</span>;i&lt;=n;i++){</span><br><span class="line">            List&lt;String&gt; tmp = <span class="keyword">new</span> ArrayList();</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;i;j++){</span><br><span class="line">                List&lt;String&gt; list1 = brackets.get(j);</span><br><span class="line">                List&lt;String&gt; list2 = brackets.get(i-<span class="number">1</span>-j);</span><br><span class="line">                <span class="keyword">for</span>(String str1 : list1){</span><br><span class="line">                    <span class="keyword">for</span>(String str2 : list2){</span><br><span class="line">                        tmp.add(<span class="string">"("</span> + str1 + <span class="string">")"</span> + str2);</span><br><span class="line">                    }</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">            brackets.add(tmp);</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> brackets.get(brackets.size() - <span class="number">1</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>åŠ¨æ€è§„åˆ’ååˆ†ç±»ä¼¼äºæ•°å­¦ä¸­çš„å½’çº³æ³•ï¼Œä¹Ÿå°±æ˜¯ç»™å‡ºk = n-1çš„æƒ…å†µï¼Œè¦èƒ½æ±‚å‡ºk = nçš„æƒ…å†µã€‚</p>
<p>è¿™é‡Œæˆ‘ä»¬ä¹Ÿæ€è€ƒä¸€ä¸‹ï¼Œå¦‚æœæˆ‘ä»¬è¦æ±‚k = nçš„æƒ…å†µï¼Œä¹Ÿå°±æ˜¯æ±‚nä¸ªæ‹¬å·ï¼Œä¸ä¹‹å¯¹åº”k = n-1ã€‚è€Œn-1ä¸ªæ‹¬å·æˆ‘ä»¬å¯ä»¥æ‹†æˆä¸¤éƒ¨åˆ†å·¦è¾¹mä¸ªæ‹¬å·ï¼Œå³è¾¹n-1-mä¸ªæ‹¬å·ï¼Œè€Œè¿™ç¬¬nä¸ªæ‹¬å·ï¼Œæ— éå°±æ˜¯æ‰©ä½å·¦è¾¹çš„æ‹¬å·æˆ–å³è¾¹çš„æ‹¬å·æˆ–éƒ½æ‹¬èµ·æ¥ã€‚å› æ­¤å¯ä»¥å†™ä¸€ä¸ªå¾ªç¯ï¼Œå·¦è¾¹æ‹¬å·æ•°ä¸º(0,1,2â€¦n-1)ï¼Œå³è¾¹æ‹¬å·æ•°åˆ™è‡ªç„¶è€Œç„¶å°±ä¸º(n-1,n-2â€¦0)ï¼Œç„¶åæŠŠå·¦è¾¹æ‹¬å·æ‰©ä½ï¼ˆæ­¤å¤„åŒ…å«äº†ä¹‹å‰æåˆ°äº†ä¸‰ç§æƒ…å†µï¼‰ã€‚</p>
<p>ç”¨æ—¶ï¼š9ms</p>
<p>æ—¶é—´å¤æ‚åº¦ï¼šOï¼ˆ$n^2$ï¼‰</p>
<p>ç©ºé—´å¤æ‚åº¦ï¼šSï¼ˆ$n^2$ï¼‰</p>
]]></content>
      <categories>
        <category>LeetCode</category>
      </categories>
      <tags>
        <tag>æ¯æ—¥ä¸€é¢˜</tag>
        <tag>JAVA</tag>
        <tag>LeetCodeTop100</tag>
        <tag>dfs</tag>
      </tags>
  </entry>
  <entry>
    <title>LeetCodeP0031â€”â€”ä¸‹ä¸€ä¸ªæ’åˆ—</title>
    <url>/2021/09/15/LeetCodeP0031%E2%80%94%E2%80%94%E4%B8%8B%E4%B8%80%E4%B8%AA%E6%8E%92%E5%88%97/</url>
    <content><![CDATA[<h2 id="é¢˜ç›®"><a href="#é¢˜ç›®" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h2><p>å®ç°è·å– ä¸‹ä¸€ä¸ªæ’åˆ— çš„å‡½æ•°ï¼Œç®—æ³•éœ€è¦å°†ç»™å®šæ•°å­—åºåˆ—é‡æ–°æ’åˆ—æˆå­—å…¸åºä¸­ä¸‹ä¸€ä¸ªæ›´å¤§çš„æ’åˆ—ï¼ˆå³ï¼Œç»„åˆå‡ºä¸‹ä¸€ä¸ªæ›´å¤§çš„æ•´æ•°ï¼‰ã€‚</p>
<p>å¦‚æœä¸å­˜åœ¨ä¸‹ä¸€ä¸ªæ›´å¤§çš„æ’åˆ—ï¼Œåˆ™å°†æ•°å­—é‡æ–°æ’åˆ—æˆæœ€å°çš„æ’åˆ—ï¼ˆå³å‡åºæ’åˆ—ï¼‰ã€‚</p>
<p>å¿…é¡» åŸåœ° ä¿®æ”¹ï¼Œåªå…è®¸ä½¿ç”¨é¢å¤–å¸¸æ•°ç©ºé—´ã€‚</p>
<h3 id="ç¤ºä¾‹1"><a href="#ç¤ºä¾‹1" class="headerlink" title="ç¤ºä¾‹1"></a>ç¤ºä¾‹1</h3><figure class="highlight markdown"><table><tbody><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šnums = [1,2,3]</span><br><span class="line">è¾“å‡ºï¼š[1,3,2]</span><br></pre></td></tr></tbody></table></figure>
<span id="more"></span>
<h3 id="ç¤ºä¾‹2"><a href="#ç¤ºä¾‹2" class="headerlink" title="ç¤ºä¾‹2"></a>ç¤ºä¾‹2</h3><figure class="highlight markdown"><table><tbody><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šnums = [3,2,1]</span><br><span class="line">è¾“å‡ºï¼š[1,2,3]</span><br></pre></td></tr></tbody></table></figure>
<h3 id="ç¤ºä¾‹3"><a href="#ç¤ºä¾‹3" class="headerlink" title="ç¤ºä¾‹3"></a>ç¤ºä¾‹3</h3><figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šnums = [1,1,5]</span><br><span class="line">è¾“å‡ºï¼š[1,5,1]</span><br></pre></td></tr></tbody></table></figure>
<h3 id="æç¤ºï¼š"><a href="#æç¤ºï¼š" class="headerlink" title="æç¤ºï¼š"></a>æç¤ºï¼š</h3><ul>
<li><code>1 &lt;= nums.length &lt;= 100</code></li>
<li><code>0 &lt;= nums[i] &lt;= 100</code></li>
</ul>
<p><br></p>
<h3 id="é¢˜è§£1-ä¸¤éæ‰«æ"><a href="#é¢˜è§£1-ä¸¤éæ‰«æ" class="headerlink" title="é¢˜è§£1: ä¸¤éæ‰«æ"></a>é¢˜è§£1: ä¸¤éæ‰«æ</h3><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">nextPermutation</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>{</span><br><span class="line">        <span class="keyword">int</span> len = nums.length;</span><br><span class="line">        <span class="keyword">int</span> p = len - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span>(p &gt; <span class="number">0</span> &amp;&amp; nums[p] &lt;= nums[p-<span class="number">1</span>]){</span><br><span class="line">            p--;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(p == <span class="number">0</span>){</span><br><span class="line">            reverse(nums, <span class="number">0</span>, len-<span class="number">1</span>);</span><br><span class="line">        }<span class="keyword">else</span>{</span><br><span class="line">            <span class="keyword">int</span> p2 = len - <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">while</span>(p2 &gt; (p-<span class="number">1</span>) &amp;&amp; nums[p2] &lt;= nums[p-<span class="number">1</span>]){</span><br><span class="line">                p2--;</span><br><span class="line">            }</span><br><span class="line">            swap(nums, p-<span class="number">1</span>, p2);</span><br><span class="line">            reverse(nums, p, len-<span class="number">1</span>);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">swap</span><span class="params">(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> idx1, <span class="keyword">int</span> idx2)</span></span>{</span><br><span class="line">        <span class="keyword">int</span> tmp = nums[idx1];</span><br><span class="line">        nums[idx1] = nums[idx2];</span><br><span class="line">        nums[idx2] = tmp;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">reverse</span><span class="params">(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> left, <span class="keyword">int</span> right)</span></span>{</span><br><span class="line">        <span class="keyword">while</span>(left &lt; right){</span><br><span class="line">            swap(nums, left, right);</span><br><span class="line">            left++;</span><br><span class="line">            right--;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>æ€è·¯å›¾ç¤ºï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œé¢‘ç¹ä½¿ç”¨å¤šéçš„æ­¥éª¤è¦å¦å†™ä¸€ä¸ªæ–¹æ³•ï¼Œæ€è·¯ä¼šç®€æ´å¾ˆå¤šï¼</p>
<p><img src="https://z3.ax1x.com/2021/09/15/4V2jw4.gif" alt=""></p>
<p>ç”¨æ—¶ï¼š0ms</p>
<p>æ—¶é—´å¤æ‚åº¦ï¼šOï¼ˆnï¼‰</p>
<p>ç©ºé—´å¤æ‚åº¦ï¼šSï¼ˆ1ï¼‰</p>
]]></content>
      <categories>
        <category>LeetCode</category>
      </categories>
      <tags>
        <tag>æ¯æ—¥ä¸€é¢˜</tag>
        <tag>JAVA</tag>
        <tag>LeetCodeTop100</tag>
      </tags>
  </entry>
  <entry>
    <title>LeetCodeP0032â€”â€”æœ€é•¿æœ‰æ•ˆæ‹¬å·</title>
    <url>/2021/09/22/LeetCodeP0032%E2%80%94%E2%80%94%E6%9C%80%E9%95%BF%E6%9C%89%E6%95%88%E6%8B%AC%E5%8F%B7/</url>
    <content><![CDATA[<h2 id="é¢˜ç›®"><a href="#é¢˜ç›®" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h2><p>ç»™ä½ ä¸€ä¸ªåªåŒ…å« <code>'('</code> å’Œ <code>')'</code> çš„å­—ç¬¦ä¸²ï¼Œæ‰¾å‡ºæœ€é•¿æœ‰æ•ˆï¼ˆæ ¼å¼æ­£ç¡®ä¸”è¿ç»­ï¼‰æ‹¬å·å­ä¸²çš„é•¿åº¦ã€‚</p>
<h3 id="ç¤ºä¾‹1"><a href="#ç¤ºä¾‹1" class="headerlink" title="ç¤ºä¾‹1"></a>ç¤ºä¾‹1</h3><figure class="highlight markdown"><table><tbody><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šs = "(()"</span><br><span class="line">è¾“å‡ºï¼š2</span><br><span class="line">è§£é‡Šï¼šæœ€é•¿æœ‰æ•ˆæ‹¬å·å­ä¸²æ˜¯ "()"</span><br></pre></td></tr></tbody></table></figure>
<span id="more"></span>
<h3 id="ç¤ºä¾‹2"><a href="#ç¤ºä¾‹2" class="headerlink" title="ç¤ºä¾‹2"></a>ç¤ºä¾‹2</h3><figure class="highlight markdown"><table><tbody><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šs = ")()())"</span><br><span class="line">è¾“å‡ºï¼š4</span><br><span class="line">è§£é‡Šï¼šæœ€é•¿æœ‰æ•ˆæ‹¬å·å­ä¸²æ˜¯ "()()"</span><br></pre></td></tr></tbody></table></figure>
<h3 id="ç¤ºä¾‹3"><a href="#ç¤ºä¾‹3" class="headerlink" title="ç¤ºä¾‹3"></a>ç¤ºä¾‹3</h3><figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šs = ""</span><br><span class="line">è¾“å‡ºï¼š0</span><br></pre></td></tr></tbody></table></figure>
<h3 id="æç¤ºï¼š"><a href="#æç¤ºï¼š" class="headerlink" title="æç¤ºï¼š"></a>æç¤ºï¼š</h3><ul>
<li><code>0 &lt;= s.length &lt;= 3 * 104</code></li>
<li><code>s[i]</code> ä¸º <code>'('</code> æˆ– <code>')'</code></li>
</ul>
<p><br></p>
<h3 id="é¢˜è§£1-åŠ¨æ€è§„åˆ’"><a href="#é¢˜è§£1-åŠ¨æ€è§„åˆ’" class="headerlink" title="é¢˜è§£1: åŠ¨æ€è§„åˆ’"></a>é¢˜è§£1: åŠ¨æ€è§„åˆ’</h3><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">longestValidParentheses</span><span class="params">(String s)</span> </span>{</span><br><span class="line">        <span class="keyword">int</span> len = s.length();</span><br><span class="line">        <span class="keyword">char</span>[] charArray = s.toCharArray();</span><br><span class="line">        <span class="keyword">int</span>[] dp = <span class="keyword">new</span> <span class="keyword">int</span>[len];</span><br><span class="line">        <span class="keyword">int</span> max = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;len;i++){</span><br><span class="line">            <span class="keyword">if</span>(charArray[i] == <span class="string">')'</span>){</span><br><span class="line">                <span class="keyword">if</span>((i-dp[i-<span class="number">1</span>]-<span class="number">1</span>) &gt;= <span class="number">0</span> &amp;&amp; charArray[i-dp[i-<span class="number">1</span>]-<span class="number">1</span>] == <span class="string">'('</span>){</span><br><span class="line">                    <span class="keyword">if</span>(i-dp[i-<span class="number">1</span>]-<span class="number">2</span> &lt; <span class="number">0</span>){</span><br><span class="line">                        dp[i] = dp[i-<span class="number">1</span>] + <span class="number">2</span>;</span><br><span class="line">                    }<span class="keyword">else</span>{</span><br><span class="line">                        dp[i] = dp[i-<span class="number">1</span>] + dp[i-dp[i-<span class="number">1</span>]-<span class="number">2</span>] + <span class="number">2</span>;</span><br><span class="line">                    }</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">            max = Math.max(max, dp[i]);</span><br><span class="line">        }</span><br><span class="line">            <span class="keyword">return</span> max;</span><br><span class="line">        </span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>æ‹¬å·åˆ†ä¸ºä¸¤ä¸ªæƒ…å†µ</p>
<ol>
<li><p>â€œï¼ˆï¼‰â€ï¼Œå³å¦‚æœs[i]æ˜¯â€™)â€™ä¸”s[i - 1]æ˜¯â€™(â€˜ï¼Œé‚£ä¹ˆé•¿åº¦ä¸ºdp[i-2] + 2ï¼›</p>
</li>
<li><p>â€œï¼ˆï¼ˆÂ·Â·Â·ï¼‰ï¼‰â€ï¼Œå³å¦‚æœs[i]æ˜¯â€™)â€™ä¸”s[i - dp[i-1] - 1]æ˜¯â€™(â€˜ï¼Œé‚£ä¹ˆé•¿åº¦ä¸ºdp[i-1] + dp[i - dp[i-1] - 2] + 2</p>
</li>
</ol>
<p>ä»¥ä¸Šä¸¤ç§æƒ…å†µå¯ä»¥åˆå¹¶ï¼Œå¦‚æœs[i - 1]æ—¶å€™â€™(â€˜ï¼Œé‚£ä¹ˆdp[i - 1]ä¹Ÿå°±æ˜¯0ï¼Œç¬¬äºŒç§æƒ…å†µä¹Ÿå°±åŒ…å«äº†ç¬¬ä¸€ç§æƒ…å†µ</p>
<p>ç”¨æ—¶ï¼š1ms</p>
<p>æ—¶é—´å¤æ‚åº¦ï¼šOï¼ˆnï¼‰</p>
<p>ç©ºé—´å¤æ‚åº¦ï¼šSï¼ˆnï¼‰</p>
<p><br></p>
<h3 id="é¢˜è§£2-æ ˆ"><a href="#é¢˜è§£2-æ ˆ" class="headerlink" title="é¢˜è§£2: æ ˆ"></a>é¢˜è§£2: æ ˆ</h3><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">longestValidParentheses</span><span class="params">(String s)</span> </span>{</span><br><span class="line">        <span class="keyword">int</span> len = s.length();</span><br><span class="line">        <span class="keyword">char</span>[] charArray = s.toCharArray();</span><br><span class="line">        Stack&lt;Integer&gt; stack = <span class="keyword">new</span> Stack&lt;&gt;();</span><br><span class="line">        <span class="keyword">int</span> max = <span class="number">0</span>;</span><br><span class="line">        stack.push(-<span class="number">1</span>);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;len;i++){</span><br><span class="line">            <span class="keyword">if</span>(charArray[i] == <span class="string">'('</span>){</span><br><span class="line">                stack.push(i);</span><br><span class="line">            }<span class="keyword">else</span>{</span><br><span class="line">                stack.pop();</span><br><span class="line">                <span class="keyword">if</span>(stack.isEmpty()){</span><br><span class="line">                    stack.push(i);</span><br><span class="line">                }<span class="keyword">else</span>{</span><br><span class="line">                    max = Math.max(max, i - stack.peek());</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> max;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>å°†â€™(â€˜çš„ä¸‹æ ‡æ”¾å…¥æ ˆä¸­ï¼Œå½“éå†åˆ°â€™)â€™æ—¶ï¼Œæˆ‘ä»¬å¼¹å‡ºæ ˆé¡¶å…ƒç´ è¡¨ç¤ºåŒ¹é…äº†å½“å‰å³æ‹¬å·ï¼Œç„¶åä»¥â€™)â€™çš„ä¸‹æ ‡å‡å»å½“å‰æ ˆé¡¶å…ƒç´ å°±æ˜¯è¯¥æœ‰æ•ˆæ‹¬å·çš„é•¿åº¦ã€‚</p>
<p>å¼€å§‹æˆ‘ä»¬åœ¨æ ˆä¸­æ”¾å…¥-1ä»¥è§£å†³è¾¹ç•Œæƒ…å†µï¼Œå½“æœ‰â€™)â€™åŒ¹é…åˆ°äº†æ ˆåº•æ—¶ï¼Œåˆ™è¡¨ç¤ºåŒ¹é…å¤±è´¥ï¼Œå°†æ ˆåº•å…ƒç´ æ”¹ä¸ºè¯¥â€™)â€™çš„ä¸‹æ ‡ï¼Œè¡¨ç¤ºåé¢æ‹¬å·ä»æ­¤å¤„å¼€å§‹åŒ¹é…ã€‚</p>
<p>ç”¨æ—¶ï¼š2ms</p>
<p>æ—¶é—´å¤æ‚åº¦ï¼šOï¼ˆnï¼‰</p>
<p>ç©ºé—´å¤æ‚åº¦ï¼šSï¼ˆnï¼‰</p>
<p><br></p>
<h3 id="é¢˜è§£3-è´ªå¿ƒç®—æ³•"><a href="#é¢˜è§£3-è´ªå¿ƒç®—æ³•" class="headerlink" title="é¢˜è§£3: è´ªå¿ƒç®—æ³•"></a>é¢˜è§£3: è´ªå¿ƒç®—æ³•</h3><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">longestValidParentheses</span><span class="params">(String s)</span> </span>{</span><br><span class="line">        <span class="keyword">int</span> len = s.length();</span><br><span class="line">        <span class="keyword">char</span>[] charArray = s.toCharArray();</span><br><span class="line">        <span class="keyword">int</span> max = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> state = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> start=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;len;i++){</span><br><span class="line">            state += getState(charArray[i]);</span><br><span class="line">            <span class="keyword">if</span>(state &lt; <span class="number">0</span>){</span><br><span class="line">                start = i+<span class="number">1</span>;</span><br><span class="line">                state = <span class="number">0</span>;</span><br><span class="line">            }<span class="keyword">else</span> <span class="keyword">if</span>(state == <span class="number">0</span>){</span><br><span class="line">                max = Math.max(i-start+<span class="number">1</span>, max);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        start = len-<span class="number">1</span>;</span><br><span class="line">        state = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=len-<span class="number">1</span>;i&gt;=<span class="number">0</span>;i--){</span><br><span class="line">            state += getStateReversed(charArray[i]);</span><br><span class="line">            <span class="keyword">if</span>(state &lt; <span class="number">0</span>){</span><br><span class="line">                start = i-<span class="number">1</span>;</span><br><span class="line">                state = <span class="number">0</span>;</span><br><span class="line">            }<span class="keyword">else</span> <span class="keyword">if</span>(state == <span class="number">0</span>){</span><br><span class="line">                max = Math.max(start-i+<span class="number">1</span>, max);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> max;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getState</span><span class="params">(<span class="keyword">char</span> c)</span></span>{</span><br><span class="line">        <span class="keyword">if</span>(c == <span class="string">')'</span>){</span><br><span class="line">            <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">        }<span class="keyword">else</span>{</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getStateReversed</span><span class="params">(<span class="keyword">char</span> c)</span></span>{</span><br><span class="line">        <span class="keyword">if</span>(c == <span class="string">')'</span>){</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        }<span class="keyword">else</span>{</span><br><span class="line">            <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>å‡å®šâ€™(â€˜è¡¨ç¤º1ï¼Œâ€™)â€™è¡¨ç¤º-1ï¼Œç”¨stateæ¥è®¡ç®—å½“å‰åŒ¹é…æƒ…å†µã€‚</p>
<p>state = 0ï¼ŒåŒ¹é…æˆåŠŸï¼›</p>
<p>state &lt; 0ï¼ŒåŒ¹é…å¤±è´¥ï¼›</p>
<p>ä½†è¿™ç§éå†æ–¹å¼æœ‰ä¸ªè‡´å‘½çš„é—®é¢˜ï¼Œä¾‹â€œ(()â€ï¼Œéå†å®Œæˆåstate = 1ï¼Œæ²¡æœ‰åŒ¹é…åˆ°æœ‰æ•ˆæ‹¬å·ã€‚</p>
<p>å› æ­¤æˆ‘ä»¬è¿˜éœ€åç€éå†ä¸€éä»¥è§£å†³è¿™ç§é—®é¢˜ã€‚</p>
<p>ç”¨æ—¶ï¼š1ms</p>
<p>æ—¶é—´å¤æ‚åº¦ï¼šOï¼ˆnï¼‰</p>
<p>ç©ºé—´å¤æ‚åº¦ï¼šSï¼ˆ1ï¼‰</p>
]]></content>
      <categories>
        <category>LeetCode</category>
      </categories>
      <tags>
        <tag>æ¯æ—¥ä¸€é¢˜</tag>
        <tag>JAVA</tag>
        <tag>LeetCodeTop100</tag>
        <tag>åŠ¨æ€è§„åˆ’</tag>
        <tag>è´ªå¿ƒç®—æ³•</tag>
      </tags>
  </entry>
  <entry>
    <title>LeetCodeP0042â€”â€”æ¥é›¨æ°´</title>
    <url>/2021/09/24/LeetCodeP0042%E2%80%94%E2%80%94%E6%8E%A5%E9%9B%A8%E6%B0%B4/</url>
    <content><![CDATA[<h2 id="é¢˜ç›®"><a href="#é¢˜ç›®" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h2><p>ç»™å®š <em>n</em> ä¸ªéè´Ÿæ•´æ•°è¡¨ç¤ºæ¯ä¸ªå®½åº¦ä¸º 1 çš„æŸ±å­çš„é«˜åº¦å›¾ï¼Œè®¡ç®—æŒ‰æ­¤æ’åˆ—çš„æŸ±å­ï¼Œä¸‹é›¨ä¹‹åèƒ½æ¥å¤šå°‘é›¨æ°´ã€‚</p>
<h3 id="ç¤ºä¾‹1"><a href="#ç¤ºä¾‹1" class="headerlink" title="ç¤ºä¾‹1"></a>ç¤ºä¾‹1</h3><p><img src="https://z3.ax1x.com/2021/09/24/4DZ8TU.png" alt=""></p>
<figure class="highlight markdown"><table><tbody><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šheight = [0,1,0,2,1,0,1,3,2,1,2,1]</span><br><span class="line">è¾“å‡ºï¼š6</span><br><span class="line">è§£é‡Šï¼šä¸Šé¢æ˜¯ç”±æ•°ç»„ [0,1,0,2,1,0,1,3,2,1,2,1] è¡¨ç¤ºçš„é«˜åº¦å›¾ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¯ä»¥æ¥ 6 ä¸ªå•ä½çš„é›¨æ°´ï¼ˆè“è‰²éƒ¨åˆ†è¡¨ç¤ºé›¨æ°´ï¼‰ã€‚</span><br></pre></td></tr></tbody></table></figure>
<span id="more"></span>
<h3 id="ç¤ºä¾‹2"><a href="#ç¤ºä¾‹2" class="headerlink" title="ç¤ºä¾‹2"></a>ç¤ºä¾‹2</h3><figure class="highlight markdown"><table><tbody><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šheight = [4,2,0,3,2,5]</span><br><span class="line">è¾“å‡ºï¼š9</span><br></pre></td></tr></tbody></table></figure>
<h3 id="æç¤ºï¼š"><a href="#æç¤ºï¼š" class="headerlink" title="æç¤ºï¼š"></a>æç¤ºï¼š</h3><ul>
<li><code>n == height.length</code></li>
<li><code>0 &lt;= n &lt;= 3 * 104</code></li>
<li><code>0 &lt;= height[i] &lt;= 105</code></li>
</ul>
<p><br></p>
<h3 id="é¢˜è§£1-åŠ¨æ€è§„åˆ’"><a href="#é¢˜è§£1-åŠ¨æ€è§„åˆ’" class="headerlink" title="é¢˜è§£1: åŠ¨æ€è§„åˆ’"></a>é¢˜è§£1: åŠ¨æ€è§„åˆ’</h3><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">trap</span><span class="params">(<span class="keyword">int</span>[] height)</span> </span>{</span><br><span class="line">        <span class="keyword">int</span> len = height.length;</span><br><span class="line">        <span class="keyword">int</span> left = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> right = len - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">int</span> volume = <span class="number">0</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">int</span>[] leftMax = <span class="keyword">new</span> <span class="keyword">int</span>[len];</span><br><span class="line">        leftMax[<span class="number">0</span>] = height[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;len;i++){</span><br><span class="line">            leftMax[i] = Math.max(leftMax[i-<span class="number">1</span>], height[i]);</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span>[] rightMax = <span class="keyword">new</span> <span class="keyword">int</span>[len];</span><br><span class="line">        rightMax[len-<span class="number">1</span>] = height[len-<span class="number">1</span>];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=len-<span class="number">2</span>;i&gt;=<span class="number">0</span>;i--){</span><br><span class="line">            rightMax[i] = Math.max(rightMax[i+<span class="number">1</span>], height[i]);</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;len;i++){</span><br><span class="line">            volume += Math.min(leftMax[i], rightMax[i]) - height[i];</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> volume;</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>
<p>æ±‚å‡ºåœ¨è¿™ä¸ªç‚¹ä»å·¦è¾¹å’Œå³è¾¹éå†çš„æœ€é«˜å€¼ï¼Œå–ä»–ä»¬ä¹‹é—´çš„è¾ƒå°å€¼ï¼Œå³ä¸¤ä¸ªç«¯ç‚¹çš„è¾ƒå°å€¼ï¼Œå‡å»è¯¥ç‚¹çš„é«˜åº¦å°±æ˜¯è¿™ä¸ªç‚¹å¯ä»¥å‚¨æ°´çš„é‡äº†ã€‚</p>
<p><img src="https://z3.ax1x.com/2021/09/24/4DZBm6.png" alt=""></p>
<p>ç”¨æ—¶ï¼š1ms</p>
<p>æ—¶é—´å¤æ‚åº¦ï¼šOï¼ˆnï¼‰</p>
<p>ç©ºé—´å¤æ‚åº¦ï¼šSï¼ˆnï¼‰</p>
<p><br></p>
<h3 id="é¢˜è§£2-åŒæŒ‡é’ˆ"><a href="#é¢˜è§£2-åŒæŒ‡é’ˆ" class="headerlink" title="é¢˜è§£2: åŒæŒ‡é’ˆ"></a>é¢˜è§£2: åŒæŒ‡é’ˆ</h3><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">trap</span><span class="params">(<span class="keyword">int</span>[] height)</span> </span>{</span><br><span class="line">        <span class="keyword">int</span> len = height.length;</span><br><span class="line">        <span class="keyword">int</span> left = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> right = len - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">int</span> volume = <span class="number">0</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">int</span> maxLeft = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> maxRight = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(left &lt; right){</span><br><span class="line">            maxLeft = Math.max(height[left], maxLeft);</span><br><span class="line">            maxRight = Math.max(height[right], maxRight);</span><br><span class="line">            <span class="keyword">if</span>(height[left] &lt; height[right]){</span><br><span class="line">                volume += maxLeft - height[left];</span><br><span class="line">                left++;</span><br><span class="line">            }<span class="keyword">else</span>{</span><br><span class="line">                volume += maxRight - height[right];</span><br><span class="line">                right--;</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> volume;</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>
<p>ä¸åŠ¨æ€è§„åˆ’ç±»ä¼¼ï¼Œä½†é‡‡ç”¨åŒæŒ‡é’ˆå¯ä»¥çœå»dpæ•°ç»„ã€‚</p>
<p>åªç§»åŠ¨çŸ­çš„é‚£ä¸€å¤´ï¼Œå› ä¸ºçŸ­çš„é‚£ä¸€å¤´å·¦å³éƒ½å·²ç»æœ‰äº†è¾¹ç•Œï¼Œå¯ä»¥ç›´æ¥è®¡ç®—å‡ºå‚¨æ°´é‡ã€‚</p>
<p>ç”¨æ—¶ï¼š0ms</p>
<p>æ—¶é—´å¤æ‚åº¦ï¼šOï¼ˆnï¼‰</p>
<p>ç©ºé—´å¤æ‚åº¦ï¼šSï¼ˆ1ï¼‰</p>
]]></content>
      <categories>
        <category>LeetCode</category>
      </categories>
      <tags>
        <tag>æ¯æ—¥ä¸€é¢˜</tag>
        <tag>JAVA</tag>
        <tag>LeetCodeTop100</tag>
        <tag>åŠ¨æ€è§„åˆ’</tag>
        <tag>åŒæŒ‡é’ˆ</tag>
      </tags>
  </entry>
  <entry>
    <title>Markdownå…¥é—¨</title>
    <url>/2021/08/20/MarkDown%E5%85%A5%E9%97%A8/</url>
    <content><![CDATA[<h1 id="MarkDownå…¥é—¨"><a href="#MarkDownå…¥é—¨" class="headerlink" title="MarkDownå…¥é—¨"></a>MarkDownå…¥é—¨</h1><h2 id="1-ä»£ç å—"><a href="#1-ä»£ç å—" class="headerlink" title="1. ä»£ç å—"></a>1. ä»£ç å—</h2><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">```python</span><br><span class="line">    </span><br><span class="line">`è¡Œå†…ä»£ç å—`</span><br></pre></td></tr></tbody></table></figure>
<p><strong>pythonä»£ç </strong></p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="built_in">sum</span> = <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">100</span>):</span><br><span class="line">    <span class="built_in">sum</span> += i</span><br><span class="line">    </span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">sum</span>)</span><br></pre></td></tr></tbody></table></figure>
<p><code>è¡Œå†…ä»£ç å—</code></p>
<h2 id="2-æ ‡é¢˜"><a href="#2-æ ‡é¢˜" class="headerlink" title="2. æ ‡é¢˜"></a>2. æ ‡é¢˜</h2><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># ä¸€çº§æ ‡é¢˜</span></span><br><span class="line"><span class="comment">## äºŒçº§æ ‡é¢˜</span></span><br><span class="line"><span class="comment">### ä¸‰çº§æ ‡é¢˜</span></span><br><span class="line"><span class="comment">#### å››çº§æ ‡é¢˜</span></span><br><span class="line"><span class="comment">##### äº”çº§æ ‡é¢˜</span></span><br><span class="line"><span class="comment">###### å…­çº§æ ‡é¢˜</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æœ€å¤šæ”¯æŒå…­çº§æ ‡é¢˜</span></span><br></pre></td></tr></tbody></table></figure>
<h1 id="ä¸€çº§æ ‡é¢˜"><a href="#ä¸€çº§æ ‡é¢˜" class="headerlink" title="ä¸€çº§æ ‡é¢˜"></a>ä¸€çº§æ ‡é¢˜</h1><h2 id="äºŒçº§æ ‡é¢˜"><a href="#äºŒçº§æ ‡é¢˜" class="headerlink" title="äºŒçº§æ ‡é¢˜"></a>äºŒçº§æ ‡é¢˜</h2><h3 id="ä¸‰çº§æ ‡é¢˜"><a href="#ä¸‰çº§æ ‡é¢˜" class="headerlink" title="ä¸‰çº§æ ‡é¢˜"></a>ä¸‰çº§æ ‡é¢˜</h3><h4 id="å››çº§æ ‡é¢˜"><a href="#å››çº§æ ‡é¢˜" class="headerlink" title="å››çº§æ ‡é¢˜"></a>å››çº§æ ‡é¢˜</h4><h5 id="äº”çº§æ ‡é¢˜"><a href="#äº”çº§æ ‡é¢˜" class="headerlink" title="äº”çº§æ ‡é¢˜"></a>äº”çº§æ ‡é¢˜</h5><h6 id="å…­çº§æ ‡é¢˜"><a href="#å…­çº§æ ‡é¢˜" class="headerlink" title="å…­çº§æ ‡é¢˜"></a>å…­çº§æ ‡é¢˜</h6><span id="more"></span>
<h2 id="3-å­—ä½“"><a href="#3-å­—ä½“" class="headerlink" title="3. å­—ä½“"></a>3. å­—ä½“</h2><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">~~åˆ é™¤~~					<span class="comment"># åˆ é™¤çº¿</span></span><br><span class="line">**åŠ ç²—**					<span class="comment"># åŠ ç²—</span></span><br><span class="line">*æ–œä½“*					<span class="comment"># æ–œä½“</span></span><br><span class="line">***åŠ ç²—+æ–œä½“***					<span class="comment"># ç²—æ–œä½“</span></span><br><span class="line">&lt;code&gt;é«˜äº®&lt;/code&gt;					<span class="comment"># é«˜äº®</span></span><br><span class="line">`$H_2O_2$`					<span class="comment"># ä¸‹æ ‡</span></span><br><span class="line">`$X^{a^<span class="number">2</span>}$`					<span class="comment"># å¹³æ–¹</span></span><br><span class="line">&lt;u&gt;ä¸‹åˆ’çº¿&lt;/u&gt;					<span class="comment"># ä¸‹åˆ’çº¿</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ–œä½“ã€åŠ ç²—ä¸­*å’Œ_æ•ˆæœç›¸åŒ</span></span><br><span class="line"><span class="comment"># HTMLè¯­æ³•å¯ä»¥åœ¨Markdownä¸­ä½¿ç”¨</span></span><br></pre></td></tr></tbody></table></figure>
<p><del>åˆ é™¤</del>            </p>
<p><strong>åŠ ç²—</strong>            </p>
<p><em>æ–œä½“</em>            </p>
<p><strong><em>åŠ ç²—+æ–œä½“</em></strong>  </p>
<p><code>é«˜äº®</code></p>
<script type="math/tex; mode=display">H_2O_2</script><script type="math/tex; mode=display">X^{a^2}</script><p><u>ä¸‹åˆ’çº¿</u>        </p>
<h2 id="4-è¡¨æƒ…ç¬¦å·"><a href="#4-è¡¨æƒ…ç¬¦å·" class="headerlink" title="4.è¡¨æƒ…ç¬¦å·"></a>4.è¡¨æƒ…ç¬¦å·</h2><figure class="highlight py"><table><tbody><tr><td class="code"><pre><span class="line">:smile_cat: :smile: :laughing: :dizzy_face: :sob: :weary:</span><br></pre></td></tr></tbody></table></figure>
<p><span class="github-emoji" style="display:inline;vertical-align:middle"><span>ğŸ˜¸</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f638.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span><span class="github-emoji" style="display:inline;vertical-align:middle"><span>ğŸ˜„</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f604.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span> <span class="github-emoji" style="display:inline;vertical-align:middle"><span>ğŸ˜†</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f606.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span> <span class="github-emoji" style="display:inline;vertical-align:middle"><span>ğŸ˜µ</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f635.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span> <span class="github-emoji" style="display:inline;vertical-align:middle"><span>ğŸ˜­</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f62d.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span> <span class="github-emoji" style="display:inline;vertical-align:middle"><span>ğŸ˜©</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f629.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></p>
<h2 id="5-è¡¨æ ¼"><a href="#5-è¡¨æ ¼" class="headerlink" title="5.è¡¨æ ¼"></a>5.è¡¨æ ¼</h2><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">name | price</span><br><span class="line">:---  | ---:			<span class="comment"># :åœ¨å·¦è¾¹è¡¨ç¤ºè¯¥åˆ—å·¦å¯¹é½ï¼›åœ¨å³è¾¹è¡¨ç¤ºå³å¯¹é½ï¼›å·¦å³éƒ½æœ‰å±…ä¸­å¯¹é½</span></span><br><span class="line">fried chicken | <span class="number">19</span></span><br><span class="line">cola | <span class="number">5</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è¡¨æ ¼è¯­æ³•è¾ƒä¸ºç¹çï¼Œå»ºè®®å³é”®æ’å…¥è¡¨æ ¼</span></span><br></pre></td></tr></tbody></table></figure>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">name</th>
<th style="text-align:right">price</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">fried chicken</td>
<td style="text-align:right">19</td>
</tr>
<tr>
<td style="text-align:left">cola</td>
<td style="text-align:right">5</td>
</tr>
</tbody>
</table>
</div>
<h2 id="6-å¼•ç”¨"><a href="#6-å¼•ç”¨" class="headerlink" title="6.å¼•ç”¨"></a>6.å¼•ç”¨</h2><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">&gt; ä¸€çº§å¼•ç”¨</span><br><span class="line">&gt;&gt; äºŒçº§å¼•ç”¨</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>ä¸‰çº§å¼•ç”¨</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä»¥æ­¤ç±»æ¨</span></span><br></pre></td></tr></tbody></table></figure>
<blockquote>
<p>ä¸€çº§å¼•ç”¨</p>
<blockquote>
<p>äºŒçº§å¼•ç”¨</p>
<blockquote>
<p>ä¸‰çº§å¼•ç”¨</p>
</blockquote>
</blockquote>
</blockquote>
<h2 id="7-åˆ—è¡¨"><a href="#7-åˆ—è¡¨" class="headerlink" title="7.åˆ—è¡¨"></a>7.åˆ—è¡¨</h2><h4 id="7-1æ— åºåˆ—è¡¨"><a href="#7-1æ— åºåˆ—è¡¨" class="headerlink" title="7.1æ— åºåˆ—è¡¨"></a>7.1æ— åºåˆ—è¡¨</h4><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">* æ— åºåˆ—è¡¨<span class="number">1</span></span><br><span class="line">+ æ— åºåˆ—è¡¨<span class="number">2</span></span><br><span class="line">- æ— åºåˆ—è¡¨<span class="number">3</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä»¥ä¸Šä¸‰ç§æ–¹å¼å‡å¯</span></span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>æ— åºåˆ—è¡¨1</li>
</ul>
<ul>
<li>æ— åºåˆ—è¡¨2</li>
</ul>
<ul>
<li>æ— åºåˆ—è¡¨3</li>
</ul>
<h4 id="7-2æœ‰åºåˆ—è¡¨"><a href="#7-2æœ‰åºåˆ—è¡¨" class="headerlink" title="7.2æœ‰åºåˆ—è¡¨"></a>7.2æœ‰åºåˆ—è¡¨</h4><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="number">1.</span> æœ‰åºåˆ—è¡¨<span class="number">1</span></span><br><span class="line"><span class="number">2.</span> æœ‰åºåˆ—è¡¨<span class="number">2</span></span><br><span class="line"><span class="number">3.</span> æœ‰åºåˆ—è¡¨<span class="number">3</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯ä»¥ä½¿ç”¨ æ•°å­—\.æ¥å–æ¶ˆæ˜¾ç¤ºåˆ—è¡¨ï¼ˆç”¨åæ–œæ è¿›è¡Œè½¬ä¹‰ï¼‰</span></span><br></pre></td></tr></tbody></table></figure>
<ol>
<li>æœ‰åºåˆ—è¡¨1</li>
<li>æœ‰åºåˆ—è¡¨2</li>
<li>æœ‰åºåˆ—è¡¨3</li>
</ol>
<h2 id="8-åˆ†å‰²çº¿"><a href="#8-åˆ†å‰²çº¿" class="headerlink" title="8.åˆ†å‰²çº¿"></a>8.åˆ†å‰²çº¿</h2><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">***</span><br><span class="line"></span><br><span class="line"><span class="comment"># åœ¨ä¸€è¡Œä¸­ä½¿ç”¨ä¸‰ä¸ªåŠä»¥ä¸Šçš„*å³å¯</span></span><br></pre></td></tr></tbody></table></figure>
<hr>
<h2 id="9-è·³è½¬"><a href="#9-è·³è½¬" class="headerlink" title="9.è·³è½¬"></a>9.è·³è½¬</h2><h4 id="9-1å¤–éƒ¨è·³è½¬"><a href="#9-1å¤–éƒ¨è·³è½¬" class="headerlink" title="9.1å¤–éƒ¨è·³è½¬"></a>9.1å¤–éƒ¨è·³è½¬</h4><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">[ç´«æ¢¦æ²é¦™çš„åšå®¢](https://ç´«æ¢¦æ²é¦™.com)</span><br></pre></td></tr></tbody></table></figure>
<p><a href="https://ç´«æ¢¦æ²é¦™.com">ç´«æ¢¦æ²é¦™çš„åšå®¢</a></p>
<h4 id="9-2å†…éƒ¨è·³è½¬"><a href="#9-2å†…éƒ¨è·³è½¬" class="headerlink" title="9.2å†…éƒ¨è·³è½¬"></a>9.2å†…éƒ¨è·³è½¬</h4><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">[è·³è½¬è‡³<span class="number">1.</span>ä»£ç å—](<span class="comment">#1-ä»£ç å—)</span></span><br><span class="line">    </span><br><span class="line">[è·³è½¬è‡³Connor](<span class="comment">#Connor)</span></span><br><span class="line">    </span><br><span class="line"><span class="comment"># ç©ºæ ¼ç”¨-ä»£æ›¿ï¼Œç‰¹æ®Šå­—ç¬¦ç›´æ¥åˆ æ‰</span></span><br><span class="line"><span class="comment"># ä¹Ÿå¯ä»¥ä½¿ç”¨HTMLæ ‡ç­¾ä¸­çš„idæ¥è¿›è¡Œè·³è½¬</span></span><br></pre></td></tr></tbody></table></figure>
<p><a href="#1-ä»£ç å—">è·³è½¬è‡³1.ä»£ç å—</a></p>
<p><a href="#Connor">è·³è½¬è‡³åº·å¨œé…±</a></p>
<h4 id="9-3è‡ªåŠ¨é“¾æ¥"><a href="#9-3è‡ªåŠ¨é“¾æ¥" class="headerlink" title="9.3è‡ªåŠ¨é“¾æ¥"></a>9.3è‡ªåŠ¨é“¾æ¥</h4><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">&lt;https://ç´«æ¢¦æ²é¦™.com&gt;</span><br><span class="line">&lt;https://www.baidu.com&gt;</span><br><span class="line">    </span><br><span class="line"><span class="comment"># åè®®ä¹Ÿå†™å…¨ï¼Œä¸ç„¶ä¼šæœ‰bug</span></span><br></pre></td></tr></tbody></table></figure>
<p><a href="https://ç´«æ¢¦æ²é¦™.com">https://ç´«æ¢¦æ²é¦™.com</a><br><a href="https://www.baidu.com">https://www.baidu.com</a></p>
<h2 id="10-å›¾ç‰‡"><a href="#10-å›¾ç‰‡" class="headerlink" title="10.å›¾ç‰‡"></a>10.å›¾ç‰‡</h2><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">![åº·å¨œé…±](Connor.jpg)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç›¸å¯¹è·¯å¾„åœ¨source/_posts/åŒåæ–‡ä»¶å¤¹</span></span><br></pre></td></tr></tbody></table></figure>
<p><img src="https://z3.ax1x.com/2021/08/29/hG1BLV.jpg" alt="åº·å¨œé…±"></p>
<h2 id="11-å†…ç½®æ ‡ç­¾"><a href="#11-å†…ç½®æ ‡ç­¾" class="headerlink" title="11.å†…ç½®æ ‡ç­¾"></a>11.å†…ç½®æ ‡ç­¾</h2><h4 id="11-1æ–‡æœ¬å±…ä¸­"><a href="#11-1æ–‡æœ¬å±…ä¸­" class="headerlink" title="11.1æ–‡æœ¬å±…ä¸­"></a>11.1æ–‡æœ¬å±…ä¸­</h4><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># HTMLï¼Œå…¶ä¸­class="blockquote-center"æ˜¯å¿…è¦çš„</span></span><br><span class="line">&lt;blockquote <span class="class"><span class="keyword">class</span>="<span class="title">blockquote</span>-<span class="title">center</span>"&gt;<span class="title">HTML</span>å±…ä¸­&lt;/<span class="title">blockquote</span>&gt;</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"># æ ‡ç­¾</span></span><br><span class="line"><span class="class">{% <span class="title">centerquote</span> %}æ ‡ç­¾å±…ä¸­{% <span class="title">endcenterquote</span> %}</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"># æ ‡ç­¾åˆ«å</span></span><br><span class="line"><span class="class">{% <span class="title">cq</span> %}æ ‡ç­¾åˆ«åå±…ä¸­{% <span class="title">endcq</span> %}</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"># æ­¤æ ‡ç­¾å°†ç”Ÿæˆä¸€ä¸ªå¸¦ä¸Šä¸‹åˆ†å‰²çº¿çš„å¼•ç”¨ï¼ŒåŒæ—¶å¼•ç”¨å†…æ–‡æœ¬å°†è‡ªåŠ¨å±…ä¸­</span></span><br><span class="line"><span class="class"># æ–‡æœ¬å±…ä¸­æ—¶ï¼Œå¤šè¡Œæ–‡æœ¬è‹¥é•¿åº¦ä¸ç­‰ï¼Œè§†è§‰ä¸Šä¼šæ˜¾å¾—ä¸å¯¹ç§°ï¼Œå› æ­¤å»ºè®®åœ¨å¼•ç”¨å•è¡Œæ–‡æœ¬çš„åœºæ™¯ä¸‹ä½¿ç”¨</span></span><br></pre></td></tr></tbody></table></figure>
<blockquote class="blockquote-center">HTMLå±…ä¸­</blockquote>

<blockquote class="blockquote-center">
            <i class="fa fa-quote-left"></i>
            <p>æ ‡ç­¾å±…ä¸­</p>

            <i class="fa fa-quote-right"></i>
          </blockquote>
<blockquote class="blockquote-center">
            <i class="fa fa-quote-left"></i>
            <p>æ ‡ç­¾åˆ«åå±…ä¸­</p>

            <i class="fa fa-quote-right"></i>
          </blockquote>
<h4 id="11-2å›¾ç‰‡è¶Šç•Œ"><a href="#11-2å›¾ç‰‡è¶Šç•Œ" class="headerlink" title="11.2å›¾ç‰‡è¶Šç•Œ"></a>11.2å›¾ç‰‡è¶Šç•Œ</h4><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># HTMLï¼Œå…¶ä¸­class="full-image"æ˜¯å¿…è¦çš„</span></span><br><span class="line">&lt;img src=<span class="string">"Connor.jpg"</span> <span class="class"><span class="keyword">class</span>="<span class="title">full</span>-<span class="title">image</span>" /&gt;</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"># æ ‡ç­¾çš„æ–¹å¼å¤±æ•ˆäº†ï¼Œå¯èƒ½æ¢äº†å…¶å®ƒçš„æ ‡ç­¾å</span></span><br><span class="line"><span class="class"># çœ‹èµ·æ¥æ²¡å•¥æ•ˆæœ</span></span><br></pre></td></tr></tbody></table></figure>
<p><img src="https://z3.ax1x.com/2021/08/29/hG1BLV.jpg" class="full-image" id="Connor"></p>
<h3 id="11-3Bootstrap-Callout"><a href="#11-3Bootstrap-Callout" class="headerlink" title="11.3Bootstrap Callout"></a>11.3Bootstrap Callout</h3><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">{% note class_name %} Content (md partial supported) {% endnote %}</span><br><span class="line"></span><br><span class="line"><span class="comment"># å…¶ä¸­class_nameå¯ä»¥æ˜¯ä»¥ä¸‹å€¼</span></span><br><span class="line"><span class="comment"># danger primary success info warning default</span></span><br></pre></td></tr></tbody></table></figure>
<div class="note danger">
            <p>Itâ€™s danger </p>
          </div>
<div class="note primary">
            <p>Itâ€™s primary </p>
          </div>
<div class="note success">
            <p>Itâ€™s success </p>
          </div>
<div class="note info">
            <p>Itâ€™s info </p>
          </div>
<div class="note warning">
            <p>Itâ€™s warning </p>
          </div>
<div class="note default">
            <p>Itâ€™s default </p>
          </div>
]]></content>
      <categories>
        <category>Markdown</category>
      </categories>
      <tags>
        <tag>å…¥é—¨</tag>
      </tags>
  </entry>
  <entry>
    <title>LeetCodeP0033â€”â€”æœç´¢æ—‹è½¬æ’åºæ•°ç»„</title>
    <url>/2021/09/22/LeetCodeP0033%E2%80%94%E2%80%94%E6%90%9C%E7%B4%A2%E6%97%8B%E8%BD%AC%E6%8E%92%E5%BA%8F%E6%95%B0%E7%BB%84/</url>
    <content><![CDATA[<h2 id="é¢˜ç›®"><a href="#é¢˜ç›®" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h2><p>æ•´æ•°æ•°ç»„ <code>nums</code> æŒ‰å‡åºæ’åˆ—ï¼Œæ•°ç»„ä¸­çš„å€¼ <strong>äº’ä¸ç›¸åŒ</strong> ã€‚</p>
<p>åœ¨ä¼ é€’ç»™å‡½æ•°ä¹‹å‰ï¼Œ<code>nums</code> åœ¨é¢„å…ˆæœªçŸ¥çš„æŸä¸ªä¸‹æ ‡ <code>k</code>ï¼ˆ<code>0 &lt;= k &lt; nums.length</code>ï¼‰ä¸Šè¿›è¡Œäº† <strong>æ—‹è½¬</strong>ï¼Œä½¿æ•°ç»„å˜ä¸º <code>[nums[k], nums[k+1], ..., nums[n-1], nums[0], nums[1], ..., nums[k-1]]</code>ï¼ˆä¸‹æ ‡ <strong>ä» 0 å¼€å§‹</strong> è®¡æ•°ï¼‰ã€‚ä¾‹å¦‚ï¼Œ <code>[0,1,2,4,5,6,7]</code> åœ¨ä¸‹æ ‡ <code>3</code> å¤„ç»æ—‹è½¬åå¯èƒ½å˜ä¸º <code>[4,5,6,7,0,1,2]</code> ã€‚</p>
<p>ç»™ä½  <strong>æ—‹è½¬å</strong> çš„æ•°ç»„ <code>nums</code> å’Œä¸€ä¸ªæ•´æ•° <code>target</code> ï¼Œå¦‚æœ <code>nums</code> ä¸­å­˜åœ¨è¿™ä¸ªç›®æ ‡å€¼ <code>target</code> ï¼Œåˆ™è¿”å›å®ƒçš„ä¸‹æ ‡ï¼Œå¦åˆ™è¿”å› <code>-1</code> ã€‚</p>
<h3 id="ç¤ºä¾‹1"><a href="#ç¤ºä¾‹1" class="headerlink" title="ç¤ºä¾‹1"></a>ç¤ºä¾‹1</h3><figure class="highlight markdown"><table><tbody><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šnums = [4,5,6,7,0,1,2], target = 0</span><br><span class="line">è¾“å‡ºï¼š4</span><br></pre></td></tr></tbody></table></figure>
<span id="more"></span>
<h3 id="ç¤ºä¾‹2"><a href="#ç¤ºä¾‹2" class="headerlink" title="ç¤ºä¾‹2"></a>ç¤ºä¾‹2</h3><figure class="highlight markdown"><table><tbody><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šnums = [4,5,6,7,0,1,2], target = 3</span><br><span class="line">è¾“å‡ºï¼š-1</span><br></pre></td></tr></tbody></table></figure>
<h3 id="ç¤ºä¾‹3"><a href="#ç¤ºä¾‹3" class="headerlink" title="ç¤ºä¾‹3"></a>ç¤ºä¾‹3</h3><figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šnums = [1], target = 0</span><br><span class="line">è¾“å‡ºï¼š-1</span><br></pre></td></tr></tbody></table></figure>
<h3 id="æç¤ºï¼š"><a href="#æç¤ºï¼š" class="headerlink" title="æç¤ºï¼š"></a>æç¤ºï¼š</h3><p>1 &lt;= nums.length &lt;= 5000<br>-10^4 &lt;= nums[i] &lt;= 10^4<br>nums ä¸­çš„æ¯ä¸ªå€¼éƒ½ ç‹¬ä¸€æ— äºŒ<br>é¢˜ç›®æ•°æ®ä¿è¯ nums åœ¨é¢„å…ˆæœªçŸ¥çš„æŸä¸ªä¸‹æ ‡ä¸Šè¿›è¡Œäº†æ—‹è½¬<br>-10^4 &lt;= target &lt;= 10^4</p>
<p><br></p>
<h3 id="é¢˜è§£1-äºŒåˆ†æŸ¥æ‰¾"><a href="#é¢˜è§£1-äºŒåˆ†æŸ¥æ‰¾" class="headerlink" title="é¢˜è§£1: äºŒåˆ†æŸ¥æ‰¾"></a>é¢˜è§£1: äºŒåˆ†æŸ¥æ‰¾</h3><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">search</span><span class="params">(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> target)</span> </span>{</span><br><span class="line">        <span class="keyword">int</span> len = nums.length;</span><br><span class="line">        <span class="keyword">int</span> left = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> right = len - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span>(left &lt;= right){</span><br><span class="line">            <span class="keyword">int</span> mid = (left + right) / <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">if</span>(nums[mid] == target){</span><br><span class="line">                <span class="keyword">return</span> mid;</span><br><span class="line">            }</span><br><span class="line">            <span class="comment">// å·¦é€’å¢</span></span><br><span class="line">            <span class="keyword">if</span>(nums[<span class="number">0</span>] &lt;= nums[mid]){</span><br><span class="line">                <span class="keyword">if</span>(target &gt;= nums[<span class="number">0</span>] &amp;&amp; target &lt; nums[mid]){</span><br><span class="line">                    right = mid - <span class="number">1</span>;</span><br><span class="line">                }<span class="keyword">else</span>{</span><br><span class="line">                    left = mid + <span class="number">1</span>;</span><br><span class="line">                }</span><br><span class="line">            <span class="comment">// å³é€’å¢</span></span><br><span class="line">            }<span class="keyword">else</span>{</span><br><span class="line">                <span class="keyword">if</span>(target &lt;= nums[len-<span class="number">1</span>] &amp;&amp; target &gt; nums[mid] ){</span><br><span class="line">                    left = mid + <span class="number">1</span>;</span><br><span class="line">                }<span class="keyword">else</span>{</span><br><span class="line">                    right = mid - <span class="number">1</span>;</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p><img src="https://z3.ax1x.com/2021/09/22/4aAAje.png" alt=""></p>
<p>åªéœ€è€ƒè™‘â€œæ­£å‘â€çš„ç»“æœï¼Œä¾‹å¦‚å·¦å›¾ä¸­ï¼Œnums[0] &lt;= nums[mid]ï¼Œè¯´æ˜åœ¨(0, mid)å•è°ƒé€’å¢ã€‚</p>
<p>å¦‚æœnums[0] &lt; target &lt; nums[mid]ï¼Œé‚£ä¹ˆåªéœ€è¦åœ¨è¿™ä¹‹é—´æŸ¥æ‰¾å³å¯ï¼›å¦ä¸€æƒ…å†µä½¿ç”¨elseå›Šæ‹¬ã€‚</p>
<p>ç”¨æ—¶ï¼š0ms</p>
<p>æ—¶é—´å¤æ‚åº¦ï¼šOï¼ˆlognï¼‰</p>
<p>ç©ºé—´å¤æ‚åº¦ï¼šSï¼ˆ1ï¼‰</p>
]]></content>
      <categories>
        <category>LeetCode</category>
      </categories>
      <tags>
        <tag>æ¯æ—¥ä¸€é¢˜</tag>
        <tag>JAVA</tag>
        <tag>LeetCodeTop100</tag>
        <tag>äºŒåˆ†æŸ¥æ‰¾</tag>
      </tags>
  </entry>
  <entry>
    <title>Mybatis</title>
    <url>/2021/10/18/Mybatis/</url>
    <content><![CDATA[<h2 id="1ã€ç®€ä»‹"><a href="#1ã€ç®€ä»‹" class="headerlink" title="1ã€ç®€ä»‹"></a>1ã€ç®€ä»‹</h2><h4 id="1-1ã€ä»€ä¹ˆæ˜¯Mybatis"><a href="#1-1ã€ä»€ä¹ˆæ˜¯Mybatis" class="headerlink" title="1.1ã€ä»€ä¹ˆæ˜¯Mybatis"></a>1.1ã€ä»€ä¹ˆæ˜¯Mybatis</h4><ul>
<li>MyBatis æ˜¯ä¸€æ¬¾ä¼˜ç§€çš„æŒä¹…å±‚æ¡†æ¶ã€‚</li>
<li>å®ƒæ”¯æŒè‡ªå®šä¹‰ SQLã€å­˜å‚¨è¿‡ç¨‹ä»¥åŠé«˜çº§æ˜ å°„ã€‚</li>
<li>MyBatis å…é™¤äº†å‡ ä¹æ‰€æœ‰çš„ JDBC ä»£ç ä»¥åŠè®¾ç½®å‚æ•°å’Œè·å–ç»“æœé›†çš„å·¥ä½œã€‚</li>
<li>MyBatis å¯ä»¥é€šè¿‡ç®€å•çš„ XML æˆ–æ³¨è§£æ¥é…ç½®å’Œæ˜ å°„åŸå§‹ç±»å‹ã€æ¥å£å’Œ Java POJOï¼ˆPlain Old Java Objectsï¼Œæ™®é€šè€å¼ Java å¯¹è±¡ï¼‰ä¸ºæ•°æ®åº“ä¸­çš„è®°å½•ã€‚</li>
<li>MyBatis æœ¬æ˜¯apacheçš„ä¸€ä¸ªå¼€æºé¡¹ç›® iBatisã€‚</li>
<li>2010å¹´è¿™ä¸ªé¡¹ç›®ç”± apache software foundation è¿ç§»åˆ°äº† google codeï¼Œå¹¶ä¸”æ”¹åä¸ºMyBatisã€‚</li>
<li>2013å¹´11æœˆè¿ç§»åˆ° Githubã€‚</li>
</ul>
<p>å¦‚ä½•è·å– Mybatisï¼Ÿ</p>
<ul>
<li><p>maven ä»“åº“ï¼š</p>
<figure class="highlight xml"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.mybatis/mybatis --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.7<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>Githubï¼š<a href="https://github.com/search?q=Mybatis">https://github.com/search?q=Mybatis</a></p>
</li>
<li><p>ä¸­æ–‡æ–‡æ¡£ï¼š<a href="https://mybatis.net.cn/">https://mybatis.net.cn/</a></p>
</li>
</ul>
<h4 id="1-2ã€æŒä¹…åŒ–"><a href="#1-2ã€æŒä¹…åŒ–" class="headerlink" title="1.2ã€æŒä¹…åŒ–"></a>1.2ã€æŒä¹…åŒ–</h4><p>æ•°æ®æŒä¹…åŒ–</p>
<ul>
<li>æŒä¹…åŒ–å°±æ˜¯å°†ç¨‹åºçš„æ•°æ®åœ¨æŒä¹…çŠ¶æ€å’Œç¬æ—¶çŠ¶æ€è½¬åŒ–çš„è¿‡ç¨‹ã€‚</li>
<li>å†…å­˜<strong>æ–­ç”µå³å¤±</strong></li>
</ul>
<p>ä¸ºä»€ä¹ˆéœ€è¦æŒä¹…åŒ–ï¼Ÿ</p>
<ul>
<li>æœ‰ä¸€äº›å¯¹è±¡ä¸èƒ½è®©ä»–ä¸¢æ‰ã€‚</li>
<li>å†…å­˜å¤ªè´µäº†ã€‚</li>
</ul>
<h4 id="1-3ã€æŒä¹…å±‚"><a href="#1-3ã€æŒä¹…å±‚" class="headerlink" title="1.3ã€æŒä¹…å±‚"></a>1.3ã€æŒä¹…å±‚</h4><p>Dao å±‚ã€Service å±‚ã€Controller å±‚â€¦â€¦</p>
<ul>
<li>å®ŒæˆæŒä¹…åŒ–å·¥ä½œçš„ä»£ç å—</li>
<li>å±‚ç•Œé™ååˆ†æ˜æ˜¾ã€‚</li>
</ul>
<h4 id="1-4ã€ä¸ºä»€ä¹ˆéœ€è¦Mybatisï¼Ÿ"><a href="#1-4ã€ä¸ºä»€ä¹ˆéœ€è¦Mybatisï¼Ÿ" class="headerlink" title="1.4ã€ä¸ºä»€ä¹ˆéœ€è¦Mybatisï¼Ÿ"></a>1.4ã€ä¸ºä»€ä¹ˆéœ€è¦Mybatisï¼Ÿ</h4><ul>
<li>ä¼ ç»Ÿ JDBC ä»£ç è¿‡äºå¤æ‚å†—ä½™ï¼Œè€ŒMybatis ç®€æ´äº†å¾ˆå¤šã€‚</li>
<li>æ–¹ä¾¿ç®€æ´è‡ªåŠ¨åŒ–ï¼Œæ¡†æ¶åœ¨èƒŒåå¸®æˆ‘ä»¬åšäº†å¾ˆå¤šäº‹æƒ…ã€‚</li>
</ul>
<h2 id="2ã€ç¬¬ä¸€ä¸ª-Mybatis-ç¨‹åº"><a href="#2ã€ç¬¬ä¸€ä¸ª-Mybatis-ç¨‹åº" class="headerlink" title="2ã€ç¬¬ä¸€ä¸ª Mybatis ç¨‹åº"></a>2ã€ç¬¬ä¸€ä¸ª Mybatis ç¨‹åº</h2><p>æ·»åŠ  maven ä¾èµ–</p>
<figure class="highlight xml"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--mybatis--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--test--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--mysql--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.47<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>
<p>mybatis é…ç½®æ–‡ä»¶</p>
<figure class="highlight xml"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">configuration</span></span></span><br><span class="line"><span class="meta">        <span class="meta-keyword">PUBLIC</span> <span class="meta-string">"-//mybatis.org//DTD Config 3.0//EN"</span></span></span><br><span class="line"><span class="meta">        <span class="meta-string">"http://mybatis.org/dtd/mybatis-3-config.dtd"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">"development"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">"development"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">"JDBC"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">"POOLED"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driver"</span> <span class="attr">value</span>=<span class="string">"com.mysql.jdbc.Driver"</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"url"</span> <span class="attr">value</span>=<span class="string">"jdbc:mysql://localhost:3306/mybatis?useSSL=true<span class="symbol">&amp;amp;</span>useUnicode=true<span class="symbol">&amp;amp;</span>characterEncoding=UTF-8"</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"username"</span> <span class="attr">value</span>=<span class="string">"root"</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"123456"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--æ³¨å†Œmapperæ–‡ä»¶--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">"com/yqx/mapper/UserMapper.xml"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>
<p>pojo å®ä½“ç±»</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.yqx.pojo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>{</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getId</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(<span class="keyword">int</span> id)</span> </span>{</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>{</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getAge</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAge</span><span class="params">(<span class="keyword">int</span> age)</span> </span>{</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"User{"</span> +</span><br><span class="line">                <span class="string">"id="</span> + id +</span><br><span class="line">                <span class="string">", name='"</span> + name + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">", age="</span> + age +</span><br><span class="line">                <span class="string">'}'</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">User</span><span class="params">()</span> </span>{</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">User</span><span class="params">(<span class="keyword">int</span> id, String name, <span class="keyword">int</span> age)</span> </span>{</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>mapper.xml</p>
<figure class="highlight xml"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="meta-keyword">PUBLIC</span> <span class="meta-string">"-//mybatis.org//DTD Mapper 3.0//EN"</span></span></span><br><span class="line"><span class="meta">        <span class="meta-string">"http://mybatis.org/dtd/mybatis-3-mapper.dtd"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">"com.yqx.mapper.UserMapper"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findUserById"</span> <span class="attr">resultType</span>=<span class="string">"com.yqx.pojo.User"</span>&gt;</span></span><br><span class="line">        select * from mybatis.user where id = #{id}</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>
<p>mapper.xml æ”¾åœ¨ java ç±»ä¸­ã€‚ä¸ä¼šè¢« maven è¯»å–ï¼Œéœ€è¦åœ¨ pom.xml ä¸­æ˜¾å¼å®šä¹‰è·¯å¾„ã€‚</p>
<figure class="highlight xml"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">directory</span>&gt;</span>src/main/resources<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">includes</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.properties<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.xml<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">includes</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">filtering</span>&gt;</span>true<span class="tag">&lt;/<span class="name">filtering</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">directory</span>&gt;</span>src/main/java<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">includes</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.properties<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.xml<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">includes</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">filtering</span>&gt;</span>true<span class="tag">&lt;/<span class="name">filtering</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>
<p>mapper ç±»</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.yqx.mapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.yqx.pojo.User;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserMapper</span> </span>{</span><br><span class="line">     <span class="function">User <span class="title">findUserById</span><span class="params">(<span class="keyword">int</span> id)</span></span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>SqlSession å·¥å…·ç±»</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.yqx.utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.io.Resources;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSession;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactory;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactoryBuilder;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyBatisUtil</span> </span>{</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> SqlSessionFactory sqlSessionFactory;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> {</span><br><span class="line">        String resource = <span class="string">"mybatis-config.xml"</span>;</span><br><span class="line">        InputStream inputStream = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> {</span><br><span class="line">            inputStream = Resources.getResourceAsStream(resource);</span><br><span class="line">        } <span class="keyword">catch</span> (IOException e) {</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        }</span><br><span class="line">        sqlSessionFactory = <span class="keyword">new</span> SqlSessionFactoryBuilder().build(inputStream);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> SqlSession <span class="title">getSession</span><span class="params">()</span></span>{</span><br><span class="line">        <span class="keyword">return</span> sqlSessionFactory.openSession();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>Test æµ‹è¯•ç±»</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.yqx.mapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.yqx.utils.MyBatisUtil;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSession;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MapperTest</span> </span>{</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span>{</span><br><span class="line">        SqlSession sqlSession = MyBatisUtil.getSession();</span><br><span class="line">        UserMapper mapper = sqlSession.getMapper(UserMapper.class);</span><br><span class="line">        System.out.println(mapper.findUserById(<span class="number">5</span>));</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
]]></content>
      <categories>
        <category>SSM</category>
      </categories>
  </entry>
  <entry>
    <title>Navigation</title>
    <url>/2021/09/25/Navigation/</url>
    <content><![CDATA[<h2 id="å¼•å…¥"><a href="#å¼•å…¥" class="headerlink" title="å¼•å…¥"></a>å¼•å…¥</h2><p>ä¸€ä¸ªAPPä¸å¯èƒ½åªæœ‰ä¸€ä¸ªé¡µé¢å§ï¼Œè¿™æ—¶å€™å°±éœ€è¦ Navigation å’Œ Fragment æ¥å¸®åŠ©æˆ‘ä»¬åˆ‡æ¢é¡µé¢ã€‚æ•ˆæœå›¾å¦‚ä¸‹ã€‚</p>
<p><img src="https://z3.ax1x.com/2021/09/25/4shGLT.gif" alt=""></p>
<p>Fragment ç”Ÿå‘½å‘¨æœŸå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p>
<p><img src="https://z3.ax1x.com/2021/09/25/4yVf4U.png" alt=""></p>
<span id="more"></span>
<h2 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h2><p>MainActivity éƒ¨åˆ†</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.navigation1;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> androidx.appcompat.app.AppCompatActivity;</span><br><span class="line"><span class="keyword">import</span> androidx.navigation.NavController;</span><br><span class="line"><span class="keyword">import</span> androidx.navigation.fragment.NavHostFragment;</span><br><span class="line"><span class="keyword">import</span> androidx.navigation.ui.NavigationUI;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>{</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line">        NavHostFragment navHostFragment = (NavHostFragment) getSupportFragmentManager().findFragmentById(R.id.fragment);</span><br><span class="line">        NavController controller = navHostFragment.getNavController();</span><br><span class="line">        <span class="comment">// æ˜¾ç¤ºå¯¼èˆªæ ä¸Šæ–¹è¿”å›æŒ‰é’®</span></span><br><span class="line">        NavigationUI.setupActionBarWithNavController(<span class="keyword">this</span>, controller);</span><br><span class="line">    }</span><br><span class="line">	</span><br><span class="line">    <span class="comment">// å¯¼èˆªæ ä¸Šæ–¹è¿”å›æŒ‰é’®äº‹ä»¶</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onSupportNavigateUp</span><span class="params">()</span> </span>{</span><br><span class="line">        NavHostFragment navHostFragment = (NavHostFragment) getSupportFragmentManager().findFragmentById(R.id.fragment);</span><br><span class="line">        NavController controller = navHostFragment.getNavController();</span><br><span class="line">        <span class="keyword">return</span> controller.navigateUp();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>Navigation.xml ä¸­å¯ä»¥å†™å‡ºå„ä¸ª Fragment çš„æ€ç»´å¯¼å›¾ï¼ˆå…·ä½“è·³è½¬ä»£ç å†™åœ¨ java æ–‡ä»¶ä¸­ï¼‰ï¼Œä¹Ÿå¯ä»¥æŒ‡å®šåˆ‡æ¢åŠ¨ç”»ã€‚</p>
<p><img src="https://z3.ax1x.com/2021/09/25/4s4SXV.png" alt=""></p>
<p>åˆ›å»º Fragment è‡ªåŠ¨ç”Ÿæˆçš„ä»£ç å°±ç•¥å»äº†ã€‚</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="comment">// è·³è½¬é¡µé¢</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onViewCreated</span><span class="params">(<span class="meta">@NonNull</span> View view, <span class="meta">@Nullable</span> Bundle savedInstanceState)</span> </span>{</span><br><span class="line">        <span class="keyword">super</span>.onViewCreated(view, savedInstanceState);</span><br><span class="line">        Button button = getView().findViewById(R.id.button2);</span><br><span class="line">        button.setOnClickListener(Navigation.createNavigateOnClickListener(R.id.action_secondFragment_to_firstFragment));</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p><br></p>
<h2 id="ä¼ é€’æ•°æ®"><a href="#ä¼ é€’æ•°æ®" class="headerlink" title="ä¼ é€’æ•°æ®"></a>ä¼ é€’æ•°æ®</h2><p>ï¼ˆ1ï¼‰ ä½¿ç”¨Bundle</p>
<p>æœ‰æ—¶ç•Œé¢ä¼šä¼´éšç€æ•°æ®ä¸€èµ·è·³è½¬ï¼Œè¿™ä¸ªæ—¶å€™å°±å¯ä»¥ä½¿ç”¨ Bundle è¿™ä¸ªé”®å€¼å¯¹å­˜å‚¨æ•°æ®è¿›è¡Œä¼ é€äº†ã€‚</p>
<p>æ•ˆæœå›¾å¦‚ä¸‹ã€‚</p>
<p><img src="https://z3.ax1x.com/2021/09/25/4ypemD.gif" alt=""></p>
<p>å‘é€æ–¹ Fragment</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line">	<span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onViewCreated</span><span class="params">(<span class="meta">@NonNull</span> View view, <span class="meta">@Nullable</span> Bundle savedInstanceState)</span> </span>{</span><br><span class="line">        <span class="keyword">super</span>.onViewCreated(view, savedInstanceState);</span><br><span class="line">        Button button = getView().findViewById(R.id.button);</span><br><span class="line">        EditText editText = getView().findViewById(R.id.editTextTextPersonName);</span><br><span class="line">        button.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() {</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View view)</span> </span>{</span><br><span class="line">                String text = editText.getText().toString();</span><br><span class="line">                <span class="keyword">if</span>(TextUtils.isEmpty(text)){</span><br><span class="line">                    Toast.makeText(getActivity(), <span class="string">"è¯·è¾“å…¥å§“å"</span>, Toast.LENGTH_SHORT).show();</span><br><span class="line">                    <span class="keyword">return</span>;</span><br><span class="line">                }</span><br><span class="line">                Bundle bundle = <span class="keyword">new</span> Bundle();</span><br><span class="line">                bundle.putString(<span class="string">"name"</span>, text);</span><br><span class="line">                NavController navController = Navigation.findNavController(view);</span><br><span class="line">                navController.navigate(R.id.action_firstFragment_to_secondFragment, bundle);</span><br><span class="line">            }</span><br><span class="line">        });</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>æ¥æ”¶æ–¹ Fragment</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onViewCreated</span><span class="params">(<span class="meta">@NonNull</span> View view, <span class="meta">@Nullable</span> Bundle savedInstanceState)</span> </span>{</span><br><span class="line">        <span class="keyword">super</span>.onViewCreated(view, savedInstanceState);</span><br><span class="line">        TextView textView = getView().findViewById(R.id.textView);</span><br><span class="line">        textView.setText(getArguments().getString(<span class="string">"name"</span>));</span><br><span class="line">        Button button = getView().findViewById(R.id.button2);</span><br><span class="line">        button.setOnClickListener(Navigation.createNavigateOnClickListener(R.id.action_secondFragment_to_firstFragment));</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>ï¼ˆ2ï¼‰ ä½¿ç”¨ ViewModelï¼Œæ•ˆæœå›¾å¦‚ä¸‹ã€‚</p>
<p><img src="https://z3.ax1x.com/2021/09/26/4yrL6g.gif" alt=""></p>
<p>FirstFragmentéƒ¨åˆ†ã€‚</p>
<p>è¦æ³¨æ„onCreateViewæ˜¯åˆ›å»ºçš„æ—¶å€™è°ƒç”¨ï¼ŒonViewCreatedæ˜¯åœ¨onCreateViewåè¢«è§¦å‘çš„äº‹ä»¶ï¼Œå‰åå…³ç³»ã€‚</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> View <span class="title">onCreateView</span><span class="params">(LayoutInflater inflater, ViewGroup container,</span></span></span><br><span class="line"><span class="params"><span class="function">                             Bundle savedInstanceState)</span> </span>{</span><br><span class="line">        MyViewModel myViewModel = <span class="keyword">new</span> ViewModelProvider(getActivity()).get(MyViewModel.class);</span><br><span class="line">        FragmentFirstBinding binding = DataBindingUtil.inflate(inflater, R.layout.fragment_first, container, <span class="keyword">false</span>);</span><br><span class="line">        binding.setData(myViewModel);</span><br><span class="line">        binding.setLifecycleOwner(getActivity());</span><br><span class="line">        binding.buttonNext.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() {</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View view)</span> </span>{</span><br><span class="line">                NavController navController = Navigation.findNavController(view);</span><br><span class="line">                navController.navigate(R.id.action_firstFragment_to_secondFragment);</span><br><span class="line">            }</span><br><span class="line">        });</span><br><span class="line">        binding.seekBar.setProgress(myViewModel.getNumber().getValue());</span><br><span class="line">        binding.seekBar.setOnSeekBarChangeListener(<span class="keyword">new</span> SeekBar.OnSeekBarChangeListener() {</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onProgressChanged</span><span class="params">(SeekBar seekBar, <span class="keyword">int</span> i, <span class="keyword">boolean</span> b)</span> </span>{</span><br><span class="line">                myViewModel.getNumber().setValue(binding.seekBar.getProgress());</span><br><span class="line">            }</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onStartTrackingTouch</span><span class="params">(SeekBar seekBar)</span> </span>{</span><br><span class="line"></span><br><span class="line">            }</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onStopTrackingTouch</span><span class="params">(SeekBar seekBar)</span> </span>{</span><br><span class="line"></span><br><span class="line">            }</span><br><span class="line">        });</span><br><span class="line">        <span class="keyword">return</span>  binding.getRoot();</span><br><span class="line">    }</span><br></pre></td></tr></tbody></table></figure>
<p>SecondFragmentéƒ¨åˆ†ã€‚</p>
<p>ä¸¤è¾¹è·å– ViewModelProvider éƒ½æ˜¯ä½¿ç”¨çš„ <code>getActivity()</code> è€Œä¸æ˜¯ <code>this</code>ï¼Œå› æ­¤è¯·æ±‚çš„ ViewModel æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™å°±æ˜¯ Singleton çš„å«ä¹‰ï¼Œæ•…èƒ½æ•°æ®å…±äº«ã€‚</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> View <span class="title">onCreateView</span><span class="params">(LayoutInflater inflater, ViewGroup container,</span></span></span><br><span class="line"><span class="params"><span class="function">                             Bundle savedInstanceState)</span> </span>{</span><br><span class="line">        FragmentSecondBinding binding = DataBindingUtil.inflate(inflater, R.layout.fragment_second, container, <span class="keyword">false</span>);</span><br><span class="line">        MyViewModel myViewModel = <span class="keyword">new</span> ViewModelProvider(getActivity()).get(MyViewModel.class);</span><br><span class="line">        binding.setData(myViewModel);</span><br><span class="line">        binding.setLifecycleOwner(getActivity());</span><br><span class="line">        binding.buttonBack.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() {</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View view)</span> </span>{</span><br><span class="line">                NavController navController = Navigation.findNavController(view);</span><br><span class="line">                navController.navigate(R.id.action_secondFragment_to_firstFragment);</span><br><span class="line">            }</span><br><span class="line">        });</span><br><span class="line">        <span class="keyword">return</span> binding.getRoot();</span><br><span class="line">    }</span><br></pre></td></tr></tbody></table></figure>
<h2 id="åŠ¨ç”»è¡¥é—´"><a href="#åŠ¨ç”»è¡¥é—´" class="headerlink" title="åŠ¨ç”»è¡¥é—´"></a>åŠ¨ç”»è¡¥é—´</h2><p>å„ä¸ª Fragment ä¹‹é—´çš„åˆ‡æ¢åŠ¨ä½œã€‚æ•ˆæœå›¾å¦‚ä¸‹ã€‚</p>
<p><img src="https://z3.ax1x.com/2021/09/25/4yCqfA.gif" alt=""></p>
<p>Slide_From_Left è¿›å…¥åŠ¨ç”»ã€‚</p>
<p>fromXDeltaï¼šèµ·å§‹ä½ç½®ã€‚ï¼ˆ0% è¡¨ç¤º Fragment ä¸­çš„ä½ç½®ï¼‰</p>
<p>toXDeltaï¼šç»“æŸä½ç½®ã€‚</p>
<p>durationï¼šæŒç»­æ—¶é—´ã€‚</p>
<figure class="highlight xml"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">set</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">translate</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:fromXDelta</span>=<span class="string">"-100%"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:toXDelta</span>=<span class="string">"0%"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:duration</span>=<span class="string">"1000"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>
<p>Slide_To_Right ç§»å‡ºåŠ¨ç”»ã€‚</p>
<figure class="highlight xml"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">set</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">translate</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:fromXDelta</span>=<span class="string">"0%"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:toXDelta</span>=<span class="string">"100%"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:duration</span>=<span class="string">"1000"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>
<p>ä¹Ÿå¯ä»¥å®šåˆ¶å…¶å®ƒèŠ±é‡Œèƒ¡å“¨çš„åŠ¨ç”»ã€‚</p>
<p><img src="https://z3.ax1x.com/2021/09/25/4yPzg1.gif" alt=""></p>
<figure class="highlight xml"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">set</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">rotate</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:fromDegrees</span>=<span class="string">"0"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:toDegrees</span>=<span class="string">"720"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:pivotX</span>=<span class="string">"50%"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:pivotY</span>=<span class="string">"50%"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:duration</span>=<span class="string">"1000"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scale</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:fromXScale</span>=<span class="string">"0%"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:toXScale</span>=<span class="string">"100%"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:fromYScale</span>=<span class="string">"0%"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:toYScale</span>=<span class="string">"100%"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:pivotX</span>=<span class="string">"50%"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:pivotY</span>=<span class="string">"50%"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:duration</span>=<span class="string">"1000"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">alpha</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:fromAlpha</span>=<span class="string">"0"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:toAlpha</span>=<span class="string">"100"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:duration</span>=<span class="string">"1000"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">translate</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:fromXDelta</span>=<span class="string">"-100%"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:toXDelta</span>=<span class="string">"0%"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:duration</span>=<span class="string">"1000"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>
]]></content>
      <categories>
        <category>Android</category>
      </categories>
  </entry>
  <entry>
    <title>ViewModelSavedStateï¼ˆå³ä½¿è¿›ç¨‹åœ¨åå°è¢«ç³»ç»Ÿæ€æ­»æ•°æ®ä¹Ÿèƒ½ä¿å­˜ä¸‹æ¥ï¼‰</title>
    <url>/2021/09/24/ViewModelSavedState%EF%BC%88%E5%8D%B3%E4%BD%BF%E8%BF%9B%E7%A8%8B%E5%9C%A8%E5%90%8E%E5%8F%B0%E8%A2%AB%E7%B3%BB%E7%BB%9F%E6%9D%80%E6%AD%BB%E6%95%B0%E6%8D%AE%E4%B9%9F%E8%83%BD%E4%BF%9D%E5%AD%98%E4%B8%8B%E6%9D%A5%EF%BC%89/</url>
    <content><![CDATA[<h2 id="å¼•å…¥"><a href="#å¼•å…¥" class="headerlink" title="å¼•å…¥"></a>å¼•å…¥</h2><p>æ­£å¸¸æƒ…å†µä¸‹ï¼Œå¦‚æœä¸€ä¸ªè¿›ç¨‹è¢«ç§»åˆ°åå°ï¼Œä¸”å½“å‰ç³»ç»Ÿå†…å­˜ä¸è¶³æ—¶ï¼Œä¼šæœ‰ä¸€å®šæ¦‚ç‡ä¼šå°†è¯¥è¿›ç¨‹æ€æ­»æ¥é‡Šæ”¾å†…å­˜èµ„æºï¼Œè€Œè¢«ç³»ç»Ÿæ€æ­»æ—¶ï¼ŒViewModelä¹Ÿä¼šè¢«åˆ é™¤ï¼ŒUIçš„æ•°æ®å°±ä¼šé­åˆ°ä¸¢å¤±ã€‚</p>
<p><img src="https://z3.ax1x.com/2021/09/24/4DxeOJ.png" alt=""></p>
<p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œä¸€æ—¦åˆ‡å‡ºåå°è¿›ç¨‹è¢«ç³»ç»Ÿæ€æ­»æ•°æ®å°±ä¼šä¸¢å¤±ã€‚</p>
<p>ä¸è¿‡å¥½åœ¨ç³»ç»Ÿæ€æ­»è¿›ç¨‹æ—¶ï¼Œä¼šè°ƒç”¨ onSaveInstanceState() æ–¹æ³•ï¼Œé¡¾åæ€ä¹‰å°±æ˜¯ä¿å­˜å®ä¾‹çŠ¶æ€çš„ï¼Œæˆ‘ä»¬é‡å†™è¿™ä¸ªæ–¹æ³•æ¥ä¿å­˜æˆ‘ä»¬çš„æ•°æ®ã€‚</p>
<div style="display: flex;justify-content: center;">
    <img src="https://z3.ax1x.com/2021/09/24/4Dzc8K.png" height="400px" width="230px" style="margin: 50px;">
    <img src="https://z3.ax1x.com/2021/09/24/4Dz6C6.png" height="400px" width="230px" style="margin: 50px;">
</div>

<span id="more"></span>
<p><br></p>
<h2 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h2><h4 id="1-onSaveInstanceState"><a href="#1-onSaveInstanceState" class="headerlink" title="1. onSaveInstanceState"></a>1. onSaveInstanceState</h4><p>ViewModeléƒ¨åˆ†</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.viewmodelsavedstate;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> androidx.lifecycle.MutableLiveData;</span><br><span class="line"><span class="keyword">import</span> androidx.lifecycle.ViewModel;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyViewModel</span> <span class="keyword">extends</span> <span class="title">ViewModel</span> </span>{</span><br><span class="line">    <span class="keyword">private</span> MutableLiveData&lt;Integer&gt; number;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> MutableLiveData&lt;Integer&gt; <span class="title">getNumber</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">if</span>(number == <span class="keyword">null</span>){</span><br><span class="line">            number = <span class="keyword">new</span> MutableLiveData&lt;&gt;();</span><br><span class="line">            number.setValue(<span class="number">0</span>);</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> number;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> x)</span></span>{</span><br><span class="line">        number.setValue(number.getValue() + x);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>
<p>MainActivityï¼Œ21 - 23è¡Œæ˜¯è½½å…¥ savedInstanceStateï¼Œ28 - 32æ˜¯å†™å…¥ savedInstanceStateã€‚</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.viewmodelsavedstate;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> androidx.annotation.NonNull;</span><br><span class="line"><span class="keyword">import</span> androidx.appcompat.app.AppCompatActivity;</span><br><span class="line"><span class="keyword">import</span> androidx.databinding.DataBindingUtil;</span><br><span class="line"><span class="keyword">import</span> androidx.lifecycle.ViewModelProvider;</span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"><span class="keyword">import</span> com.example.viewmodelsavedstate.databinding.ActivityMainBinding;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> </span>{</span><br><span class="line">    MyViewModel myViewModel;</span><br><span class="line">    ActivityMainBinding binding;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">static</span> String SAVED_KEY_NAME = <span class="string">"number"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>{</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        binding = DataBindingUtil.setContentView(<span class="keyword">this</span>, R.layout.activity_main);</span><br><span class="line">        myViewModel = <span class="keyword">new</span> ViewModelProvider(<span class="keyword">this</span>).get(MyViewModel.class);</span><br><span class="line">        <span class="keyword">if</span>(savedInstanceState != <span class="keyword">null</span>){</span><br><span class="line">            myViewModel.getNumber().setValue(savedInstanceState.getInt(SAVED_KEY_NAME));</span><br><span class="line">        }</span><br><span class="line">        binding.setData(myViewModel);</span><br><span class="line">        binding.setLifecycleOwner(<span class="keyword">this</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onSaveInstanceState</span><span class="params">(<span class="meta">@NonNull</span> Bundle outState)</span> </span>{</span><br><span class="line">        <span class="keyword">super</span>.onSaveInstanceState(outState);</span><br><span class="line">        outState.putInt(SAVED_KEY_NAME, myViewModel.getNumber().getValue());</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<h4 id="2-SavedStateHandle"><a href="#2-SavedStateHandle" class="headerlink" title="2. SavedStateHandle"></a>2. SavedStateHandle</h4><p>ViewModeléƒ¨åˆ†ï¼Œä½¿ç”¨ SavedStateHandle æ¥ä»£æ›¿ MutableLiveData å­˜å‚¨æ•°æ®ï¼ŒåŒæ—¶åœ¨åˆ›å»º ViewModel æ—¶å°†SavedStateHandle ä¼ å…¥ä¾›åç»­ä½¿ç”¨ã€‚</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.viewmodelsavedstate;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> androidx.lifecycle.MutableLiveData;</span><br><span class="line"><span class="keyword">import</span> androidx.lifecycle.SavedStateHandle;</span><br><span class="line"><span class="keyword">import</span> androidx.lifecycle.ViewModel;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyViewModel</span> <span class="keyword">extends</span> <span class="title">ViewModel</span> </span>{</span><br><span class="line">    <span class="keyword">private</span> SavedStateHandle handle;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MyViewModel</span><span class="params">(SavedStateHandle handle)</span></span>{</span><br><span class="line">        <span class="keyword">this</span>.handle = handle;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> MutableLiveData&lt;Integer&gt; <span class="title">getNumber</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">if</span>(!handle.contains(MainActivity.SAVED_KEY_NAME)){</span><br><span class="line">            handle.set(MainActivity.SAVED_KEY_NAME, <span class="number">0</span>);</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> handle.getLiveData(MainActivity.SAVED_KEY_NAME);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> x)</span></span>{</span><br><span class="line">        getNumber().setValue(getNumber().getValue() + x);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>MainActivityéƒ¨åˆ†</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.viewmodelsavedstate;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> androidx.appcompat.app.AppCompatActivity;</span><br><span class="line"><span class="keyword">import</span> androidx.databinding.DataBindingUtil;</span><br><span class="line"><span class="keyword">import</span> androidx.lifecycle.ViewModelProvider;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.example.viewmodelsavedstate.databinding.ActivityMainBinding;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> </span>{</span><br><span class="line">    MyViewModel myViewModel;</span><br><span class="line">    ActivityMainBinding binding;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">static</span> String SAVED_KEY_NAME = <span class="string">"number"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>{</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        binding = DataBindingUtil.setContentView(<span class="keyword">this</span>, R.layout.activity_main);</span><br><span class="line">        myViewModel = <span class="keyword">new</span> ViewModelProvider(<span class="keyword">this</span>).get(MyViewModel.class);</span><br><span class="line">        binding.setData(myViewModel);</span><br><span class="line">        binding.setLifecycleOwner(<span class="keyword">this</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
]]></content>
      <categories>
        <category>Android</category>
      </categories>
  </entry>
  <entry>
    <title>åˆ¶ä½œä¿„ç½—æ–¯æ–¹å—</title>
    <url>/2021/08/29/%E5%88%B6%E4%BD%9C%E4%BF%84%E7%BD%97%E6%96%AF%E6%96%B9%E5%9D%97/</url>
    <content><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>ä¹‹å‰æ¸¸æˆæ ‡ç­¾ä¸‹åªæ˜¯å¤§è‡´åšäº†ä¸ªç›®å½•ï¼Œæ¸¸æˆå®è´¨å†…å®¹å¹¶æ²¡æœ‰å®ç°ï¼Œæœ€è¿‘åˆè¶…çº§ä¸æƒ³å­¦<code>Deep Learning</code>ï¼Œå°±æ¥æŠŠè¿™ä¸ªä¿„ç½—æ–¯æ–¹å—ç»™å†™äº†å§ï¼Œåç»­çš„æ¸¸æˆç­‰æœ‰ç©ºå†å†™ï¼ˆä¸‹æ¬¡ä¸€å®šï¼‰ã€‚</p>
<p><img src="https://z3.ax1x.com/2021/08/29/hG3GOx.jpg" alt="empty"></p>
<span id="more"></span>
<p><br></p>
<h2 id="è®¾è®¡"><a href="#è®¾è®¡" class="headerlink" title="è®¾è®¡"></a>è®¾è®¡</h2><p>å†™æ¸¸æˆå˜›ï¼Œè‚¯å®šè¦å…ˆæŠŠå¤§è‡´çš„æ¡†æ¶å’Œè¦å®ç°çš„åŠŸèƒ½æƒ³å¥½ã€‚äºæ˜¯æˆ‘å°±ç”»äº†ä¸ªæ¯”è¾ƒç®€ç•¥çš„å›¾ï¼Œä¸è¿‡åº”è¯¥è¿˜æ˜¯æŒºæ¸…æ¥šçš„ï¼Œè¿˜é™„åŠ äº†å°ºå¯¸ï¼Œæ²¡æåˆ°çš„éƒ¨åˆ†å°±è‡ªç”±å‘æŒ¥å§ï¼Œæ€ä¹ˆèˆ’æœæ€ä¹ˆæ¥ã€‚</p>
<p>å…¶ä¸­æ¯ä¸ªä¿„ç½—æ–¯æ–¹å—éƒ½æ˜¯ç”±å››ä¸ªå°æ–¹å—ç»„æˆï¼Œæ¯ä¸ªå°æ–¹å—éƒ½æ˜¯32px * 32pxçš„ï¼Œä¸€å…±19è¡Œï¼Œ12åˆ—ã€‚</p>
<p><img src="https://z3.ax1x.com/2021/08/29/hGGVaT.jpg" alt="design"></p>
<p>å®é™…HTMLå®ç°æ•ˆæœå¦‚ä¸‹ã€‚</p>
<p><img src="https://z3.ax1x.com/2021/08/29/hGGQMR.jpg" alt="efficiency"></p>
<p>ç„¶åè®¾è®¡æ¯ä¸€ä¸ªä¿„ç½—æ–¯æ–¹å—ï¼Œç”±äºè€ƒè™‘åˆ°æ—‹è½¬çš„é—®é¢˜ï¼Œè¿™é‡Œå°†ä»–ä»¬éƒ½ç”¨ä¸€ä¸ªå¤§çš„çŸ©å½¢æ¡†èµ·æ¥ã€‚</p>
<p><img src="https://z3.ax1x.com/2021/08/29/hGBD3V.jpg" alt="tetrisCube"></p>
<p>å¹³ç§»å°±ä¸ç”¨å¤šè¯´äº†ï¼Œæˆ‘å°±ç€é‡è¯´ä¸‹æ—‹è½¬å§ï¼</p>
<p>ä¸‹é¢æ˜¯Lå‹çš„æ—‹è½¬å›¾ç¤ºï¼Œä»å·¦è‡³å³ï¼Œä»ä¸Šè‡³ä¸‹ï¼Œæˆ‘æŠŠå¯¹åº”æ–¹å—çš„Xï¼ŒYåæ ‡ä¹Ÿå†™åœ¨æ—è¾¹äº†ã€‚</p>
<p>ä»”ç»†è§‚å¯Ÿçš„è¯å¯ä»¥å‘ç°ï¼Œæ—‹è½¬ä¹‹åå›¾å½¢çš„Yå°±æ˜¯æ—‹è½¬ä¹‹å‰å›¾å½¢çš„Xï¼Œè€Œæ—‹è½¬ä¹‹åå›¾å½¢çš„Xå°±æ˜¯æ—‹è½¬ä¹‹å‰çš„ï¼ˆ3 - Yï¼‰ã€‚</p>
<p>ä¸è¿‡éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ—‹è½¬ä¹Ÿä¼šè¶Šç•Œï¼Œéœ€åšä¸€å®šçš„åˆ¤æ–­ã€‚</p>
<p><img src="https://z3.ax1x.com/2021/08/29/hGzkdO.jpg" alt="rotate"></p>
<p><br></p>
<h2 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h2><p>è®¾è®¡å¥½å®ç°çš„æ¡†æ¶åï¼Œå†æ·»åŠ äº¿ç‚¹ä»£ç å°±å®Œäº‹äº†<span class="github-emoji" style="display:inline;vertical-align:middle"><span>ğŸ˜¢</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f622.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></p>
<p>è¿™é‡Œå°±ä¸æŠŠä»£ç è´´å‡ºæ¥äº†ï¼Œæ²¡æ€ä¹ˆå†™æ³¨é‡Šï¼Œè®©æˆ‘å†çœ‹ä¸€éä¹Ÿè´¹åŠ²ï¼Œç›¸ä¿¡èªæ˜çš„äººçœ‹äº†ä¸Šé¢çš„è®¾è®¡å›¾å°±ä¼šæœ‰æ€è·¯äº†ã€‚</p>
<p>ä»æ˜¨å¤©ä¸‹åˆå†™åˆ°ä»Šå¤©ä¸‹åˆï¼Œä¸€åŠçš„æ—¶é—´éƒ½åœ¨æ”¹bugï¼Œä¸æ˜¯å¾ˆä¼šç”¨JSçš„debugã€‚</p>
<p><img src="https://z3.ax1x.com/2021/08/30/htyG1s.gif" alt="code"></p>
]]></content>
      <categories>
        <category>Game</category>
      </categories>
      <tags>
        <tag>æ¸¸æˆåˆ¶ä½œ</tag>
      </tags>
  </entry>
  <entry>
    <title>åˆ¶ä½œè´ªåƒè›‡</title>
    <url>/2021/09/10/%E5%88%B6%E4%BD%9C%E8%B4%AA%E5%90%83%E8%9B%87/</url>
    <content><![CDATA[<h2 id="è®¾è®¡"><a href="#è®¾è®¡" class="headerlink" title="è®¾è®¡"></a>è®¾è®¡</h2><p>ç›´æ¥æ­¥å…¥æ­£é¢˜ï¼Œç”±äºæ¸¸æˆæœ¬èº«æ¸¸ç©ä»¥åŠæ“ä½œæ¯”è¾ƒç®€å•ï¼Œå› æ­¤è¿™æ¬¡çš„æ¸¸æˆç•Œé¢ä¼šæœ‰ç‚¹ç®€é™‹ï¼Œå®åœ¨æ˜¯ä¸çŸ¥é“è¯¥åŠ å•¥ä¸œè¥¿äº†<span class="github-emoji" style="display:inline;vertical-align:middle"><span>ğŸ˜¿</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f63f.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></p>
<p>æ¸¸æˆä¸»ä½“éƒ¨åˆ†æ˜¯å®½ä¸º650pxï¼Œé«˜ä¸º450pxï¼Œè€Œå°è›‡çš„æ¯ä¸€æ ¼èº«ä½“éƒ½æ˜¯25 * 25çš„ï¼Œå› æ­¤æ•´ä¸ªæ¸¸æˆç•Œé¢æœ‰18è¡Œï¼Œ26åˆ—ã€‚</p>
<p>è¿™ä¸€æ¬¡æˆ‘ä¼šå°½é‡æŠŠæ¯ä¸€ä¸ªåŠŸèƒ½çš„ä»£ç éƒ½è®°å½•ä¸‹æ¥ï¼Œä¸€æ˜¯å› ä¸ºè¿™ä¸ªè´ªåƒè›‡ä»£ç è‚¯å®šæ¯”ä¿„ç½—æ–¯æ–¹å—è¦å°‘ï¼ŒäºŒæ˜¯å› ä¸ºï¼Œä¸å†™ä»£ç çš„è¯ï¼Œæˆ‘è¿™ç¯‡åšå®¢å·²ç»ç»“æŸäº†ï¼Œè¿™ä¹Ÿå¤ªçŸ­äº†å§å–‚ï¼</p>
<p><img src="https://z3.ax1x.com/2021/09/10/hjBnGF.jpg" alt=""></p>
<span id="more"></span>
<h2 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h2><p>HTMLä»£ç å¦‚ä¸‹ï¼Œå¸ƒå±€éƒ½æ˜¯é‡‡ç”¨positionï¼šabsoluteçš„æ–¹å¼ï¼Œå› ä¸ºéƒ¨ä»¶æ¯”è¾ƒå°‘ï¼Œè¿™æ ·ä»£ç ä¹Ÿä¸ä¼šå¾ˆç¹çï¼Œè€Œä¸”å¾ˆç®€å•ã€‚</p>
<figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">title</span>&gt;</span>è´ªåƒè›‡<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"./snake.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css">			<span class="selector-tag">div</span>{</span></span><br><span class="line"><span class="css">				<span class="attribute">border</span>: <span class="number">#000000</span> <span class="number">3.5px</span> solid;</span></span><br><span class="line"><span class="css">			}</span></span><br><span class="line"><span class="css">			</span></span><br><span class="line"><span class="css">			<span class="selector-class">.container</span>{</span></span><br><span class="line"><span class="css">				<span class="attribute">height</span>: <span class="number">570px</span>;</span></span><br><span class="line"><span class="css">				<span class="attribute">width</span>: <span class="number">707px</span>;</span></span><br><span class="line"><span class="css">				<span class="attribute">position</span>: relative;</span></span><br><span class="line"><span class="css">				<span class="attribute">margin</span>: <span class="number">0px</span> auto;</span></span><br><span class="line"><span class="css">				<span class="attribute">margin-top</span>: <span class="number">75px</span>;</span></span><br><span class="line"><span class="css">				<span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="css">			}</span></span><br><span class="line"><span class="css">			</span></span><br><span class="line"><span class="css">			<span class="selector-class">.gameDiv</span>{</span></span><br><span class="line"><span class="css">				<span class="attribute">height</span>: <span class="number">450px</span>;</span></span><br><span class="line"><span class="css">				<span class="attribute">width</span>: <span class="number">650px</span>;</span></span><br><span class="line"><span class="css">				<span class="attribute">position</span>: absolute;</span></span><br><span class="line"><span class="css">				<span class="attribute">left</span>: <span class="number">25px</span>;</span></span><br><span class="line"><span class="css">				<span class="attribute">top</span>: <span class="number">70px</span>;</span></span><br><span class="line"><span class="css">			}</span></span><br><span class="line"><span class="css">			</span></span><br><span class="line"><span class="css">			<span class="selector-tag">p</span>{</span></span><br><span class="line"><span class="css">				<span class="attribute">position</span>: absolute;</span></span><br><span class="line"><span class="css">				<span class="attribute">font-weight</span>: <span class="number">600</span>;</span></span><br><span class="line"><span class="css">				<span class="attribute">right</span>: <span class="number">50px</span>;</span></span><br><span class="line"><span class="css">			}</span></span><br><span class="line"><span class="css">			</span></span><br><span class="line"><span class="css">			<span class="selector-class">.length</span>{</span></span><br><span class="line"><span class="css">				<span class="attribute">top</span>: -<span class="number">5px</span>;</span></span><br><span class="line"><span class="css">			}</span></span><br><span class="line"><span class="css">			</span></span><br><span class="line"><span class="css">			<span class="selector-class">.score</span>{</span></span><br><span class="line"><span class="css">				<span class="attribute">top</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="css">			}</span></span><br><span class="line"><span class="css">			</span></span><br><span class="line"><span class="css">			<span class="selector-tag">h2</span>{</span></span><br><span class="line"><span class="css">				<span class="attribute">position</span>: absolute;</span></span><br><span class="line"><span class="css">				<span class="attribute">font-weight</span>: <span class="number">600</span>;</span></span><br><span class="line"><span class="css">				<span class="attribute">left</span>: <span class="number">305px</span>;</span></span><br><span class="line"><span class="css">				<span class="attribute">font-size</span>: <span class="number">30px</span>;</span></span><br><span class="line"><span class="css">				<span class="attribute">top</span>: -<span class="number">10px</span>;</span></span><br><span class="line"><span class="css">			}</span></span><br><span class="line"><span class="css">			</span></span><br><span class="line"><span class="css">			<span class="selector-class">.deflory</span>{</span></span><br><span class="line"><span class="css">				<span class="attribute">position</span>: absolute;</span></span><br><span class="line"><span class="css">				<span class="attribute">bottom</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="css">				<span class="attribute">right</span>: <span class="number">5px</span>;</span></span><br><span class="line"><span class="css">				<span class="attribute">height</span>: <span class="number">30px</span>;</span></span><br><span class="line"><span class="css">				<span class="attribute">width</span>: <span class="number">150px</span>;</span></span><br><span class="line"><span class="css">			}</span></span><br><span class="line"><span class="css">			</span></span><br><span class="line"><span class="css">			<span class="selector-class">.snakeCube</span>{</span></span><br><span class="line"><span class="css">				<span class="attribute">position</span>: absolute;</span></span><br><span class="line"><span class="css">			}</span></span><br><span class="line"><span class="css">		</span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">body</span> <span class="attr">onload</span>=<span class="string">"init()"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">h2</span>&gt;</span>è´ªåƒè›‡<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"length"</span>&gt;</span></span><br><span class="line">				é•¿åº¦ï¼š</span><br><span class="line">			<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"score"</span>&gt;</span></span><br><span class="line">				åˆ†æ•°ï¼š</span><br><span class="line">			<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"gameDiv"</span>&gt;</span></span><br><span class="line">				</span><br><span class="line">			<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"img/Deflory.png"</span> <span class="attr">class</span>=<span class="string">"deflory"</span>/&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>
<h4 id="1-ç§»åŠ¨è´ªåƒè›‡"><a href="#1-ç§»åŠ¨è´ªåƒè›‡" class="headerlink" title="1. ç§»åŠ¨è´ªåƒè›‡"></a>1. ç§»åŠ¨è´ªåƒè›‡</h4><p>ï¼ˆ1ï¼‰ é”®ç›˜ç›‘å¬</p>
<p>é¦–å…ˆéœ€è¦è®©å°è›‡åŠ¨èµ·æ¥ï¼Œå› æ­¤å°±ä¼šéœ€è¦é”®ç›˜ç›‘å¬äº‹ä»¶ã€‚</p>
<p>å‡¡äº‹éƒ½ä¸èƒ½ä¸€å£åƒæˆä¸€ä¸ªå¤§èƒ–å­ï¼Œä¸è¦æ€¥ç€å†™ç§»åŠ¨çš„åŠŸèƒ½ï¼Œå…ˆçœ‹çœ‹èƒ½å¦ç›‘å¬åˆ°é”®ç›˜ã€‚</p>
<figure class="highlight javascript"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> ROWS = <span class="number">18</span></span><br><span class="line"><span class="keyword">var</span> COLS = <span class="number">26</span></span><br><span class="line"><span class="keyword">var</span> SNAKE_SIZE = <span class="number">25</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆå§‹åŒ–</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">init</span>(<span class="params"></span>)</span>{</span><br><span class="line">	onKeyDown();</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// é”®ç›˜ç›‘å¬äº‹ä»¶</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">onKeyDown</span>(<span class="params"></span>)</span>{</span><br><span class="line">	<span class="built_in">document</span>.onkeydown = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>{</span><br><span class="line">		<span class="keyword">switch</span>(event.keyCode){</span><br><span class="line">			<span class="comment">// W å’Œ â†‘</span></span><br><span class="line">			<span class="keyword">case</span> <span class="number">38</span>:</span><br><span class="line">			<span class="keyword">case</span> <span class="number">87</span>:{</span><br><span class="line">				<span class="built_in">console</span>.log(<span class="string">"ä¸Š"</span>);</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			}</span><br><span class="line">			<span class="comment">// A å’Œ â†</span></span><br><span class="line">			<span class="keyword">case</span> <span class="number">37</span>:</span><br><span class="line">			<span class="keyword">case</span> <span class="number">65</span>:{</span><br><span class="line">				<span class="built_in">console</span>.log(<span class="string">"å·¦"</span>);</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			}</span><br><span class="line">			<span class="comment">// S å’Œ â†“</span></span><br><span class="line">			<span class="keyword">case</span> <span class="number">40</span>:</span><br><span class="line">			<span class="keyword">case</span> <span class="number">83</span>:{</span><br><span class="line">				<span class="built_in">console</span>.log(<span class="string">"ä¸‹"</span>);</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			}</span><br><span class="line">			<span class="comment">// D å’Œ â†’</span></span><br><span class="line">			<span class="keyword">case</span> <span class="number">39</span>:</span><br><span class="line">			<span class="keyword">case</span> <span class="number">68</span>:{</span><br><span class="line">				<span class="built_in">console</span>.log(<span class="string">"å³"</span>);</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			}</span><br><span class="line">		}</span><br><span class="line">	}</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>ç¨å¾®æŒ‰äº†å‡ ä¸‹ï¼Œæµè§ˆå™¨çš„è¾“å‡ºä¹Ÿæ­£å¸¸ï¼Œæ¥ä¸‹æ¥å°±å¼€å§‹å†™ç§»åŠ¨çš„å‡½æ•°äº†ã€‚</p>
<p><img src="https://z3.ax1x.com/2021/09/10/hjfPHg.jpg" alt="console"></p>
<p>ä½†åœ¨æ­¤ä¹‹å‰ï¼Œè¿˜æœ‰ä¸€ä»¶äº‹ã€‚</p>
<p><img src="https://z3.ax1x.com/2021/09/10/hjIFs0.png" alt="havesomethingmore"></p>
<p>ï¼ˆ2ï¼‰ åˆ›å»ºå°è›‡</p>
<p>æˆ‘ä»¬æ²¡æœ‰ä¸œè¥¿å»ç§»åŠ¨å•Šï¼æ‰€ä»¥è¦å†™ä¸€ä¸ªå°è›‡åˆå§‹åŒ–çš„å‡½æ•°ã€‚</p>
<p>æ­¤å¤„snakeCubeç±»æˆ‘åªå†™äº†ä¸ªpositionï¼šabsoluteï¼Œä¸ç„¶æ¯æ¬¡å†™æŒºéº»çƒ¦çš„ã€‚</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">//åˆ›å»ºåˆå§‹çš„è´ªåƒè›‡</span></span><br><span class="line"><span class="function">function <span class="title">createSnake</span><span class="params">()</span></span>{</span><br><span class="line">	game_div = document.getElementsByClassName(<span class="string">"gameDiv"</span>)[<span class="number">0</span>];</span><br><span class="line">	<span class="comment">// è›‡å¤´</span></span><br><span class="line">	snakeHead = document.createElement(<span class="string">"img"</span>);</span><br><span class="line">	snakeHead.setAttribute(<span class="string">"src"</span>,<span class="string">"./img/right.png"</span>)</span><br><span class="line">	snakeHead.className = <span class="string">"snakeCube"</span>;</span><br><span class="line">	game_div.appendChild(snakeHead);</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// è›‡èº«Ã—3</span></span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;<span class="number">3</span>;i++){</span><br><span class="line">		snakeBody = document.createElement(<span class="string">"img"</span>);</span><br><span class="line">		snakeBody.setAttribute(<span class="string">"src"</span>,<span class="string">"./img/body.png"</span>)</span><br><span class="line">		snakeBody.className = <span class="string">"snakeCube"</span>;</span><br><span class="line">		game_div.appendChild(snakeBody);</span><br><span class="line">	}</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>å¦‚æœå•å•åªæ˜¯åˆ›å»ºå…ƒç´ ï¼Œè€Œä¸ç»™å®ƒâ€œå®šä½â€ï¼Œä¹Ÿå°±æ˜¯è®¾å®štopå’Œleftå€¼ï¼Œä»–æ˜¾ç¤ºæ˜¯ä¼šå åœ¨ä¸€èµ·çš„ã€‚</p>
<p><img src="https://z3.ax1x.com/2021/09/10/hjozgs.jpg" alt="error"></p>
<p>ï¼ˆ3ï¼‰ å®šä½</p>
<p>ç»¼ä¸Šæ‰€è¿°ï¼Œè¿˜æœ‰ä¸€ä»¶äº‹ï¼Œå†å†™ä¸€ä¸ªå®šä½çš„å‡½æ•°ã€‚ä¸è¦å¿˜äº†åœ¨createSnakeçš„æœ«å°¾åŠ ä¸Šè¿™ä¸ªå®šä½å‡½æ•°ã€‚</p>
<p><img src="https://z3.ax1x.com/2021/09/10/hjogHK.jpg" alt=""></p>
<figure class="highlight javascript"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// å®šä½è›‡çš„ä½ç½®</span></span><br><span class="line"><span class="keyword">var</span> snakeLocation = [[<span class="number">200</span>, <span class="number">125</span>],[<span class="number">175</span>, <span class="number">125</span>],[<span class="number">150</span>, <span class="number">125</span>],[<span class="number">125</span>, <span class="number">125</span>]]</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">snakeLocate</span>(<span class="params"></span>)</span>{</span><br><span class="line">	<span class="keyword">var</span> snakes = <span class="built_in">document</span>.getElementsByClassName(<span class="string">"snakeCube"</span>);</span><br><span class="line">	<span class="keyword">var</span> len = snakes.length;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;len;i++){</span><br><span class="line">		snakes[i].style.left = snakeLocation[i][<span class="number">0</span>] + <span class="string">"px"</span>;</span><br><span class="line">		snakes[i].style.top = snakeLocation[i][<span class="number">1</span>] + <span class="string">"px"</span>;</span><br><span class="line">	}</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p><img src="https://z3.ax1x.com/2021/09/10/hjbUM9.jpg" alt=""></p>
<p>ï¼ˆ4ï¼‰ ç§»åŠ¨</p>
<p>å¥½äº†ï¼Œå†ç»åƒè¾›ä¸‡è‹¦ï¼Œç»ˆäºå¯ä»¥å‡†å¤‡è®©è¿™ä¸ªå°è›‡åŠ¨èµ·æ¥äº†ã€‚</p>
<p>å…ˆæ¥è§£é‡Šä¸‹è¿™é‡Œçš„é€»è¾‘å§ï¼Œæƒ³æƒ³è´ªåƒè›‡æ˜¯æ€ä¹ˆç§»åŠ¨çš„å‘¢ï¼Ÿ</p>
<p>æ˜¯ä¸æ˜¯å¤´å…ˆåŠ¨ï¼Œç„¶åç´§æ¥ç€ç¬¬ä¸€èŠ‚èº«ä½“ç§»åŠ¨åˆ°åŸå…ˆå¤´çš„ä½ç½®ï¼Œç¬¬äºŒèŠ‚èº«ä½“ç§»åŠ¨åˆ°åŸå…ˆç¬¬ä¸€èŠ‚èº«ä½“çš„ä½ç½®ã€‚å› æ­¤æˆ‘ä»¬åªéœ€è¦æŠŠsnakeLocationæ•°ç»„ä»åå¾€å‰è¦†ç›–å°±è¡Œäº†ï¼ˆä¸èƒ½ä»å…ˆå¾€åå™¢ï¼Œæƒ³æƒ³å°±æ˜ç™½äº†ï¼‰ã€‚</p>
<p>æ­¤å¤–è¿™é‡Œxï¼Œyéƒ½æ˜¯å•ä½é•¿åº¦ï¼Œå› æ­¤è¿˜è¦ä¹˜ä»¥è›‡çš„å¤§å°ã€‚</p>
<figure class="highlight javascript"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// è´ªåƒè›‡ç§»åŠ¨ï¼Œxä¸ºæ¨ªå‘ï¼Œyä¸ºçºµå‘</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">move</span>(<span class="params">x, y</span>)</span>{</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">var</span> i=snakeLen-<span class="number">1</span>;i&gt;<span class="number">0</span>;i--){</span><br><span class="line">		snakeLocation[i][<span class="number">0</span>] = snakeLocation[i-<span class="number">1</span>][<span class="number">0</span>];</span><br><span class="line">		snakeLocation[i][<span class="number">1</span>] = snakeLocation[i-<span class="number">1</span>][<span class="number">1</span>];</span><br><span class="line">	}</span><br><span class="line">	snakeLocation[<span class="number">0</span>][<span class="number">0</span>] = snakeLocation[<span class="number">0</span>][<span class="number">0</span>] + SNAKE_SIZE * x;</span><br><span class="line">	snakeLocation[<span class="number">0</span>][<span class="number">1</span>] = snakeLocation[<span class="number">0</span>][<span class="number">1</span>] + SNAKE_SIZE * y;</span><br><span class="line">	snakeLocate();</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>å¥½åƒç•¥å¾®æœ‰äº›æƒŠæ‚šå˜›ï¼Œä¸è¿‡æ²¡å…³ç³»ï¼Œä¿®æ”¹ä¸€ä¸‹ç§»åŠ¨æ—¶å¤´éƒ¨çš„æ–¹å‘å°±è¡Œã€‚</p>
<p><img src="https://z3.ax1x.com/2021/09/10/hjO7RO.png" alt=""></p>
<p>åªéœ€è¦åœ¨ç§»åŠ¨å‰ä¿®æ”¹æ–¹å‘å˜é‡ï¼Œå®šä½æ—¶åˆ¤æ–­æ–¹å‘å³å¯ï¼Œè¿™é‡Œä»£ç å¤ªå¤šå°±æ”¾å‡ºæ¥ä¸€éƒ¨åˆ†ã€‚</p>
<figure class="highlight javascript"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> snakeHeadDirection = <span class="string">"right"</span>;</span><br><span class="line"><span class="comment">// é”®ç›˜ç›‘å¬äº‹ä»¶ï¼Œ</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">onKeyDown</span>(<span class="params"></span>)</span>{</span><br><span class="line">	<span class="built_in">document</span>.onkeydown = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>{</span><br><span class="line">		<span class="keyword">switch</span>(event.keyCode){</span><br><span class="line">			<span class="comment">// W å’Œ â†‘</span></span><br><span class="line">			<span class="keyword">case</span> <span class="number">38</span>:</span><br><span class="line">			<span class="keyword">case</span> <span class="number">87</span>:{</span><br><span class="line">				snakeHeadDirection = <span class="string">"up"</span>;</span><br><span class="line">				move(<span class="number">0</span>, -<span class="number">1</span>);</span><br><span class="line">				<span class="built_in">console</span>.log(<span class="string">"ä¸Š"</span>);</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			}</span><br><span class="line">		}</span><br><span class="line">	}</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šä½è›‡çš„ä½ç½®</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">snakeLocate</span>(<span class="params"></span>)</span>{</span><br><span class="line">	<span class="keyword">var</span> snakes = <span class="built_in">document</span>.getElementsByClassName(<span class="string">"snakeCube"</span>);</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;snakeLen;i++){</span><br><span class="line">		snakes[i].style.left = snakeLocation[i][<span class="number">0</span>] + <span class="string">"px"</span>;</span><br><span class="line">		snakes[i].style.top = snakeLocation[i][<span class="number">1</span>] + <span class="string">"px"</span>;</span><br><span class="line">	}</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">switch</span>(snakeHeadDirection){</span><br><span class="line">		<span class="keyword">case</span> <span class="string">"up"</span>:{</span><br><span class="line">			snakes[<span class="number">0</span>].setAttribute(<span class="string">"src"</span>,<span class="string">"./img/up.png"</span>)</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		}</span><br><span class="line">	}</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p><img src="https://z3.ax1x.com/2021/09/10/hjzREj.gif" alt=""></p>
<h4 id="2-ç¢°æ’åˆ¤å®š"><a href="#2-ç¢°æ’åˆ¤å®š" class="headerlink" title="2. ç¢°æ’åˆ¤å®š"></a>2. ç¢°æ’åˆ¤å®š</h4><p>ï¼ˆ1ï¼‰ è‡ªèº«ç¢°æ’åˆ¤å®š</p>
<p>è´ªåƒè›‡ç¢°åˆ°è‡ªå·±èº«ä½“å°±åº”è¯¥ç»“æŸæ¸¸æˆäº†ã€‚</p>
<p><img src="https://z3.ax1x.com/2021/09/10/hvSKsS.png" alt=""></p>
<p>è‡ªèº«ç¢°æ’åˆ¤å®šæ— éå°±æ˜¯åˆ¤æ–­å¤´å’Œèº«ä½“æœ‰æ²¡æœ‰ç¢°æ’ï¼Œä¸€ä¸ªfor-loopå°±è¡Œäº†ã€‚</p>
<p>å½“ç„¶ï¼Œæˆ‘ä»¬è¿˜éœ€è¦ä¸€ä¸ªflagï¼Œæ¥åˆ¤æ–­å½“å‰æ˜¯å¦å·²ç»ç»“æŸï¼Œé»˜è®¤æ˜¯falseã€‚</p>
<p>å‡½æ•°å®ç°èµ·æ¥æ¯”è¾ƒè½»æ¾ï¼Œæ³¨æ„æ¯æ¬¡moveéƒ½éœ€åˆ¤æ–­ï¼Œè€Œä¸”å¾—åœ¨â€œå®šä½â€ä¹‹å‰åˆ¤æ–­ã€‚</p>
<figure class="highlight javascript"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// è‡ªèº«ç¢°æ’åˆ¤å®š</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isTouchItself</span>(<span class="params"></span>)</span>{</span><br><span class="line">	<span class="keyword">var</span> left = snakeLocation[<span class="number">0</span>][<span class="number">0</span>];</span><br><span class="line">	<span class="keyword">var</span> top = snakeLocation[<span class="number">0</span>][<span class="number">1</span>];</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">1</span>;i&lt;snakeLen;i++){</span><br><span class="line">		<span class="keyword">if</span>(left == snakeLocation[i][<span class="number">0</span>] &amp;&amp; top == snakeLocation[i][<span class="number">1</span>]){</span><br><span class="line">			gameover = <span class="literal">true</span>;</span><br><span class="line">		}</span><br><span class="line">	}</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>ç„¶åè¿˜å¾—ä¿®æ”¹ä¸€ä¸‹é”®ç›˜ç›‘å¬äº‹ä»¶ï¼Œåªæœ‰gameover = falseæ—¶æ‰ç›‘å¬ç§»åŠ¨äº‹ä»¶ã€‚</p>
<p>è¿™é‡Œæˆ‘å¤šæ·»åŠ äº†ä¸¤ä¸ªæ–¹æ³•ï¼Œä¸€ä¼šå„¿å®ç°ã€‚</p>
<p>ä¸€ä¸ªæ˜¯gameover = trueæ—¶çš„restart()ï¼›ä¸€ä¸ªæ˜¯gameover = falseæ—¶çš„pause()ã€‚</p>
<p>å‰è€…ç”¨äºé‡æ–°å¼€å§‹ï¼Œåè€…ç”¨äºæ¸¸æˆæš‚åœ</p>
<figure class="highlight javascript"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// é”®ç›˜ç›‘å¬äº‹ä»¶</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">onKeyDown</span>(<span class="params"></span>)</span>{</span><br><span class="line">	<span class="built_in">document</span>.onkeydown = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>{</span><br><span class="line">		<span class="keyword">if</span>(!gameover){</span><br><span class="line">			<span class="keyword">switch</span>(event.keyCode){</span><br><span class="line">				<span class="comment">// W å’Œ â†‘</span></span><br><span class="line">				<span class="keyword">case</span> <span class="number">38</span>:</span><br><span class="line">				<span class="keyword">case</span> <span class="number">87</span>:{</span><br><span class="line">					snakeHeadDirection = <span class="string">"up"</span>;</span><br><span class="line">					move(<span class="number">0</span>, -<span class="number">1</span>);</span><br><span class="line">					<span class="built_in">console</span>.log(<span class="string">"ä¸Š"</span>);</span><br><span class="line">					<span class="keyword">break</span>;</span><br><span class="line">				}</span><br><span class="line">				<span class="comment">// A å’Œ â†</span></span><br><span class="line">				<span class="keyword">case</span> <span class="number">37</span>:</span><br><span class="line">				<span class="keyword">case</span> <span class="number">65</span>:{</span><br><span class="line">					snakeHeadDirection = <span class="string">"left"</span>;</span><br><span class="line">					move(-<span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">					<span class="built_in">console</span>.log(<span class="string">"å·¦"</span>);</span><br><span class="line">					<span class="keyword">break</span>;</span><br><span class="line">				}</span><br><span class="line">				<span class="comment">// S å’Œ â†“</span></span><br><span class="line">				<span class="keyword">case</span> <span class="number">40</span>:</span><br><span class="line">				<span class="keyword">case</span> <span class="number">83</span>:{</span><br><span class="line">					snakeHeadDirection = <span class="string">"down"</span>;</span><br><span class="line">					move(<span class="number">0</span>, <span class="number">1</span>);</span><br><span class="line">					<span class="built_in">console</span>.log(<span class="string">"ä¸‹"</span>);</span><br><span class="line">					<span class="keyword">break</span>;</span><br><span class="line">				}</span><br><span class="line">				<span class="comment">// D å’Œ â†’</span></span><br><span class="line">				<span class="keyword">case</span> <span class="number">39</span>:</span><br><span class="line">				<span class="keyword">case</span> <span class="number">68</span>:{</span><br><span class="line">					snakeHeadDirection = <span class="string">"right"</span>;</span><br><span class="line">					move(<span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">					<span class="built_in">console</span>.log(<span class="string">"å³"</span>);</span><br><span class="line">					<span class="keyword">break</span>;</span><br><span class="line">				}</span><br><span class="line">				<span class="comment">// ç©ºæ ¼é”®</span></span><br><span class="line">				<span class="keyword">case</span> <span class="number">32</span>:{</span><br><span class="line">					pause();</span><br><span class="line">					<span class="keyword">break</span>;</span><br><span class="line">				}</span><br><span class="line">			}</span><br><span class="line">		}<span class="keyword">else</span>{</span><br><span class="line">			<span class="keyword">switch</span>(event.keyCode){</span><br><span class="line">				<span class="comment">// ç©ºæ ¼é”®</span></span><br><span class="line">				<span class="keyword">case</span> <span class="number">32</span>:{</span><br><span class="line">					restart();</span><br><span class="line">					<span class="keyword">break</span>;</span><br><span class="line">				}</span><br><span class="line">			}</span><br><span class="line">		}</span><br><span class="line">	}</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>ï¼ˆ2ï¼‰ è¾¹æ¡†ç¢°æ’åˆ¤å®š</p>
<p>è´ªåƒè›‡æ˜¯ä¸èƒ½ç©¿è¶Šè¿™ä¸ªæ¸¸æˆçš„è¾¹æ¡†çš„ï¼Œè‡³äºç¢°åˆ°è¾¹æ¡†æ˜¯ä¼šæ­»ï¼Œè¿˜æ˜¯ä»å¦ä¸€è¾¹å‡ºæ¥å¯ä»¥è‡ªç”±å‘æŒ¥ã€‚</p>
<p>æˆ‘è¿™é‡Œå®ç°çš„æ˜¯ä»å¦ä¸€å¤´å‡ºæ¥çš„æ–¹å¼ã€‚</p>
<p><img src="https://z3.ax1x.com/2021/09/10/hvSWLD.png" alt=""></p>
<p>ç±»ä¼¼è‡ªèº«ç¢°æ’åˆ¤å®šï¼Œä¹Ÿæ˜¯è¦åœ¨â€œå®šä½â€ä¹‹å‰åˆ¤æ–­ã€‚</p>
<figure class="highlight javascript"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// è¾¹ç•Œç¢°æ’åˆ¤å®š</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">crashBoundary</span>(<span class="params"></span>)</span>{</span><br><span class="line">	<span class="keyword">var</span> left = snakeLocation[<span class="number">0</span>][<span class="number">0</span>];</span><br><span class="line">	<span class="keyword">var</span> top = snakeLocation[<span class="number">0</span>][<span class="number">1</span>];</span><br><span class="line">	<span class="keyword">if</span>(left &lt; <span class="number">0</span>){</span><br><span class="line">		snakeLocation[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">625</span>;</span><br><span class="line">	}<span class="keyword">else</span> <span class="keyword">if</span>(left &gt; <span class="number">625</span>){</span><br><span class="line">		snakeLocation[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">	}<span class="keyword">else</span> <span class="keyword">if</span>(top &lt; <span class="number">0</span>){</span><br><span class="line">		snakeLocation[<span class="number">0</span>][<span class="number">1</span>] = <span class="number">425</span>;</span><br><span class="line">	}<span class="keyword">else</span> <span class="keyword">if</span>(top &gt; <span class="number">425</span>){</span><br><span class="line">		snakeLocation[<span class="number">0</span>][<span class="number">1</span>] = <span class="number">0</span>;</span><br><span class="line">	}</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p><img src="https://z3.ax1x.com/2021/09/10/hvwSEV.gif" alt=""></p>
<h4 id="3-æ¸¸æˆç»“æŸ"><a href="#3-æ¸¸æˆç»“æŸ" class="headerlink" title="3.æ¸¸æˆç»“æŸ"></a>3.æ¸¸æˆç»“æŸ</h4><p>ï¼ˆ1ï¼‰ è®¡æ—¶å™¨</p>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬çš„å°è›‡ä¸èƒ½è‡ªå·±åŠ¨ï¼Œéœ€è¦è®¾ç½®ä¸€ä¸ªè®¡æ—¶å™¨ã€‚</p>
<p>å› ä¸ºéœ€è¦æš‚åœå’Œç»§ç»­æ¸¸æˆï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨æ–¹æ³•ä¸­åˆ¤æ–­ï¼Œå¦‚æœå½“å‰æœ‰è®¡æ—¶å™¨å°±å–æ¶ˆå®ƒï¼Œæ²¡æœ‰åˆ™è®¾ç½®ä¸€ä¸ªã€‚</p>
<p>è®°å¾—åœ¨åˆå§‹åŒ–çš„æ—¶å€™è°ƒç”¨ä¸€ä¸‹ã€‚</p>
<figure class="highlight javascript"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// æš‚åœ/ç»§ç»­æ¸¸æˆ</span></span><br><span class="line"><span class="keyword">var</span> timer = <span class="literal">null</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">pause</span>(<span class="params"></span>)</span>{</span><br><span class="line">	<span class="keyword">if</span>(timer == <span class="literal">null</span>){</span><br><span class="line">		timer = <span class="built_in">setInterval</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>{</span><br><span class="line">			<span class="keyword">switch</span>(snakeHeadDirection){</span><br><span class="line">				<span class="keyword">case</span> <span class="string">"up"</span>:{</span><br><span class="line">					move(<span class="number">0</span>, -<span class="number">1</span>);</span><br><span class="line">					<span class="keyword">break</span>;</span><br><span class="line">				}</span><br><span class="line">				<span class="keyword">case</span> <span class="string">"down"</span>:{</span><br><span class="line">					move(<span class="number">0</span>, <span class="number">1</span>);</span><br><span class="line">					<span class="keyword">break</span>;</span><br><span class="line">				}</span><br><span class="line">				<span class="keyword">case</span> <span class="string">"left"</span>:{</span><br><span class="line">					move(-<span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">					<span class="keyword">break</span>;</span><br><span class="line">				}</span><br><span class="line">				<span class="keyword">case</span> <span class="string">"right"</span>:{</span><br><span class="line">					move(<span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">					<span class="keyword">break</span>;</span><br><span class="line">				}</span><br><span class="line">			}</span><br><span class="line">		}, <span class="number">200</span>);</span><br><span class="line">	}<span class="keyword">else</span>{</span><br><span class="line">		<span class="built_in">clearInterval</span>(timer);</span><br><span class="line">		timer = <span class="literal">null</span>;</span><br><span class="line">	}</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>æš‚åœçš„æ—¶å€™ï¼Œå±å¹•ä¸Šç©ºè¡è¡çš„ä¹Ÿä¸å¤§å¥½ï¼Œç»™äººæœ‰ä¸€ç§æ²¡æœ‰æš‚åœçš„é”™è§‰ã€‚æ‰€ä»¥åŠ ä¸€ä¸ªdivï¼Œç¾åŒ–ä¸‹æš‚åœçš„ç•Œé¢ã€‚</p>
<figure class="highlight css"><table><tbody><tr><td class="code"><pre><span class="line"><span class="selector-class">.paused</span>{</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">display</span>: none;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">210px</span>;</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">9</span>; </span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#ffffff</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">205px</span>;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">60px</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">class</span>=<span class="string">"paused"</span>&gt;</span></span><br><span class="line">    æŒ‰ä¸‹ SPACE ç»§ç»­æ¸¸æˆ</span><br><span class="line"><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>
<p><img src="https://z3.ax1x.com/2021/09/10/hvWBxx.png" alt=""></p>
<p>åœ¨ä¿®æ”¹ä¸‹ä¸Šé¢pauseæ–¹æ³•ï¼Œæš‚åœçš„æ—¶å€™æ˜¾ç¤ºæç¤ºï¼Œç»§ç»­æ—¶éšå»æç¤ºã€‚</p>
<figure class="highlight javascript"><table><tbody><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">pause</span>(<span class="params"></span>)</span>{</span><br><span class="line">	<span class="keyword">if</span>(timer == <span class="literal">null</span>){</span><br><span class="line">		timer = <span class="built_in">setInterval</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>{</span><br><span class="line">			<span class="keyword">switch</span>(snakeHeadDirection){</span><br><span class="line">				<span class="keyword">case</span> <span class="string">"up"</span>:{</span><br><span class="line">					move(<span class="number">0</span>, -<span class="number">1</span>);</span><br><span class="line">					<span class="keyword">break</span>;</span><br><span class="line">				}</span><br><span class="line">				<span class="keyword">case</span> <span class="string">"down"</span>:{</span><br><span class="line">					move(<span class="number">0</span>, <span class="number">1</span>);</span><br><span class="line">					<span class="keyword">break</span>;</span><br><span class="line">				}</span><br><span class="line">				<span class="keyword">case</span> <span class="string">"left"</span>:{</span><br><span class="line">					move(-<span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">					<span class="keyword">break</span>;</span><br><span class="line">				}</span><br><span class="line">				<span class="keyword">case</span> <span class="string">"right"</span>:{</span><br><span class="line">					move(<span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">					<span class="keyword">break</span>;</span><br><span class="line">				}</span><br><span class="line">			}</span><br><span class="line">		}, <span class="number">200</span>);</span><br><span class="line">		<span class="keyword">var</span> end = <span class="built_in">document</span>.getElementsByClassName(<span class="string">"paused"</span>)[<span class="number">0</span>]</span><br><span class="line">		end.style.display = <span class="string">"none"</span>;</span><br><span class="line">	}<span class="keyword">else</span>{</span><br><span class="line">		<span class="built_in">clearInterval</span>(timer);</span><br><span class="line">		timer = <span class="literal">null</span>;</span><br><span class="line">		<span class="keyword">var</span> end = <span class="built_in">document</span>.getElementsByClassName(<span class="string">"paused"</span>)[<span class="number">0</span>]</span><br><span class="line">		end.style.display = <span class="string">"block"</span>;</span><br><span class="line">	}</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>ï¼ˆ2ï¼‰ æ¸¸æˆç»“æŸ</p>
<p>åœ¨æ­¤ä¹‹å‰ï¼Œæˆ‘åˆå†™äº†ä¸ªdivï¼Œå¯ä»¥å…ˆçœ‹çœ‹æ•ˆæœã€‚åŒæš‚åœç±»ä¼¼ï¼Œåªéœ€è¦å°†å®ƒçš„displayå€¼é»˜è®¤è®¾ä¸ºnoneï¼Œå¾…åˆ°æ¸¸æˆç»“æŸæ—¶åœ¨æ”¹æˆblockå³å¯ã€‚</p>
<p>å¤„äºç¾è§‚ï¼Œæˆ‘å°†æ¸¸æˆèƒŒæ™¯é¢œè‰²æ”¹æˆäº†æ·±ç°è‰²ã€‚</p>
<figure class="highlight css"><table><tbody><tr><td class="code"><pre><span class="line"><span class="selector-class">.gameover</span>{</span><br><span class="line">    <span class="attribute">display</span>: none;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">190px</span>;</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">9</span>; </span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#ffffff</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">205px</span>;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">60px</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">class</span>=<span class="string">"gameover"</span>&gt;</span></span><br><span class="line">    æ¸¸æˆç»“æŸ</span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    æŒ‰ä¸‹ <span class="tag">&lt;<span class="name">font</span> <span class="attr">color</span>=<span class="string">"#ee3000"</span>&gt;</span>SPACE<span class="tag">&lt;/<span class="name">font</span>&gt;</span> é‡æ–°å¼€å§‹</span><br><span class="line"><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight javascript"><table><tbody><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">final</span>(<span class="params"></span>)</span>{</span><br><span class="line">	<span class="keyword">var</span> end = <span class="built_in">document</span>.getElementsByClassName(<span class="string">"gameover"</span>)[<span class="number">0</span>]</span><br><span class="line">	end.style.display = <span class="string">"none"</span>;</span><br><span class="line">	pause();</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p><img src="https://z3.ax1x.com/2021/09/10/hvgmVJ.png" alt=""></p>
<p>ï¼ˆ3ï¼‰ é‡æ–°å¼€å§‹</p>
<p>é‡æ–°å¼€å§‹éœ€è¦æŠŠæ‰€æœ‰çš„å˜é‡éƒ½é‡ç½®ï¼Œç„¶ååˆ é™¤æ¸¸æˆä¸­çš„è´ªåƒè›‡ï¼Œå†æŠŠæ¸¸æˆç»“æŸçš„æç¤ºéšå»ï¼Œç„¶åå’Œinit()ä¸€æ ·ã€‚</p>
<figure class="highlight javascript"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// é‡æ–°å¼€å§‹</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">restart</span>(<span class="params"></span>)</span>{</span><br><span class="line">	snakeLocation = [[<span class="number">200</span>, <span class="number">125</span>],[<span class="number">175</span>, <span class="number">125</span>],[<span class="number">150</span>, <span class="number">125</span>],[<span class="number">125</span>, <span class="number">125</span>]]</span><br><span class="line">	snakeLen = <span class="number">4</span>;</span><br><span class="line">	snakeHeadDirection = <span class="string">"right"</span>;</span><br><span class="line">	gameover = <span class="literal">false</span>;</span><br><span class="line">	timer = <span class="literal">null</span>;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">var</span> gameDiv = <span class="built_in">document</span>.getElementsByClassName(<span class="string">"gameDiv"</span>)[<span class="number">0</span>];</span><br><span class="line">	<span class="keyword">var</span> children = gameDiv.children;</span><br><span class="line">	<span class="keyword">var</span> childrenLen = children.length;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">var</span> i=childrenLen-<span class="number">1</span>;i&gt;=<span class="number">0</span>;i--){</span><br><span class="line">		gameDiv.removeChild(children[i]);</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">var</span> end = <span class="built_in">document</span>.getElementsByClassName(<span class="string">"gameover"</span>)[<span class="number">0</span>]</span><br><span class="line">	end.style.display = <span class="string">"none"</span>; </span><br><span class="line">	createSnake();</span><br><span class="line">	pause();</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<h4 id="4-åˆ†æ•°ç³»ç»Ÿ"><a href="#4-åˆ†æ•°ç³»ç»Ÿ" class="headerlink" title="4. åˆ†æ•°ç³»ç»Ÿ"></a>4. åˆ†æ•°ç³»ç»Ÿ</h4><p>æœ€åå°±æ˜¯å°è›‡è›‡åƒçš„é£Ÿç‰©å•¦ã€‚</p>
<p>ï¼ˆ1ï¼‰ é£Ÿç‰©æ˜¯åœ¨å±å¹•ä¸­éšæœºå‡ºç°ï¼Œè€Œä¸”åƒå®Œä¸€ä¸ªå°±ä¼šå‡ºç°ä¸‹ä¸€ä¸ªã€‚</p>
<p>åˆ›å»ºé£Ÿç‰©åŒåˆ›å»ºå°è›‡ç±»ä¼¼ï¼Œåªæ˜¯å¤šäº†ä¸ªrandomå‡½æ•°ï¼Œè¦ç¡®ä¿é£Ÿç‰©éšæœºåœ¨æ¸¸æˆç•Œé¢ä¸­ã€‚</p>
<figure class="highlight javascript"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// åˆ›å»ºé£Ÿç‰©</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createFood</span>(<span class="params"></span>)</span>{</span><br><span class="line">	foodLeft = <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * COLS);</span><br><span class="line">	foodTop = <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * ROWS);</span><br><span class="line">	<span class="keyword">var</span> gameDiv = <span class="built_in">document</span>.getElementsByClassName(<span class="string">"gameDiv"</span>)[<span class="number">0</span>];</span><br><span class="line">	<span class="keyword">var</span> food = <span class="built_in">document</span>.createElement(<span class="string">"img"</span>);</span><br><span class="line">	food.className = <span class="string">"foodCube"</span>;</span><br><span class="line">	food.setAttribute(<span class="string">"src"</span>,<span class="string">"./img/food.png"</span>);</span><br><span class="line">	food.style.top = foodTop * SNAKE_SIZE + <span class="string">"px"</span>;</span><br><span class="line">	food.style.left = foodLeft * SNAKE_SIZE + <span class="string">"px"</span>;</span><br><span class="line">	gameDiv.appendChild(food);</span><br><span class="line">	updateData();</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>ï¼ˆ2ï¼‰ åƒä¸€ä¸ªé•¿åº¦+1ï¼Œåˆ†æ•°+10ï¼Œä¸”å°è›‡çš„èº«ä½“+1ã€‚</p>
<p>è›‡å¤´ç¢°åˆ°é£Ÿç‰©å³åƒæ‰ï¼Œåˆ é™¤è¯¥imgï¼Œç„¶åç”Ÿæˆæ–°çš„é£Ÿç‰©ï¼›</p>
<figure class="highlight javascript"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// åƒæ‰é£Ÿç‰©</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">eatFood</span>(<span class="params"></span>)</span>{</span><br><span class="line">	<span class="keyword">var</span> left = snakeLocation[<span class="number">0</span>][<span class="number">0</span>];</span><br><span class="line">	<span class="keyword">var</span> top = snakeLocation[<span class="number">0</span>][<span class="number">1</span>];</span><br><span class="line">	<span class="keyword">if</span>(foodLeft == left &amp;&amp; foodTop == top){</span><br><span class="line">		snakeLen++;</span><br><span class="line">		score += <span class="number">10</span>;</span><br><span class="line">		<span class="keyword">var</span> food = <span class="built_in">document</span>.getElementsByClassName(<span class="string">"foodCube"</span>)[<span class="number">0</span>];</span><br><span class="line">		<span class="keyword">var</span> gameDiv = <span class="built_in">document</span>.getElementsByClassName(<span class="string">"gameDiv"</span>)[<span class="number">0</span>];</span><br><span class="line">		gameDiv.removeChild(food);</span><br><span class="line">		createFood();</span><br><span class="line">		grow();</span><br><span class="line">	}</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight javascript"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// é•¿èº«ä½“</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">grow</span>(<span class="params"></span>)</span>{</span><br><span class="line">	<span class="keyword">var</span> gameDiv = <span class="built_in">document</span>.getElementsByClassName(<span class="string">"gameDiv"</span>)[<span class="number">0</span>];</span><br><span class="line">	<span class="keyword">var</span> body = <span class="built_in">document</span>.createElement(<span class="string">"img"</span>);</span><br><span class="line">	body.className = <span class="string">"snakeCube"</span>;</span><br><span class="line">	body.setAttribute(<span class="string">"src"</span>,<span class="string">"./img/body.png"</span>);</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// å½“å‰æœ€åä¸€ä¸ªèº«ä½“çš„ä½ç½®</span></span><br><span class="line">	<span class="keyword">var</span> lastTop = snakeLocation[snakeLen-<span class="number">2</span>][<span class="number">1</span>];</span><br><span class="line">	<span class="keyword">var</span> lastLeft = snakeLocation[snakeLen-<span class="number">2</span>][<span class="number">0</span>];</span><br><span class="line">	<span class="comment">// æ–°çš„èº«ä½“çš„ä½ç½®</span></span><br><span class="line">	<span class="keyword">var</span> bodyTop = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">var</span> bodyLeft = <span class="number">0</span>;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">switch</span>(snakeHeadDirection){</span><br><span class="line">		<span class="keyword">case</span> <span class="string">"up"</span>:{</span><br><span class="line">			bodyTop = lastTop + <span class="number">1</span>;</span><br><span class="line">			bodyLeft = lastLeft;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		}</span><br><span class="line">		<span class="keyword">case</span> <span class="string">"down"</span>:{</span><br><span class="line">			bodyTop = lastTop - <span class="number">1</span>;</span><br><span class="line">			bodyLeft = lastLeft;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		}</span><br><span class="line">		<span class="keyword">case</span> <span class="string">"left"</span>:{</span><br><span class="line">			bodyTop = lastTop;</span><br><span class="line">			bodyLeft = lastLeft + <span class="number">1</span>;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		}</span><br><span class="line">		<span class="keyword">case</span> <span class="string">"right"</span>:{</span><br><span class="line">			bodyTop = lastTop;</span><br><span class="line">			bodyLeft = lastLeft - <span class="number">1</span>;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		}</span><br><span class="line">	}</span><br><span class="line">	body.style.top = bodyTop * SNAKE_SIZE + <span class="string">"px"</span>;</span><br><span class="line">	body.style.left = bodyLeft * SNAKE_SIZE + <span class="string">"px"</span>;</span><br><span class="line">	snakeLocation[snakeLen-<span class="number">1</span>] = [bodyLeft, bodyTop];</span><br><span class="line">	gameDiv.appendChild(body);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>ä¹‹åæ›´æ–°ç•Œé¢åˆ†æ•°</p>
<figure class="highlight javascript"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// æ›´æ–°ç•Œé¢ä¸­åˆ†æ•°å’Œé•¿åº¦</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">updateData</span>(<span class="params"></span>)</span>{</span><br><span class="line">	<span class="keyword">var</span> scoreH1 = <span class="built_in">document</span>.getElementsByClassName(<span class="string">"score"</span>)[<span class="number">0</span>];</span><br><span class="line">	<span class="keyword">var</span> lengthH1 = <span class="built_in">document</span>.getElementsByClassName(<span class="string">"length"</span>)[<span class="number">0</span>];</span><br><span class="line">	scoreH1.innerHTML = <span class="string">"åˆ†æ•°ï¼š"</span> + score;</span><br><span class="line">	lengthH1.innerHTML = <span class="string">"é•¿åº¦ï¼š"</span> + snakeLen;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>ï¼ˆ3ï¼‰ åˆ†æ•°è¶Šé«˜ï¼Œå°è›‡ç§»åŠ¨é€Ÿåº¦è¶Šå¿«ã€‚</p>
<p>ä¸‰å¥ä»£ç å³å¯ï¼Œè®°å¾—æ·»åŠ åˆ°é€‚å½“çš„ä½ç½®ï¼Œè¿™é‡Œå°±ä¸ç»™å‡ºæ¥äº†ã€‚</p>
<figure class="highlight javascript"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> speed = <span class="number">1</span>;</span><br><span class="line">speed += score / <span class="number">10</span> * <span class="number">0.05</span>;</span><br><span class="line"><span class="built_in">setInterval</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>{}, <span class="number">100</span> / speed);</span><br></pre></td></tr></tbody></table></figure>
<h4 id="5-æ¸¸æˆæ€§"><a href="#5-æ¸¸æˆæ€§" class="headerlink" title="5. æ¸¸æˆæ€§"></a>5. æ¸¸æˆæ€§</h4><p>è‡³æ­¤ï¼Œè´ªåƒè›‡çš„ä»£ç å·²å…¨éƒ¨å†™å®Œï¼Œä¹‹åå¯ä»¥æŒ‰è‡ªå·±çš„æƒ³æ³•æ·»åŠ ä¸€äº›æ¸¸æˆçš„è§„åˆ™ï¼Œä¾‹å¦‚å¯ä»¥æ·»åŠ ä¸€ä¸ªçº¢è‰²æœå®çš„è®¾å®šï¼Œæ•ˆæœæ˜¯ç»¿è‰²æœå®çš„ä¸‰å€ï¼Œå‡ºç°æ¦‚ç‡10%ã€‚æˆ‘å°±ä¸å®ç°äº†ï¼Œç°åœ¨å·²ç»å‡Œæ™¨äº†ï¼Œç´¯äº†ã€‚</p>
<p>æ¸¸æˆè¿è¡Œç”»é¢å¦‚ä¸‹ã€‚</p>
<p><img src="https://z3.ax1x.com/2021/09/11/hvLwJf.gif" alt=""></p>
<p>ä»¥åå†™å°æ¸¸æˆå°±ä¸å†™è¿™ä¹ˆè¯¦ç»†äº†ï¼Œè¿™ä¹Ÿå¤ªç´¯äº†<span class="github-emoji" style="display:inline;vertical-align:middle"><span>ğŸ˜­</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f62d.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></p>
]]></content>
      <categories>
        <category>Game</category>
      </categories>
      <tags>
        <tag>æ¸¸æˆåˆ¶ä½œ</tag>
      </tags>
  </entry>
  <entry>
    <title>å¤šé¡¹å¼å›å½’</title>
    <url>/2021/09/27/%E5%A4%9A%E9%A1%B9%E5%BC%8F%E5%9B%9E%E5%BD%92/</url>
    <content><![CDATA[<h2 id="ç®—æ³•æ€æƒ³"><a href="#ç®—æ³•æ€æƒ³" class="headerlink" title="ç®—æ³•æ€æƒ³"></a>ç®—æ³•æ€æƒ³</h2><p>å¦‚æœä½ çš„æ•°æ®æ¯”ç›´çº¿æ›´å¤æ‚æ€ä¹ˆåŠï¼Ÿä¾‹å¦‚æŠ›ç‰©çº¿ã€‚æ˜¾ç„¶ <a href="/2021/09/13/çº¿æ€§å›å½’">çº¿æ€§å›å½’</a> æ— æ³•èƒœä»»è¿™ä¸ªå·¥ä½œï¼Œä½†æˆ‘ä»¬åªéœ€è¦ç¨åŠ ä¿®æ”¹ï¼Œå°†æ¯ä¸ªç‰¹å¾çš„å¹‚æ¬¡æ–¹ä½œä¸ºä¸€ä¸ªæ–°ç‰¹å¾å³å¯ï¼Œå¤§è‡´ä¸<code>çº¿æ€§å›å½’</code>ç±»ä¼¼ï¼Œä¸è¿‡æ˜¯å¤šå…ƒä¸€æ¬¡å’Œå¤šå…ƒå¤šæ¬¡çš„åŒºåˆ«ã€‚</p>
<p>çº¿æ€§å›å½’å‡è®¾ç›®æ ‡æ‹Ÿåˆæ›²çº¿å‡½æ•°ä¸º$y = w_1x_1 + w_2x_2 + w_3x_3 + â€¦ + b$ï¼Œå…¶ä¸­ $w_n$ ä¸ºç³»æ•° $x_n$ ä¸ºç‰¹å¾ã€‚</p>
<p>è€Œå¤šé¡¹å¼å›å½’å‡è®¾ç›®æ ‡æ‹Ÿåˆæ›²çº¿ä¸º$y = w_1x_1^n + w_2x_1^{n-1}x_2 + w_3x_1^{n-2}x_2^2 + â€¦ + w_nx_2^n$ï¼Œè¿™é‡Œå‡ºäºç®€ä¾¿åªå†™äº†ä¸¤ä¸ªæœªçŸ¥æ•°çš„æƒ…å†µã€‚</p>
<p><br></p>
<h2 id="å®ä¾‹"><a href="#å®ä¾‹" class="headerlink" title="å®ä¾‹"></a>å®ä¾‹</h2><p>è¿™é‡Œæˆ‘ç”¨çš„æ˜¯ä¸‰æ¬¡å‡½æ•°çš„å›¾åƒå¤–åŠ äº†ç‚¹å™ªå£°ï¼Œç”¨<code>çº¿æ€§å›å½’</code>è‚¯å®šæ˜¯æ‹Ÿåˆä¸äº†çš„ã€‚</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">%matplotlib inline</span><br><span class="line"></span><br><span class="line">x = np.arange(-<span class="number">10</span>, <span class="number">10</span>, <span class="number">0.1</span>)</span><br><span class="line">y = <span class="number">2.6</span> * x ** <span class="number">3</span> - <span class="number">3.14</span> * x ** <span class="number">2</span> - <span class="number">8.8</span> * x + np.random.normal(<span class="number">0</span>, <span class="number">700</span>, (<span class="number">200</span>, ))</span><br><span class="line"></span><br><span class="line">plt.scatter(x, y)</span><br><span class="line">plt.show()</span><br></pre></td></tr></tbody></table></figure>
<p><img src="https://z3.ax1x.com/2021/09/27/4RC9un.png" alt=""></p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">X = x.reshape([-<span class="number">1</span>, <span class="number">1</span>])</span><br><span class="line">X = np.hstack([X ** <span class="number">3</span>, X ** <span class="number">2</span>, X])</span><br><span class="line">X_b = np.hstack([np.ones([<span class="built_in">len</span>(y), <span class="number">1</span>]), X])</span><br><span class="line"><span class="comment"># X [200, 3]</span></span><br><span class="line"><span class="built_in">print</span>(X.shape)</span><br></pre></td></tr></tbody></table></figure>
<p>å¦‚ç®—æ³•æ€æƒ³æ‰€è¿°ï¼Œæ¢¯åº¦ä¸‹é™çš„ä»£ç æ˜¯æ²¡æœ‰æ”¹å˜çš„ï¼Œåªæ˜¯æ·»åŠ äº†ç‰¹å¾çš„å¹‚æŒ‡æ•°ä½œä¸ºé¢å¤–çš„ç‰¹å¾å€¼ã€‚</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">J</span>(<span class="params">X_b, y, theta</span>):</span></span><br><span class="line">    <span class="keyword">return</span> np.mean((X_b.dot(theta) - y) ** <span class="number">2</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">DJ</span>(<span class="params">X_b, y, theta</span>):</span></span><br><span class="line">    <span class="keyword">return</span> X_b.T.dot((X_b.dot(theta) - y)) * <span class="number">2</span> / <span class="built_in">len</span>(y);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">gradient_descent</span>(<span class="params">X_b, y, theta, eta = <span class="number">0.01</span>, n_iters = <span class="number">1e4</span>, epsilon = <span class="number">1e-6</span></span>):</span></span><br><span class="line">    i_iter = <span class="number">0</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">while</span> i_iter &lt; n_iters:</span><br><span class="line">        gradient = DJ(X_b, y, theta)</span><br><span class="line">        last_theta = theta</span><br><span class="line">        theta = theta - eta * gradient</span><br><span class="line">        <span class="keyword">if</span> np.<span class="built_in">abs</span>(J(X_b, y, theta) - J(X_b, y, last_theta)) &lt; epsilon:</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        i_iter += <span class="number">1</span></span><br><span class="line">        </span><br><span class="line">    <span class="keyword">return</span> theta</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">initial_theta = np.zeros(X_b.shape[<span class="number">1</span>])</span><br><span class="line">theta = gradient_descent(X_b, y, initial_theta, eta = <span class="number">1e-6</span>, n_iters = <span class="number">1e5</span>)</span><br></pre></td></tr></tbody></table></figure>
<p>å¾—å‡º theta = array([-12.65120346,   2.89719563,  -3.12234806, -15.72650818])</p>
<p>ä¹ŸåŸºæœ¬å¯¹åº”äº†æˆ‘é¢„è®¾çš„å‡½æ•°ç³»æ•°[2.6, -3.14, -8.8]</p>
<p>æ³¨ï¼štheta æ¯ä¸€é¡¹åˆ†åˆ«å¯¹åº”äº†æˆªè·ï¼Œ$x^3$ çš„ç³»æ•°ï¼Œ$x^2$ çš„ç³»æ•°ï¼Œ$x$ çš„ç³»æ•°ã€‚</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">pred_y = theta[<span class="number">1</span>] * x ** <span class="number">3</span> + theta[<span class="number">2</span>] * x ** <span class="number">2</span> + theta[<span class="number">3</span>] * x + theta[<span class="number">0</span>]</span><br><span class="line">plt.scatter(x, y)</span><br><span class="line">plt.plot(x, pred_y, color = <span class="string">"r"</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></tbody></table></figure>
<p><img src="https://z3.ax1x.com/2021/09/27/4RPGd0.png" alt=""></p>
<p><br></p>
<h2 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h2><p>éœ€è¦æ³¨æ„çš„æ˜¯å¤šé¡¹å¼åŒ–æ˜¯æˆ<code>é˜¶ä¹˜å¼</code>çš„å¢é•¿ï¼Œæ¯”æŒ‡æ•°çˆ†ç‚¸æ›´å¯æ€•ï¼</p>
<p>$\frac{(n + d)!}{d!n!}$ï¼Œå…¶ä¸­ n ä¸ºåŸæœ¬ç‰¹å¾æ•°ï¼Œd ä¸ºæœ€é«˜æ¬¡æ•°ã€‚</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">PolynomialRegression</span>:</span></span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, degree</span>):</span></span><br><span class="line">        self.degree = degree</span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">fit</span>(<span class="params">self, X, y, eta = <span class="number">0.01</span>, n_iters = <span class="number">1e4</span>, epsilon = <span class="number">1e-6</span></span>):</span></span><br><span class="line">        self.X = self._getPolynomialFeatures(X, <span class="number">0</span>, np.ones([<span class="built_in">len</span>(X), <span class="number">1</span>]), self.degree)</span><br><span class="line">        </span><br><span class="line">        initial_theta = np.zeros([self.X.shape[<span class="number">1</span>]])</span><br><span class="line">        theta = self._gradient_descent(self.X, y, initial_theta, eta, n_iters, epsilon)</span><br><span class="line">        self.theta = theta</span><br><span class="line">        self.coefficient = theta[<span class="number">1</span>:]</span><br><span class="line">        self.intercept = theta[<span class="number">0</span>]</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># å¤šé¡¹å¼åŒ–</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">_getPolynomialFeatures</span>(<span class="params">self, X, start, col_val, degree</span>):</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">dfs</span>(<span class="params">X, result, start, col_val, degree</span>):</span></span><br><span class="line">            result.append(col_val)</span><br><span class="line">            <span class="keyword">if</span>(degree == <span class="number">0</span>):</span><br><span class="line">                <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(start, X.shape[<span class="number">1</span>]):</span><br><span class="line">                dfs(X, result, start, col_val * X[:, i].reshape([-<span class="number">1</span>, <span class="number">1</span>]), degree - <span class="number">1</span>)</span><br><span class="line">        </span><br><span class="line">        result = []</span><br><span class="line">        dfs(X, result, <span class="number">0</span>, np.ones([<span class="built_in">len</span>(X), <span class="number">1</span>]), degree)</span><br><span class="line">        <span class="keyword">return</span> np.squeeze(np.array(result), -<span class="number">1</span>).T</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">predict</span>(<span class="params">self, X</span>):</span></span><br><span class="line">        X_b = self._getPolynomialFeatures(X, <span class="number">0</span>, np.ones([<span class="built_in">len</span>(X), <span class="number">1</span>]), self.degree)</span><br><span class="line">        y_pred = X_b.dot(self.theta)</span><br><span class="line">        <span class="keyword">return</span> y_pred</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">score</span>(<span class="params">self, X, y</span>):</span></span><br><span class="line">        y_pred = self.predict(X)</span><br><span class="line">        <span class="keyword">return</span> np.mean((y - y_pred) ** <span class="number">2</span>)</span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">_gradient_descent</span>(<span class="params">self, X_b, y, theta, eta, n_iters, epsilon</span>):</span></span><br><span class="line">        </span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">J</span>(<span class="params">X_b, y, theta</span>):</span></span><br><span class="line">            <span class="keyword">return</span> np.mean((X_b.dot(theta) - y) ** <span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">DJ</span>(<span class="params">X_b, y, theta</span>):</span></span><br><span class="line">            <span class="keyword">return</span> X_b.T.dot((X_b.dot(theta) - y)) * <span class="number">2</span> / <span class="built_in">len</span>(y);</span><br><span class="line">        </span><br><span class="line">        i_iter = <span class="number">0</span></span><br><span class="line">    </span><br><span class="line">        <span class="keyword">while</span> i_iter &lt; n_iters:</span><br><span class="line">            gradient = DJ(X_b, y, theta)</span><br><span class="line">            last_theta = theta</span><br><span class="line">            theta = theta - eta * gradient</span><br><span class="line">            <span class="keyword">if</span> np.<span class="built_in">abs</span>(J(X_b, y, theta) - J(X_b, y, last_theta)) &lt; epsilon:</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            i_iter += <span class="number">1</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> theta</span><br></pre></td></tr></tbody></table></figure>
<p><br></p>
<h2 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h2><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">poly_reg = PolynomialRegression(<span class="number">3</span>)</span><br><span class="line">poly_reg.fit(x.reshape([-<span class="number">1</span>, <span class="number">1</span>]), y, eta = <span class="number">1e-6</span>, n_iters = <span class="number">1e5</span>)</span><br><span class="line"></span><br><span class="line">theta = poly_reg.theta</span><br><span class="line">pred_y = theta[<span class="number">3</span>] * x ** <span class="number">3</span> + theta[<span class="number">2</span>] * x ** <span class="number">2</span> + theta[<span class="number">1</span>] * x + theta[<span class="number">0</span>]</span><br><span class="line">plt.scatter(x, y)</span><br><span class="line">plt.plot(x, pred_y, color = <span class="string">"r"</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></tbody></table></figure>
<p>ç»“æœå¦‚å‡ºä¸€è¾™ã€‚</p>
<p><img src="https://z3.ax1x.com/2021/09/28/4fChIP.png" alt=""></p>
]]></content>
      <categories>
        <category>Machine Learning</category>
      </categories>
  </entry>
  <entry>
    <title>æ¢¯åº¦ä¸‹é™æ³•</title>
    <url>/2021/09/12/%E6%A2%AF%E5%BA%A6%E4%B8%8B%E9%99%8D%E6%B3%95/</url>
    <content><![CDATA[<h2 id="ç®—æ³•æ€æƒ³"><a href="#ç®—æ³•æ€æƒ³" class="headerlink" title="ç®—æ³•æ€æƒ³"></a>ç®—æ³•æ€æƒ³</h2><p>æ¢¯åº¦ä¸‹é™æ³•æ˜¯ä¸€ç§éå¸¸é€šç”¨çš„ä¼˜åŒ–ç®—æ³•ï¼Œèƒ½å¤Ÿä¸ºå¤§èŒƒå›´çš„é—®é¢˜æ‰¾åˆ°æœ€ä¼˜è§£ã€‚æ¢¯åº¦ä¸‹é™çš„ä¸­å¿ƒæ€æƒ³å°±æ˜¯è¿­ä»£åœ°è°ƒæ•´å‚æ•°ä»è€Œä½¿æˆæœ¬å‡½æ•°æœ€å°åŒ–ã€‚ï¼ˆPSï¼šæ¢¯åº¦ä¸Šå‡æ³•è§£å†³æœ€å¤§åŒ–é—®é¢˜ï¼‰</p>
<p><img src="https://z3.ax1x.com/2021/09/12/4p2RAS.png" alt=""></p>
<p>æ–œç‡ä¸ºæ­£ï¼Œä»£è¡¨å•è°ƒé€’å¢ï¼Œè¯´æ˜æå€¼ç‚¹åœ¨å·¦è¾¹ï¼›</p>
<p>æ–œç‡ä¸ºè´Ÿï¼Œä»£è¡¨å•è°ƒé€’å‡ï¼Œè¯´æ˜æå€¼ç‚¹åœ¨å³è¾¹ã€‚</p>
<p>å› æ­¤æˆ‘ä»¬å¯ä»¥é€šè¿‡å‡å»å¯¼æ•°æ¥æ‰¾åˆ°æœ€å€¼ç‚¹ï¼ˆå‡å¦‚æå€¼ç‚¹åªæœ‰ä¸€ä¸ªï¼‰ï¼Œå› æ­¤è¢«ç§°ä¸ºæ¢¯åº¦ä¸‹é™æ³•ã€‚</p>
<p>ä¸è¿‡ç”±äºæ¯ä¸ªç‚¹ä¸Šçš„å¯¼æ•°æ˜¯å›ºå®šçš„ï¼Œä¾‹å¦‚æ¥è¿‘ç¬”ç›´çš„ç›´çº¿æ–œç‡å°±å‡ ä¹æ˜¯æ— ç©·å¤§ï¼Œå¦‚æœæˆ‘ä»¬ç›´æ¥å‡å»å¯¼æ•°ï¼Œæ˜¾ç„¶å°±ä¸å¤§åˆé€‚ã€‚</p>
<p>æ‰€ä»¥å°±å¼•ç”³å‡ºäº†etaï¼Œä¹Ÿè¢«ç§°ä½œå­¦ä¹ ç‡ï¼ˆlearning rateï¼‰ã€‚ç°åœ¨æˆ‘ä»¬åªéœ€å‡å»eta * gradientå°±å¯ä»¥äº†ï¼Œé€šè¿‡è°ƒæ•´etaçš„å¤§å°æ¥æ”¹å˜æ‹Ÿåˆçš„é€Ÿåº¦</p>
<p>etaè¿‡å¤§å¯èƒ½å¯¼è‡´æ— æ³•æ‹Ÿåˆï¼Œetaè¿‡å°åˆ™ä¼šæ‹Ÿåˆè¿‡æ…¢ï¼Œä¸‹é¢ä¼šæœ‰å®ä¾‹å±•ç¤ºã€‚</p>
<p><br></p>
<h2 id="å®ä¾‹"><a href="#å®ä¾‹" class="headerlink" title="å®ä¾‹"></a>å®ä¾‹</h2><p>è¿™æ˜¯etaé€‚ä¸­çš„æƒ…å†µï¼ŒåªèŠ±äº†26æ­¥å°±æ‰¾åˆ°äº†æœ€å°å€¼ã€‚</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">start = -<span class="number">10.0</span></span><br><span class="line">epsilon = <span class="number">1e-5</span></span><br><span class="line">eta = <span class="number">0.4</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 26 steps</span></span><br><span class="line">plot_gradient_tracks(start, epsilon, eta)</span><br></pre></td></tr></tbody></table></figure>
<p><img src="https://z3.ax1x.com/2021/09/12/4pIdbR.png" alt=""></p>
<p>è¿™é‡Œetaå°±åå°äº†ï¼Œè™½ç„¶ä¹Ÿèƒ½æ‰¾åˆ°æœ€å°å€¼ï¼Œä½†è¿è¡Œäº†875æ¬¡ï¼Œæ˜¯ä¸Šé¢çš„äº”åå¤šå€ã€‚</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">start = -<span class="number">10.0</span></span><br><span class="line">epsilon = <span class="number">1e-5</span></span><br><span class="line">eta = <span class="number">0.01</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 875 steps</span></span><br><span class="line">plot_gradient_tracks(start, epsilon, eta)</span><br></pre></td></tr></tbody></table></figure>
<p><img src="https://z3.ax1x.com/2021/09/12/4pTA1S.png" alt=""></p>
<p>è¿™é‡Œetaä¹Ÿç®—æ˜¯é€‚ä¸­çš„æƒ…å†µï¼Œåªä¸è¿‡å›¾åƒä¼šæ¯”è¾ƒç‰¹æ®Šï¼Œå·¦å³åå¤æ¨ªè·³ï¼Œå› æ­¤æˆ‘ä¹Ÿæ‹¿å‡ºæ¥å½“ä¸ªæ ·ä¾‹ã€‚</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">start = -<span class="number">10.0</span></span><br><span class="line">epsilon = <span class="number">1e-5</span></span><br><span class="line">eta = <span class="number">1.5</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 21 steps</span></span><br><span class="line">plot_gradient_tracks(start, epsilon, eta)</span><br></pre></td></tr></tbody></table></figure>
<p><img src="https://z3.ax1x.com/2021/09/12/4pTtB9.png" alt=""></p>
<p>è¿™æ˜¯æœ€å·®çš„æƒ…å†µï¼Œetaè¿‡å¤§ï¼Œå¯¼è‡´yè¶Šæ¥è¶Šå¤§ï¼Œå·²ç»æ— æ³•å–å¾—æœ€å°å€¼äº†ã€‚</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">start = -<span class="number">10.0</span></span><br><span class="line">epsilon = <span class="number">1e-5</span></span><br><span class="line">eta = <span class="number">2.5</span></span><br><span class="line"></span><br><span class="line">plot_gradient_tracks(start, epsilon, eta, max_len = <span class="number">4</span>)</span><br></pre></td></tr></tbody></table></figure>
<p><img src="https://z3.ax1x.com/2021/09/12/4p7FER.png" alt=""></p>
<p><br></p>
<p>å½“ç„¶ä¹Ÿä¼šæœ‰å­˜åœ¨å¤šä¸ªæå€¼ç‚¹çš„æƒ…å†µï¼Œä¸‹å›¾ä¸­å¦‚æœé€‰æ‹©å·¦è¾¹ä½œä¸ºèµ·å§‹ç‚¹ï¼ŒåŸºæœ¬å°±æ‰¾ä¸åˆ°å…¨å±€æœ€ä¼˜è§£äº†ï¼Œåªèƒ½æ‰¾åˆ°å±€éƒ¨æœ€ä¼˜è§£ã€‚</p>
<p>ä¸è¿‡å¹¸å¥½ï¼Œä¸€èˆ¬ä½¿ç”¨MSE(Mean Square Error)ä½œä¸ºæˆæœ¬å‡½æ•°ï¼Œè€ŒMSEæ°å¥½æ˜¯ä¸ªå‡¸å‡½æ•°ï¼Œè¿™å°±æ„å‘³ç€è¿æ¥æ›²çº¿ä¸Šä»»æ„ä¸¤ç‚¹çš„çº¿æ®µæ°¸è¿œä¹Ÿä¸ä¼šè·Ÿæ›²çº¿ç›¸äº¤ã€‚ä¹Ÿå°±æ˜¯è¯´ä¸å­˜åœ¨å±€éƒ¨æœ€å°å€¼ï¼Œåªæœ‰ä¸€ä¸ªå…¨å±€æœ€å°å€¼ã€‚å®ƒåŒæ—¶ä¹Ÿæ˜¯ä¸€ä¸ªè¿ç»­å‡½æ•°ï¼Œæ‰€ä»¥æ–œç‡ä¸ä¼šäº§ç”Ÿé™¡å³­çš„å˜åŒ–ã€‚</p>
<p>è¿™ä¸¤ç‚¹ä¿è¯çš„ç»“è®ºæ˜¯ï¼šå³ä¾¿æ˜¯ä¹±èµ°ï¼Œæ¢¯åº¦ä¸‹é™ä¹Ÿå¯ä»¥è¶‹è¿‘åˆ°å…¨å±€æœ€å°å€¼ï¼ˆåªè¦ç­‰å¾…æ—¶é—´è¶³å¤Ÿé•¿ï¼Œå­¦ä¹ ç‡ä¹Ÿä¸æ˜¯å¤ªé«˜ï¼‰ã€‚</p>
<p><img src="https://z3.ax1x.com/2021/09/13/4CjCQI.png" alt=""></p>
<h2 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h2><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç›®æ ‡å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">J</span>(<span class="params">x</span>):</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0.5</span> * x ** <span class="number">2</span> + <span class="number">3.5</span> * x + <span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç›®æ ‡å¯¼å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">DJ</span>(<span class="params">x</span>):</span></span><br><span class="line">    <span class="keyword">return</span> x + <span class="number">3.5</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç»˜åˆ¶å¯¼æ•°è½¨è¿¹æ›²çº¿</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">plot_gradient_tracks</span>(<span class="params">start, epsilon, eta, max_len = <span class="number">1e4</span></span>):</span></span><br><span class="line">    a = start</span><br><span class="line"></span><br><span class="line">    historys = []</span><br><span class="line">    <span class="keyword">while</span>(max_len &gt; <span class="number">0</span>):</span><br><span class="line">        last = J(a)</span><br><span class="line">        historys.append([a, J(a)])</span><br><span class="line">        a = a - eta * DJ(a)</span><br><span class="line">        <span class="keyword">if</span> np.<span class="built_in">abs</span>(last - J(a)) &lt; epsilon:</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        max_len -= <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    historys = np.array(historys)</span><br><span class="line">    plt.plot(x, y)</span><br><span class="line">    plt.plot(historys[:, <span class="number">0</span>], historys[:, <span class="number">1</span>])</span><br><span class="line">    plt.show()</span><br><span class="line">    <span class="built_in">print</span>(historys.shape[<span class="number">0</span>])</span><br><span class="line">    <span class="keyword">return</span> historys[-<span class="number">1</span>]</span><br></pre></td></tr></tbody></table></figure>
<p><br></p>
<h2 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h2><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">start = -<span class="number">10.0</span></span><br><span class="line">epsilon = <span class="number">1e-5</span></span><br><span class="line">eta = <span class="number">1.5</span></span><br><span class="line"></span><br><span class="line">plot_gradient_tracks(start, epsilon, eta)		<span class="comment"># array([-3.5000062, -4.125])</span></span><br></pre></td></tr></tbody></table></figure>
<p>å°†ç›®æ ‡å‡½æ•°é…æ–¹å¾—ï¼Œ$\frac{1}{2}x^2 + \frac{7}{2}x + 2 = \frac{1}{2}[(x + \frac{7}{2})^2 + \frac{33}{4}]$</p>
<p>å¯ä»¥å¾—å‡ºåœ¨$x = -\frac{7}{2}$å¤„ï¼Œå–å¾—æœ€å°å€¼$y = \frac{33}{8}$</p>
<p>ä¸æµ‹è¯•ç»“æœåŸºæœ¬ä¸€è‡´ã€‚</p>
<p>æ³¨ï¼šè®¡ç®—ç»“æœä¸å¯èƒ½ä¸ç†è®ºå€¼ç›¸ç­‰ã€‚</p>
]]></content>
      <categories>
        <category>Machine Learning</category>
      </categories>
  </entry>
  <entry>
    <title>æ•°æ®å½’ä¸€åŒ–</title>
    <url>/2021/09/14/%E6%95%B0%E6%8D%AE%E5%BD%92%E4%B8%80%E5%8C%96/</url>
    <content><![CDATA[<h2 id="ç®—æ³•æ€æƒ³"><a href="#ç®—æ³•æ€æƒ³" class="headerlink" title="ç®—æ³•æ€æƒ³"></a>ç®—æ³•æ€æƒ³</h2><p>è§‚å¯Ÿä¸‹å›¾ï¼Œå¯ä»¥å‘ç°æ¯ä¸ªç‰¹å¾ä¹‹é—´çš„é‡çº²ä¸åŒï¼Œæ²¡æœ‰åŠæ³•æ”¾åœ¨ä¸€èµ·æ¯”è¾ƒï¼Œå­¦ä¹ å‡ºæ¥çš„æ¨¡å‹å¯è§£é‡Šæ€§æ¯”è¾ƒå·®ã€‚è€Œä¸”å¯¹äºKNNç®—æ³•æ¥è¯´ï¼Œæ ·æœ¬ä¹‹é—´çš„è·ç¦»æå¤§éƒ¨åˆ†ä¼šç”±å‘ç°æ—¶é—´ï¼ˆå¤©ï¼‰æ¥å¼•å¯¼ï¼Œè‚¿ç˜¤å¤§å°ï¼ˆå˜ç±³ï¼‰å‡ ä¹å¯ä»¥å¿½ç•¥ä¸è®¡ã€‚</p>
<p><img src="https://z3.ax1x.com/2021/09/14/4k3M9K.png" alt=""></p>
<p>ä¸ºæ­¤æˆ‘ä»¬å°±éœ€è¦é‡‡ç”¨å½’ä¸€åŒ–ï¼ŒæŠŠæœ‰é‡çº²çš„è¡¨è¾¾å¼æ”¹æˆ<code>æ— é‡çº²</code>çš„è¡¨è¾¾å¼ï¼Œå°†æ•°æ®çš„æ‰€æœ‰ç‰¹å¾éƒ½æ˜ å°„åˆ°ä¸€ä¸ªç»Ÿä¸€çš„å°ºåº¦ä¸‹ã€‚ï¼ˆå¯¹äºå…¶å®ƒç®—æ³•å¦‚çº¿æ€§å›å½’åˆ™ä¸ä¼šå½±å“åˆ†ç±»æˆ–é¢„æµ‹ç»“æœï¼‰</p>
<p>è€Œä¸”å½’ä¸€åŒ–åå¯ä»¥åŠ é€Ÿè®­ç»ƒï¼Œå·¦ä¾§å› ä¸ºè¿›è¡Œäº†å½’ä¸€åŒ–ï¼Œå› æ­¤ç­‰é«˜çº¿å‡ ä¹æ˜¯æ­£åœ†ï¼Œç­‰é«˜çº¿ä¸Šçš„æ³•çº¿æŒ‡å‘åœ†å¿ƒï¼Œå› æ­¤èƒ½å¿«é€Ÿæ”¶æ•›åˆ°æœ€å°å€¼ï¼Œè€Œå³å›¾æ²¡æœ‰è¿›è¡Œå½’ä¸€åŒ–åˆ™éœ€è¿›è¡Œå¤šæ¬¡è¿­ä»£ã€‚</p>
<p>æ²¡æœ‰è¿›è¡Œå½’ä¸€åŒ–ï¼Œå­¦ä¹ ç‡ä¹Ÿå¾—æŒ‰ç…§ç‰¹å¾å–å€¼èŒƒå›´æœ€å°çš„é‚£ä¸ªç»´åº¦æ¥å–ï¼Œä¸ç„¶å¾ˆå®¹æ˜“å‡ºç°nanã€‚</p>
<p>æ³¨ï¼šç”±äºè¿›è¡Œäº†å½’ä¸€åŒ–ï¼Œæˆ‘ä»¬çš„æ¨¡å‹éƒ½æ˜¯æŒ‰ç…§å½’ä¸€åŒ–çš„æ•°æ®è¿›è¡Œè®­ç»ƒçš„ï¼Œå› æ­¤æµ‹è¯•æ•°æ®ä¹Ÿè¦è¿›è¡Œå½’ä¸€åŒ–ï¼Œå¦åˆ™æ²¡æœ‰æ„ä¹‰äº†ã€‚</p>
<p><img src="https://z3.ax1x.com/2021/09/14/4kxFRU.png" alt=""></p>
<p>ï¼ˆ1ï¼‰ å‡å€¼æ–¹å·®å½’ä¸€åŒ–ï¼ˆstandardizationï¼‰</p>
<script type="math/tex; mode=display">
X_{scale} = \frac{X - X_{mean}}{X_{std}}</script><p>ç»è¿‡è¯¥æ ‡å‡†åŒ–å¤„ç†çš„æ•°æ®ï¼Œå‡å€¼ä¸º0ï¼Œæ–¹å·®ä¸º1ï¼Œç¬¦åˆæ­£æ€åˆ†å¸ƒã€‚</p>
<p>é€‚ç”¨äºæ•°æ®åˆ†å¸ƒæ²¡æœ‰æ˜æ˜¾çš„è¾¹ç•Œï¼Œæœ‰å¯èƒ½å­˜åœ¨æç«¯çš„æ•°æ®å€¼ã€‚</p>
<p>æ­£å¥½å­¦äº†æ¦‚ç‡è®ºï¼Œå°±æ¥ç®€å•æ¨å¯¼ä¸‹å§ã€‚</p>
<script type="math/tex; mode=display">
è®¾ç»è¿‡å‡å€¼æ–¹å·®å½’ä¸€åŒ–åX^*çš„æ•°å­¦æœŸæœ›å’Œæ–¹å·®åˆ†åˆ«ä¸ºE^*X, D^*X \qquad (X^* = \frac{X - EX}{\sqrt{DX}})
\\
E^*X = E(\frac{X - EX}{\sqrt{DX}}) = \frac{1}{\sqrt{DX}} * (EX - EX) = 0
\\
D^*X = D(\frac{X - EX}{\sqrt{DX}}) = \frac{1}{DX} * D(X - EX) = \frac{1}{DX} * DX = 1</script><p>ï¼ˆ2ï¼‰æœ€å€¼å½’ä¸€åŒ–ï¼ˆNormalizationï¼‰</p>
<script type="math/tex; mode=display">
X_{scale} = \frac{X - X_{min}}{X_{max} - X_{min}}</script><p>ç»è¿‡è¯¥æ ‡å‡†åŒ–å¤„ç†çš„æ•°æ®ï¼Œæ•°æ®åˆ†å¸ƒåœ¨(0, 1)ã€‚</p>
<p>é€‚ç”¨äºåˆ†å¸ƒæœ‰æ˜æ˜¾è¾¹ç•Œçš„æƒ…å†µï¼Œå— outlinerå½±å“è¾ƒå¤§ã€‚</p>
<p>ä¾‹å¦‚åƒç´ èŒƒå›´ï¼ˆ0 ~ 255ï¼‰ï¼Œå­¦ç”Ÿæˆç»©ï¼ˆ0 ~ 100ï¼‰ã€‚</p>
<p><br></p>
<h2 id="å®ä¾‹"><a href="#å®ä¾‹" class="headerlink" title="å®ä¾‹"></a>å®ä¾‹</h2><p>ï¼ˆ1ï¼‰ æœ€å€¼å½’ä¸€åŒ–</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MinMaxScaler</span>:</span></span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">fit</span>(<span class="params">self, X</span>):</span></span><br><span class="line">        self.X = X</span><br><span class="line">        self.<span class="built_in">max</span> = np.<span class="built_in">max</span>(X, axis = <span class="number">0</span>)</span><br><span class="line">        self.<span class="built_in">min</span> = np.<span class="built_in">min</span>(X, axis = <span class="number">0</span>)</span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">transform</span>(<span class="params">self, X</span>):</span></span><br><span class="line">        <span class="keyword">return</span> (X - self.<span class="built_in">min</span>) / (self.<span class="built_in">max</span> - self.<span class="built_in">min</span>)</span><br></pre></td></tr></tbody></table></figure>
<p>åŸå§‹æ•°æ®å‡å€¼ä¸º46.995ï¼Œæ ‡å‡†å·®ä¸º27.97007284581147ã€‚</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">X = np.random.randint(<span class="number">0</span>, <span class="number">100</span>, (<span class="number">100</span>, <span class="number">2</span>))</span><br><span class="line"><span class="built_in">print</span>(np.mean(X))			<span class="comment"># 46.995</span></span><br><span class="line"><span class="built_in">print</span>(np.std(X))			<span class="comment"># 27.97007284581147</span></span><br><span class="line"></span><br><span class="line">plt.scatter(X[:, <span class="number">0</span>], X[:, <span class="number">1</span>])</span><br><span class="line">plt.show()</span><br></pre></td></tr></tbody></table></figure>
<p><img src="https://z3.ax1x.com/2021/09/14/4kODbt.png" alt=""></p>
<p>ç»è¿‡æœ€å€¼å½’ä¸€åŒ–åï¼Œå‡å€¼ä¸º0.4721085858585859ï¼Œæ ‡å‡†å·®ä¸º0.2863025514861211ã€‚</p>
<p>æ‰€æœ‰å€¼éƒ½è¢«æ˜ å°„åˆ°ï¼ˆ0ï¼Œ 1ï¼‰ä¹‹é—´</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">minMaxScaler = MinMaxScaler()</span><br><span class="line">minMaxScaler.fit(X)</span><br><span class="line">X1 = minMaxScaler.transform(X)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(np.mean(X1))			<span class="comment"># 0.4721085858585859</span></span><br><span class="line"><span class="built_in">print</span>(np.std(X1))			<span class="comment"># 0.2863025514861211</span></span><br><span class="line"></span><br><span class="line">plt.scatter(X1[:, <span class="number">0</span>], X1[:, <span class="number">1</span>])</span><br><span class="line">plt.show()</span><br></pre></td></tr></tbody></table></figure>
<p><img src="https://z3.ax1x.com/2021/09/14/4kXqTP.png" alt=""></p>
<p>ï¼ˆ2ï¼‰ å‡å€¼æ–¹å·®å½’ä¸€åŒ–</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">StandardScaler</span>:</span></span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">fit</span>(<span class="params">self, X</span>):</span></span><br><span class="line">        self.X = X</span><br><span class="line">        self.mean = np.mean(X, axis = <span class="number">0</span>)</span><br><span class="line">        self.std = np.std(X, axis = <span class="number">0</span>)</span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">transform</span>(<span class="params">self, X</span>):</span></span><br><span class="line">        <span class="keyword">return</span> (X - self.mean) / self.std</span><br></pre></td></tr></tbody></table></figure>
<p>ç»è¿‡å‡å€¼æ–¹å·®å½’ä¸€åŒ–åï¼Œå‡å€¼å‡ ä¹ä¸º0ï¼Œæ ‡å‡†å·®ä¹Ÿå‡ ä¹ä¸º1ï¼Œä½†æ•°æ®èŒƒå›´ä¸ä¸€å®šåœ¨ï¼ˆ0ï¼Œ 1ï¼‰ä¸­ã€‚</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">standardScaler = StandardScaler()</span><br><span class="line">standardScaler.fit(X)</span><br><span class="line">X1 = standardScaler.transform(X)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(np.mean(X1))				<span class="comment"># -2.7755575615628914e-17</span></span><br><span class="line"><span class="built_in">print</span>(np.std(X1))				<span class="comment"># 0.9999999999999998</span></span><br><span class="line"></span><br><span class="line">plt.scatter(X1[:, <span class="number">0</span>], X1[:, <span class="number">1</span>])</span><br><span class="line">plt.show()</span><br></pre></td></tr></tbody></table></figure>
<p><img src="https://z3.ax1x.com/2021/09/14/4kXEMd.png" alt=""></p>
<h2 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h2><p>å…ˆä»‹ç»ä¸€ä¸‹ <code>train test split</code>ï¼Œæ­£å¦‚å®ƒçš„å­—é¢æ„æ€ã€‚å°†ä¸€ä»½æ•°æ®é›†åˆ†æˆè®­ç»ƒæ•°æ®é›†å’Œæµ‹è¯•æ•°æ®é›†ï¼Œè¿™æ ·åœ¨ä½¿ç”¨ score å‡½æ•°æ—¶ï¼Œä½¿ç”¨çš„éƒ½æ˜¯è®­ç»ƒæ—¶æ²¡æœ‰è§è¿‡çš„æ•°æ®é›†ï¼Œå¾—å‡ºæ¥çš„å‡†ç¡®ç‡ä¹Ÿå°±æ›´å¯é ã€‚</p>
<p>é¦–å…ˆæ•°æ®é›†éœ€è¦æ‰“ä¹±ï¼Œå› ä¸ºæœ‰äº›æ•°æ®é›†æ˜¯æ ¹æ®ç±»åˆ«æ¥åˆ†ç±»çš„ï¼Œä¾‹å¦‚å‰ k ä¸ªéƒ½æ˜¯ç±»åˆ«1ï¼Œå k ä¸ªéƒ½æ˜¯ç±»åˆ«2ï¼Œè¿™æ · train å’Œtestä¸­çš„ç±»åˆ«åˆ†å¸ƒå·®è·å¾ˆå¤§ï¼Œä¼šå¯¼è‡´æ³›åŒ–æ•ˆæœä¸å¥½ã€‚</p>
<p>np.random.seed(seed) ä½¿ç”¨åŒä¸€ä¸ªç§å­ä¸ºäº†èƒ½æ›´å¥½çš„æ¯”è¾ƒä½¿ç”¨å½’ä¸€åŒ–å’Œä¸ä½¿ç”¨å½’ä¸€åŒ–çš„åŒºåˆ«ã€‚</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">train_test_split</span>(<span class="params">X, y, split_rate, seed</span>):</span></span><br><span class="line">    np.random.seed(seed)</span><br><span class="line">    length = <span class="built_in">int</span>(<span class="built_in">len</span>(X) * split_rate)</span><br><span class="line">    p = np.random.permutation(<span class="built_in">len</span>(X))</span><br><span class="line">    <span class="keyword">return</span> X[p[length:]], X[p[:length]], y[p[length:]], y[p[:length]]</span><br></pre></td></tr></tbody></table></figure>
<p><br></p>
<p>ï¼ˆ1ï¼‰ ä¸ä½¿ç”¨å½’ä¸€åŒ–è¿›è¡Œå­¦ä¹ </p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">boston=datasets.load_boston()</span><br><span class="line">X=boston.data			<span class="comment"># (506, 13)</span></span><br><span class="line">y=boston.target			<span class="comment"># (506, )</span></span><br><span class="line"></span><br><span class="line">split_rate = <span class="number">0.2</span></span><br><span class="line">X_train, X_test, y_train, y_test = train_test_split(X, y, split_rate)</span><br><span class="line"></span><br><span class="line">lr = LinearRegression()</span><br><span class="line">lr.fit(X_train, y_train, eta = <span class="number">1e-6</span>, n_iters = <span class="number">1e6</span>)</span><br><span class="line">lr.score(X_test, y_test)</span><br></pre></td></tr></tbody></table></figure>
<p>eta = 1e-6</p>
<p>score = 31.348463775149956</p>
<p>ï¼ˆ2ï¼‰ ä½¿ç”¨æœ€å€¼å½’ä¸€åŒ–</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">boston=datasets.load_boston()</span><br><span class="line">X=boston.data</span><br><span class="line">y=boston.target</span><br><span class="line"></span><br><span class="line">minMaxScaler = MinMaxScaler()</span><br><span class="line">minMaxScaler.fit(X)</span><br><span class="line">X = minMaxScaler.transform(X)</span><br><span class="line"></span><br><span class="line">split_rate = <span class="number">0.2</span></span><br><span class="line">X_train, X_test, y_train, y_test = train_test_split(X, y, split_rate)</span><br><span class="line"></span><br><span class="line">lr = LinearRegression()</span><br><span class="line">lr.fit(X_train, y_train, eta = <span class="number">1e-2</span>, n_iters = <span class="number">1e6</span>)</span><br><span class="line">lr.score(X_test, y_test)</span><br></pre></td></tr></tbody></table></figure>
<p>eta = 1e-2</p>
<p>score = 25.209485526542817</p>
<p>ï¼ˆ3ï¼‰ ä½¿ç”¨å‡å€¼æ–¹å·®å½’ä¸€åŒ–</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">boston=datasets.load_boston()</span><br><span class="line">X=boston.data</span><br><span class="line">y=boston.target</span><br><span class="line"></span><br><span class="line">standardScaler = StandardScaler()</span><br><span class="line">standardScaler.fit(X)</span><br><span class="line">X = standardScaler.transform(X)</span><br><span class="line"></span><br><span class="line">split_rate = <span class="number">0.2</span></span><br><span class="line">X_train, X_test, y_train, y_test = train_test_split(X, y, split_rate)</span><br><span class="line"></span><br><span class="line">lr = LinearRegression()</span><br><span class="line">lr.fit(X_train, y_train, eta = <span class="number">1e-2</span>, n_iters = <span class="number">1e6</span>)</span><br><span class="line">lr.score(X_test, y_test)</span><br></pre></td></tr></tbody></table></figure>
<p>eta = 1e-2</p>
<p>score = 18.92473923096906</p>
<p>ç»è¿‡å¯¹æ¯”ï¼Œä½¿ç”¨åŒæ ·çš„è®­ç»ƒæ¬¡æ•°ï¼Œç»è¿‡äº†å½’ä¸€åŒ–çš„é¢„æµ‹ç‡æ˜æ˜¾æ¯”æ²¡æœ‰ç»è¿‡å½’ä¸€åŒ–çš„é¢„æµ‹ç‡æ›´é«˜ï¼Œè€Œä¸”etaå–1e-2å°±è¡Œï¼Œä¸ç”¨å¤šæ¬¡å°è¯•ã€‚</p>
]]></content>
      <categories>
        <category>Machine Learning</category>
      </categories>
  </entry>
  <entry>
    <title>æ¦‚ç‡è®º</title>
    <url>/2021/09/16/%E6%A6%82%E7%8E%87%E8%AE%BA/</url>
    <content><![CDATA[<h1 id="ä¸€-å…¬å¼"><a href="#ä¸€-å…¬å¼" class="headerlink" title="ä¸€. å…¬å¼"></a>ä¸€. å…¬å¼</h1><h2 id="1-æ’åˆ—ç»„åˆ"><a href="#1-æ’åˆ—ç»„åˆ" class="headerlink" title="1. æ’åˆ—ç»„åˆ"></a>1. æ’åˆ—ç»„åˆ</h2><p><strong>ï¼ˆ1ï¼‰ æ’åˆ—</strong></p>
<p>$P_m^n = m(m - 1)(m - 2)Â·Â·Â·(m - n + 1)$</p>
<p>$P_m^n = \frac{m!}{(m - n)!}$</p>
<p><strong>ï¼ˆ2ï¼‰ ç»„åˆ</strong></p>
<p>$C_m^n = \frac{P_m^n}{n!} = \frac{m(m - 1)(m - 2)Â·Â·Â·(m - n + 1)}{n!}$</p>
<p>$C_m^n = \frac{m!}{n!(m - n)!}$</p>
<p>$C_m^n = C_m^{m-n}$</p>
<p>$C^n_{m+1} = \frac{(m+1)m(m-1)Â·Â·Â·(m-n+2)}{n!} = \frac{[(m - n + 1) + n]m(m-1)Â·Â·Â·(m-n+2)}{n!} = \frac{m(m-1)Â·Â·Â·(m-n+1)}{n!} + \frac{m(m-1)Â·Â·Â·(m-n+2)}{(n-1)!} = C_m^n + C_m^{n-1}$</p>
<h2 id="2-æ¡ä»¶æ¦‚ç‡"><a href="#2-æ¡ä»¶æ¦‚ç‡" class="headerlink" title="2.æ¡ä»¶æ¦‚ç‡"></a>2.æ¡ä»¶æ¦‚ç‡</h2><p>ï¼ˆ1ï¼‰ æ¡ä»¶æ¦‚ç‡</p>
<p>$P(B|A) = \frac{P(AB)}{P(A)}$ï¼Œ                P(A) &gt; 0</p>
<p>ï¼ˆ2ï¼‰ ä¹˜æ³•å…¬å¼</p>
<p>$$</p>
<p>ï¼ˆ3ï¼‰ å®Œå¤‡äº‹ä»¶ç»„</p>
<p>ï¼ˆ4ï¼‰ å…¨æ¦‚ç‡å…¬å¼</p>
<p>ï¼ˆ5ï¼‰ è´å¶æ–¯å…¬å¼</p>
]]></content>
  </entry>
  <entry>
    <title>æ¨¡å‹çš„è®­ç»ƒ</title>
    <url>/2021/10/08/%E6%A8%A1%E5%9E%8B%E7%9A%84%E8%AE%AD%E7%BB%83/</url>
    <content><![CDATA[<h2 id="ç½‘æ ¼æœç´¢"><a href="#ç½‘æ ¼æœç´¢" class="headerlink" title="ç½‘æ ¼æœç´¢"></a>ç½‘æ ¼æœç´¢</h2><p>åœ¨ <a href="/2021/09/28/è¿‡æ‹Ÿåˆå’Œæ¬ æ‹Ÿåˆ/">è¿‡æ‹Ÿåˆå’Œæ¬ æ‹Ÿåˆ</a> ä¸­ï¼Œæˆ‘ä»¬æ˜¯æ‰‹åŠ¨è°ƒæ•´è¶…å‚æ•° <code>degree</code> ï¼Œç»ç”±äººå·¥ä¸€ä¸€æ¯”å¯¹æ¥è·å–æœ€å¥½çš„å€¼ï¼Œæ•ˆç‡æ¯”è¾ƒä½ä¸‹ã€‚å› æ­¤æˆ‘ä»¬å¼•å…¥ç½‘æ ¼æœç´¢è¿™ä¸ªæ¦‚å¿µï¼Œä¸è¦è¢«è¿™ä¸ªçœ‹èµ·æ¥å¾ˆé«˜å¤§ä¸Šçš„åè¯å“å”¬ä½äº†ï¼Œå…¶å®é€»è¾‘ååˆ†ç®€å•ï¼Œå…·ä½“è¯·çœ‹ä¸‹è¿°ä»£ç ã€‚</p>
<p>ä½¿ç”¨ sklearn ä¸­è‡ªå¸¦çš„æ³¢å£«é¡¿æˆ¿äº§æ•°æ®ä½œä¸ºæˆ‘ä»¬çš„æµ‹è¯•æ•°æ®ã€‚</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> sklearn</span><br><span class="line"><span class="keyword">from</span> sklearn.model_selection <span class="keyword">import</span> train_test_split</span><br><span class="line"><span class="keyword">from</span> sklearn <span class="keyword">import</span> datasets</span><br><span class="line"><span class="keyword">from</span> sklearn.neighbors <span class="keyword">import</span> KNeighborsRegressor</span><br><span class="line"></span><br><span class="line">boston = datasets.load_boston()</span><br><span class="line">X = boston.data</span><br><span class="line">y = boston.target</span><br><span class="line"></span><br><span class="line">X_train, X_test, y_train, y_test = train_test_split(X, y)</span><br></pre></td></tr></tbody></table></figure>
<p>è¿™é‡Œæˆ‘ä»¬è¦ç½‘æ ¼æœç´¢çš„å‚æ•°å³ä¸º pï¼Œneighborï¼Œ weightã€‚</p>
<p>å¯ä»¥çœ‹åˆ°æ‰€è°“ <code>ç½‘æ ¼æœç´¢</code> å°±æ˜¯ä½¿ç”¨ for-loop åƒç½‘æ ¼ä¸€æ ·å°†ä½ é¢„è®¾çš„å¯èƒ½çš„å€¼éƒ½éå†ä¸€éï¼Œä¾æ¬¡å¯»æ±‚ score æœ€é«˜çš„è¶…å‚æ•°ç»„åˆã€‚</p>
<figure class="highlight markdown"><table><tbody><tr><td class="code"><pre><span class="line">KNNä¸­çš„è¶…å‚æ•°ï¼š</span><br><span class="line"><span class="bullet">  -</span> weightsï¼šå«æœ‰ <span class="code">`uniform`</span> å’Œ <span class="code">`distance`</span> ä¸¤ç§æ¨¡å¼</span><br><span class="line"><span class="code">             uniform æ˜¯æ­£å¸¸çš„æ¨¡å¼</span></span><br><span class="line"><span class="code">             distance ç»™ k ä¸ªç›¸é‚»çš„ç‚¹æŒ‰ç…§è·ç¦»è¿œè¿‘éƒ½èµ‹äºˆä¸€ä¸ªæƒé‡ï¼Œç¦»é¢„æµ‹æ ·æœ¬ç‚¹è·ç¦»è¿œçš„æƒé‡å°±ä½ä¸€äº›ï¼Œè·ç¦»è¿‘çš„æƒé‡å°±é«˜ä¸€äº›ï¼Œ</span></span><br><span class="line"><span class="code">             </span></span><br><span class="line"><span class="code">  - pï¼šé—µå¯å¤«æ–¯åŸºè·ç¦»å‚æ•°</span></span><br><span class="line"><span class="code">       p = 1 æ—¶ï¼Œç­‰ä»·äºæ›¼å“ˆé¡¿è·ç¦»</span></span><br><span class="line"><span class="code">       p = 2 æ—¶ï¼Œç­‰ä»·äºæ¬§æ‹‰è·ç¦»</span></span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">weights = [<span class="string">"uniform"</span>, <span class="string">"distance"</span>]</span><br><span class="line">best_score = -<span class="number">1</span></span><br><span class="line">best_p = <span class="number">0</span></span><br><span class="line">best_neighbor = <span class="number">0</span></span><br><span class="line">best_weight = <span class="string">""</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> weight <span class="keyword">in</span> weights:</span><br><span class="line">    <span class="keyword">for</span> neighbor <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="number">10</span>):</span><br><span class="line">        <span class="keyword">for</span> p <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="number">10</span>):</span><br><span class="line">            reg = KNeighborsRegressor(n_neighbors=neighbor,</span><br><span class="line">                                      weights = weight,</span><br><span class="line">                                      p = p,</span><br><span class="line">                                      n_jobs = -<span class="number">1</span>)</span><br><span class="line">            reg.fit(X_train, y_train)</span><br><span class="line">            score = reg.score(X_test, y_test)</span><br><span class="line">            <span class="keyword">if</span> score &gt; best_score:</span><br><span class="line">                best_score = score</span><br><span class="line">                best_neighbor = neighbor</span><br><span class="line">                best_p = p</span><br><span class="line">                best_weight = weight</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">"best_weight ="</span>, best_weight)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">"best_p ="</span>, best_p)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">"best_neighbor ="</span>, best_neighbor)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">"best_score ="</span>, best_score)</span><br></pre></td></tr></tbody></table></figure>
<p>è¾“å‡ºç»“æœå¦‚ä¸‹ã€‚</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">best_weight = distance</span><br><span class="line">best_p = <span class="number">1</span></span><br><span class="line">best_neighbor = <span class="number">3</span></span><br><span class="line">best_score = <span class="number">0.7420720968121362</span></span><br></pre></td></tr></tbody></table></figure>
<p>æ³¨ï¼šKNeighborsRegressor å’Œ KNeighborsClassifier æ€æƒ³ç›¸åŒã€‚</p>
<p>KNeighborsClassifier æ˜¯æ‰¾åˆ°é™„è¿‘ <code>k</code> ä¸ªæ•°æ®ï¼Œæ‰¾åˆ°æœ€å¤šé‚£ä¸ªç±»åˆ«ä½œä¸ºé¢„æµ‹çš„<code>ç±»åˆ«</code>ï¼Œç”¨äºè§£å†³åˆ†ç±»é—®é¢˜ã€‚</p>
<p>è€Œ KNeighborsRegressor æ˜¯æ‰¾åˆ°é™„è¿‘ <code>k</code> ä¸ªæ•°æ®ï¼Œç„¶åå–å¹³å‡å€¼ä½œä¸ºé¢„æµ‹çš„<code>æ•°å€¼</code>ï¼Œç”¨äºè§£å†³å›å½’é—®é¢˜ã€‚</p>
<p><br></p>
<h4 id="scikit-ä¸­çš„å®ç°"><a href="#scikit-ä¸­çš„å®ç°" class="headerlink" title="scikit ä¸­çš„å®ç°"></a>scikit ä¸­çš„å®ç°</h4><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.model_selection <span class="keyword">import</span> GridSearchCV</span><br><span class="line"></span><br><span class="line">params = {</span><br><span class="line">    <span class="string">"weights"</span> : [<span class="string">"uniform"</span>, <span class="string">"distance"</span>],</span><br><span class="line">    <span class="string">"p"</span> : [i <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="number">10</span>)],</span><br><span class="line">    <span class="string">"n_neighbors"</span> : [i <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="number">10</span>)]</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">knn_reg = KNeighborsRegressor()</span><br><span class="line">grid_search=GridSearchCV(knn_reg, params)</span><br><span class="line">%time grid_search.fit(X_train,y_train)</span><br></pre></td></tr></tbody></table></figure>
<p>GridSearchCV ä½¿ç”¨äº¤å‰éªŒè¯æ¥è®­ç»ƒæ•°æ®ï¼Œå³ train-validation-testã€‚å› æ­¤best_score_å¯èƒ½ä¼šæ¯”è¾ƒä½ã€‚</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">grid_search.best_params_ = {<span class="string">'n_neighbors'</span>: <span class="number">5</span>, <span class="string">'p'</span>: <span class="number">1</span>, <span class="string">'weights'</span>: <span class="string">'distance'</span>}</span><br><span class="line">grid_search.best_score_ = <span class="number">0.6091159004372775</span></span><br><span class="line">grid_search.best_estimator_.score(X_test, y_test) = <span class="number">0.7276418519232821</span></span><br></pre></td></tr></tbody></table></figure>
<p><br></p>
<h2 id="äº¤å‰éªŒè¯"><a href="#äº¤å‰éªŒè¯" class="headerlink" title="äº¤å‰éªŒè¯"></a>äº¤å‰éªŒè¯</h2><p>åœ¨ä¹‹å‰æ¨¡å‹çš„è®­ç»ƒä¸­ï¼Œæˆ‘ä»¬éƒ½æ˜¯ä»¥æµ‹è¯•æ•°æ®é›†çš„ score æ¥è¡¡é‡æ¨¡å‹çš„å¥½åï¼Œæ¢è¨€ä¹‹å°±æ˜¯æ ¹æ® <code>test_score</code> æ¥è°ƒæ•´è¶…å‚æ•°ï¼Œå¹¶ä»æ‰€æœ‰çš„æ¨¡å‹ä¸­æŒ‘å‡º <code>test_score</code> æœ€é«˜çš„ä½œä¸ºæˆ‘ä»¬çš„é¢„æµ‹æ¨¡å‹ã€‚ä½†è¿™æ ·ä¹Ÿä¼šæš´éœ²å‡ºä¸€ä¸ªé—®é¢˜ï¼Œåœ¨æ¨¡å‹è®­ç»ƒæœŸé—´ï¼Œæˆ‘ä»¬çš„æ¨¡å‹å°±å·²ç»<code>è§è¿‡</code>äº†æµ‹è¯•æ•°æ®é›†ï¼Œå› æ­¤å¯èƒ½ä¼š<code>è¿‡æ‹Ÿåˆ</code>æµ‹è¯•æ•°æ®é›†ï¼</p>
<p>è¿™æ ·è‚¯å®šæ˜¯ä¸å¯¹çš„ï¼Œè¦æ¨¡æ‹ŸçœŸæ­£çš„ç”Ÿäº§ç¯å¢ƒï¼Œé‚£ä¹ˆæµ‹è¯•æ•°æ®é›†å°±ä¸èƒ½å‚ä¸åˆ°æ¨¡å‹çš„è®­ç»ƒå½“ä¸­ã€‚æˆ‘ä»¬åªéœ€è¦å†å¼•å…¥ä¸€ä¸ªéªŒè¯æ•°æ®é›†æ¥<code>ä»£æ›¿</code>ä¹‹å‰æµ‹è¯•æ•°æ®é›†çš„ä½œç”¨å°±è¡Œäº†ã€‚</p>
<p><img src="https://z3.ax1x.com/2021/10/10/5kvEY4.png" alt=""></p>
<p>ä½†å…¶å®è¿™æ ·ä¹Ÿä¼šæœ‰<code>è¿‡æ‹Ÿåˆ</code>éªŒè¯æ•°æ®é›†çš„é—®é¢˜ï¼Œå› æ­¤å°±æœ‰äº†<code>äº¤å‰éªŒè¯</code>ã€‚å…·ä½“åˆ™æ˜¯å°†è®­ç»ƒæ•°æ®é›†åˆ†æˆ K ä»½ï¼Œä»è¿™ K ä»½å½“ä¸­é€‰æ‹©ä¸€ä»½ä½œä¸ºéªŒè¯æ•°æ®é›†ï¼Œå…¶ä½™ K-1 ä»½ä½œä¸ºè®­ç»ƒæ•°æ®é›†ã€‚ä¸€å…±æœ‰ $C^1_K = K$ ç§åˆ†æ³•ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥å¾—åˆ° K ä¸ªæ¨¡å‹ï¼Œå› æ­¤è¿™ä¹Ÿè¢«ç§°ä¸º <code>K-folds Cross  Validation</code>ï¼ˆKæŠ˜äº¤å‰éªŒè¯ï¼‰ï¼Œæœ€åå–ä»–ä»¬åœ¨éªŒè¯æ•°æ®é›†ä¸Šçš„å‡å€¼ä½œä¸ºåˆ¤æ–­æ¨¡å‹å¥½åçš„ä¾æ®ã€‚</p>
<p>è¿™é‡Œæä¸€å¥ï¼Œåœ¨ scikit-learn çš„ç½‘æ ¼æœç´¢ä¸­ï¼Œé»˜è®¤ä½¿ç”¨çš„æ˜¯ cv = 5 çš„äº¤å‰éªŒè¯ï¼Œä¹Ÿå°±æ˜¯äº”æŠ˜äº¤å‰éªŒè¯ã€‚</p>
<p><img src="https://z3.ax1x.com/2021/10/10/5kvFTU.png" alt=""></p>
<p>å½“äº¤å‰éªŒè¯çš„ K = n_samples æ—¶ï¼Œä¼šäº§ç”Ÿ n_samples ä¸ªæ¨¡å‹ï¼Œè¿™æ—¶è®­ç»ƒå‡ºæ¥çš„æ¨¡å‹å®Œå…¨ä¸å—éšæœºçš„å½±å“ï¼Œå°†æœ€æ¥è¿‘æ¨¡å‹çœŸæ­£çš„æ€§èƒ½æŒ‡æ ‡ï¼Œä»£ä»·å°±æ˜¯è®­ç»ƒæ—¶é—´ä¼šæ‰©å¤§ n_samples å€ï¼Œè¿™å°±æ˜¯ <code>LOO-CV</code>ï¼ˆLeave One Out Cross Validtionï¼‰ï¼Œä¹Ÿå°±æ˜¯ç•™ä¸€æ³•ã€‚</p>
]]></content>
      <categories>
        <category>Machine Learning</category>
      </categories>
  </entry>
  <entry>
    <title>æ³¨è§£å’Œåå°„</title>
    <url>/2021/10/14/%E6%B3%A8%E8%A7%A3%E5%92%8C%E5%8F%8D%E5%B0%84/</url>
    <content><![CDATA[<h2 id="1ã€æ³¨è§£"><a href="#1ã€æ³¨è§£" class="headerlink" title="1ã€æ³¨è§£"></a>1ã€æ³¨è§£</h2><h4 id="1-1ã€-å†…ç½®æ³¨è§£"><a href="#1-1ã€-å†…ç½®æ³¨è§£" class="headerlink" title="1.1ã€ å†…ç½®æ³¨è§£"></a>1.1ã€ å†…ç½®æ³¨è§£</h4><ul>
<li><p>@Deprecated</p>
<p>è¢«æ³¨è§£çš„å…ƒç´ æ˜¯ä¸é¼“åŠ±ä½¿ç”¨çš„ç¨‹åºå…ƒç´ ï¼Œé€šå¸¸æ˜¯å› ä¸ºå®ƒæ˜¯<code>å±é™©</code>çš„ï¼Œæˆ–è€…å› ä¸ºå­˜åœ¨æ›´å¥½çš„æ›¿ä»£æ–¹æ³•ã€‚</p>
</li>
<li><p>@Override</p>
<p>è¡¨ç¤ºé‡å†™çˆ¶ç±»æ–¹æ³•ã€‚</p>
</li>
<li><p>@SuppressWarning</p>
<p>æŠ‘åˆ¶è­¦å‘Šã€‚</p>
</li>
<li><p>@FunctionaInterface</p>
<p>æŒ‡å®šæ¥å£å¿…é¡»ä¸ºå‡½æ•°å¼æ¥å£ã€‚</p>
</li>
</ul>
<h4 id="1-2ã€å…ƒæ³¨è§£"><a href="#1-2ã€å…ƒæ³¨è§£" class="headerlink" title="1.2ã€å…ƒæ³¨è§£"></a>1.2ã€å…ƒæ³¨è§£</h4><p>å…ƒæ³¨è§£çš„ä½œç”¨å°±æ˜¯è´Ÿè´£<code>æ³¨è§£</code>å…¶å®ƒæ³¨è§£ã€‚</p>
<ul>
<li><p>@Target</p>
<p>ç”¨äºæè¿°æ³¨è§£çš„ä½¿ç”¨èŒƒå›´ã€‚</p>
</li>
<li><p>@Retention</p>
<p>è¡¨ç¤ºéœ€è¦åœ¨ä»€ä¹ˆçº§åˆ«ä¿å­˜è¯¥æ³¨é‡Šä¿¡æ¯ï¼Œç”¨äºæè¿°æ³¨è§£çš„ç”Ÿå‘½å‘¨æœŸã€‚</p>
<ul>
<li>SOURCE &lt; CLASS &lt; RUNTIME</li>
</ul>
</li>
<li><p>@Document</p>
<p>è¯´æ˜è¯¥æ³¨è§£å°†è¢«åŒ…å«åœ¨ javadoc ä¸­ã€‚</p>
</li>
<li><p>@Inherited</p>
<p>è¯´æ˜å­ç±»å¯ä»¥<code>ç»§æ‰¿</code>çˆ¶ç±»ä¸­çš„è¯¥æ³¨é‡Šã€‚</p>
</li>
</ul>
<h2 id="1-3ã€è‡ªå®šä¹‰æ³¨è§£"><a href="#1-3ã€è‡ªå®šä¹‰æ³¨è§£" class="headerlink" title="1.3ã€è‡ªå®šä¹‰æ³¨è§£"></a>1.3ã€è‡ªå®šä¹‰æ³¨è§£</h2><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.lang.annotation.*;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Target(ElementType.FIELD)</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="meta">@Inherited</span></span><br><span class="line"><span class="meta">@interface</span> MyAnnotation1{</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">age</span><span class="params">()</span></span>;</span><br><span class="line">    String[] hobby() <span class="keyword">default</span> {<span class="string">"dance"</span>, <span class="string">"sing"</span>};</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="meta">@Target(ElementType.FIELD)</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="meta">@interface</span> MyAnnotation2{</span><br><span class="line">    <span class="function">String <span class="title">value</span><span class="params">()</span></span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>æ³¨è§£ä¸­çš„å‚æ•°ä¸€å®šè¦åŠ <code>()</code>ï¼</p>
<p>å½“æ³¨è§£åªæœ‰ä¸€ä¸ªå‚æ•°æ—¶ï¼Œå‚æ•°åå¯ä»¥å®šä¹‰ä¸º <code>value</code>ï¼Œåœ¨è°ƒç”¨çš„æ—¶å€™ç›´æ¥èµ‹å€¼å°±è¡Œã€‚</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyAnnotationTest</span> </span>{</span><br><span class="line">    <span class="meta">@MyAnnotation1(age = 12)</span></span><br><span class="line">    <span class="meta">@MyAnnotation2("value")</span></span><br><span class="line">    String name;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<h2 id="2ã€åå°„"><a href="#2ã€åå°„" class="headerlink" title="2ã€åå°„"></a>2ã€åå°„</h2><p>Java åå°„å°±æ˜¯åœ¨<code>è¿è¡Œ</code>çŠ¶æ€ä¸­ï¼Œå¯¹äºä»»æ„ä¸€ä¸ªç±»ï¼Œéƒ½èƒ½å¤ŸçŸ¥é“è¿™ä¸ªç±»çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•ï¼›å¯¹äºä»»æ„ä¸€ä¸ªå¯¹è±¡ï¼Œéƒ½èƒ½å¤Ÿè°ƒç”¨å®ƒçš„ä»»æ„æ–¹æ³•å’Œå±æ€§ï¼Œå¹¶ä¸”èƒ½æ”¹å˜å®ƒçš„å±æ€§ã€‚</p>
<h4 id="2-1ã€è·å–-Class-ç±»çš„å®ä¾‹"><a href="#2-1ã€è·å–-Class-ç±»çš„å®ä¾‹" class="headerlink" title="2.1ã€è·å– Class ç±»çš„å®ä¾‹"></a>2.1ã€è·å– Class ç±»çš„å®ä¾‹</h4><ul>
<li><p>é€šè¿‡ç±»çš„ class å±æ€§è·å–ï¼Œå®‰å…¨å¯é ï¼Œæ€§èƒ½æœ€é«˜ã€‚</p>
<p><code>Class clz = Person.class;</code></p>
</li>
<li><p>è°ƒç”¨å®ä¾‹çš„ getClass() æ–¹æ³•ã€‚</p>
<p><code>Class clz = person.getClass();</code></p>
</li>
<li><p>é€šè¿‡ Class.forName() è·å–ã€‚</p>
<p><code>Class clz = Class.forName("com.yqx.Person");</code></p>
</li>
</ul>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test1</span><span class="params">()</span> <span class="keyword">throws</span> ClassNotFoundException </span>{</span><br><span class="line">    Class clz1 = Person.class;</span><br><span class="line">    Class clz2 = <span class="keyword">new</span> Person().getClass();</span><br><span class="line">    Class clz3 = Class.forName(<span class="string">"Person"</span>);</span><br><span class="line">    System.out.println(clz1 == clz2);	<span class="comment">// true</span></span><br><span class="line">    System.out.println(clz2 == clz3);	<span class="comment">// true</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<h4 id="2-2ã€æ‹¥æœ‰-Class-å¯¹è±¡çš„ç±»å‹"><a href="#2-2ã€æ‹¥æœ‰-Class-å¯¹è±¡çš„ç±»å‹" class="headerlink" title="2.2ã€æ‹¥æœ‰ Class å¯¹è±¡çš„ç±»å‹"></a>2.2ã€æ‹¥æœ‰ Class å¯¹è±¡çš„ç±»å‹</h4><ul>
<li>classï¼šå¤–éƒ¨ç±»ï¼Œæˆå‘˜ï¼Œå±€éƒ¨å†…éƒ¨ç±»ï¼ŒåŒ¿åå†…éƒ¨ç±»ã€‚</li>
<li>interfaceï¼šæ¥å£</li>
<li>[]ï¼šæ•°ç»„</li>
<li>enumï¼šæšä¸¾</li>
<li>annotationï¼šæ³¨è§£ @interface</li>
<li>primitive typeï¼šåŸºæœ¬æ•°æ®ç±»å‹</li>
<li>void</li>
</ul>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test2</span><span class="params">()</span></span>{</span><br><span class="line">    Class clz1 = Object.class;</span><br><span class="line">    Class clz2 = Comparable.class;</span><br><span class="line">    Class clz3 = String[].class;</span><br><span class="line">    Class clz4 = String[][].class;</span><br><span class="line">    Class clz5 = Override.class;</span><br><span class="line">    Class clz6 = ElementType.class;</span><br><span class="line">    Class clz7 = Integer.class;</span><br><span class="line">    Class clz8 = <span class="keyword">void</span>.class;</span><br><span class="line">    Class clz9 = Class.class;</span><br><span class="line"></span><br><span class="line">    System.out.println(clz1);</span><br><span class="line">    System.out.println(clz2);</span><br><span class="line">    System.out.println(clz3);</span><br><span class="line">    System.out.println(clz4);</span><br><span class="line">    System.out.println(clz5);</span><br><span class="line">    System.out.println(clz6);</span><br><span class="line">    System.out.println(clz7);</span><br><span class="line">    System.out.println(clz8);</span><br><span class="line">    System.out.println(clz9);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span>[] a = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">10</span>];</span><br><span class="line">    <span class="keyword">int</span>[] b = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">100</span>];</span><br><span class="line">    System.out.println(a.getClass() == b.getClass());</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>æ‰“å°è¾“å‡º (æ•°ç»„å³ä½¿é•¿åº¦ä¸åŒï¼Œå…¶ Class ç±»ä¹Ÿéƒ½æ˜¯ç›¸åŒçš„)</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">java</span>.<span class="title">lang</span>.<span class="title">Object</span></span></span><br><span class="line"><span class="class"><span class="title">interface</span> <span class="title">java</span>.<span class="title">lang</span>.<span class="title">Comparable</span></span></span><br><span class="line"><span class="class"><span class="title">class</span> [<span class="title">Ljava</span>.<span class="title">lang</span>.<span class="title">String</span></span>;</span><br><span class="line"><span class="class"><span class="keyword">class</span> [[<span class="title">Ljava</span>.<span class="title">lang</span>.<span class="title">String</span></span>;</span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">java</span>.<span class="title">lang</span>.<span class="title">Override</span></span></span><br><span class="line"><span class="class"><span class="title">class</span> <span class="title">java</span>.<span class="title">lang</span>.<span class="title">annotation</span>.<span class="title">ElementType</span></span></span><br><span class="line"><span class="class"><span class="title">class</span> <span class="title">java</span>.<span class="title">lang</span>.<span class="title">Integer</span></span></span><br><span class="line"><span class="class"><span class="title">void</span></span></span><br><span class="line"><span class="class"><span class="title">class</span> <span class="title">java</span>.<span class="title">lang</span>.<span class="title">Class</span></span></span><br><span class="line"><span class="class"><span class="title">true</span></span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="title">Process</span> <span class="title">finished</span> <span class="title">with</span> <span class="title">exit</span> <span class="title">code</span> 0</span></span><br></pre></td></tr></tbody></table></figure>
<h4 id="2-3ã€ç±»çš„åŠ è½½"><a href="#2-3ã€ç±»çš„åŠ è½½" class="headerlink" title="2.3ã€ç±»çš„åŠ è½½"></a>2.3ã€ç±»çš„åŠ è½½</h4><p><img src="https://z3.ax1x.com/2021/10/14/5QnMng.png" alt=""></p>
<p><img src="https://z3.ax1x.com/2021/10/14/5QnIUA.png" alt=""></p>
<h4 id="2-4ã€è·å–ç±»çš„å±æ€§åŠæ–¹æ³•"><a href="#2-4ã€è·å–ç±»çš„å±æ€§åŠæ–¹æ³•" class="headerlink" title="2.4ã€è·å–ç±»çš„å±æ€§åŠæ–¹æ³•"></a>2.4ã€è·å–ç±»çš„å±æ€§åŠæ–¹æ³•</h4><p>åå°„æœºåˆ¶å…è®¸ç¨‹åºåœ¨è¿è¡Œæ—¶å–å¾—ä»»ä½•ä¸€ä¸ªå·²çŸ¥åç§°çš„ class çš„å†…éƒ¨ä¿¡æ¯ï¼ŒåŒ…æ‹¬åŒ…æ‹¬å…¶modifiers (ä¿®é¥°ç¬¦)ï¼Œfields (å±æ€§)ï¼Œmethods (æ–¹æ³•)ç­‰ï¼Œå¹¶å¯äºè¿è¡Œæ—¶æ”¹å˜ fields å†…å®¹æˆ–è°ƒç”¨ methodsã€‚</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test3</span><span class="params">()</span> <span class="keyword">throws</span> ClassNotFoundException, IllegalAccessException, InstantiationException, NoSuchMethodException, InvocationTargetException, NoSuchFieldException </span>{</span><br><span class="line">        <span class="comment">// è·å– Class å¯¹è±¡</span></span><br><span class="line">        Class c1 = Class.forName(<span class="string">"Person"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// åˆ›å»ºå¯¹è±¡(æ— å‚)</span></span><br><span class="line">        Person person1 = (Person) c1.newInstance();</span><br><span class="line">        System.out.println(person1);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// é€šè¿‡æ„é€ å™¨åˆ›å»ºå¯¹è±¡</span></span><br><span class="line">        Constructor constructor = c1.getDeclaredConstructor(String.class, <span class="keyword">int</span>.class);</span><br><span class="line">        Person person2 = (Person) constructor.newInstance(<span class="string">"yqx"</span>, <span class="number">20</span>);</span><br><span class="line">        System.out.println(person2);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// åå°„è°ƒç”¨æ–¹æ³•</span></span><br><span class="line">        Method method1 = c1.getDeclaredMethod(<span class="string">"getName"</span>);</span><br><span class="line">        Method method2 = c1.getDeclaredMethod(<span class="string">"setName"</span>, String.class);</span><br><span class="line">        String name1 = (String) method1.invoke(person1);</span><br><span class="line">        method2.invoke(person1, <span class="string">"deflory"</span>);</span><br><span class="line">        String name2 = (String) method1.invoke(person1);</span><br><span class="line">        System.out.println(<span class="string">"Before: "</span> + name1);</span><br><span class="line">        System.out.println(<span class="string">"After: "</span> + name2);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// åå°„æ“ä½œå±æ€§</span></span><br><span class="line">        Field field = c1.getDeclaredField(<span class="string">"age"</span>);</span><br><span class="line">        field.setAccessible(<span class="keyword">true</span>);  <span class="comment">// è®¾ç½®å¯è®¿é—®çš„</span></span><br><span class="line">        field.set(person1, <span class="number">18</span>);</span><br><span class="line">        System.out.println(person1.getAge());</span><br><span class="line">    }</span><br></pre></td></tr></tbody></table></figure>
<p>æ‰“å°å†…å®¹</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line">Person{name=<span class="string">'null'</span>, age=<span class="number">0</span>}</span><br><span class="line">Person{name=<span class="string">'yqx'</span>, age=<span class="number">20</span>}</span><br><span class="line">Before: <span class="keyword">null</span></span><br><span class="line">After: deflory</span><br><span class="line"><span class="number">18</span></span><br><span class="line"></span><br><span class="line">Process finished with exit code <span class="number">0</span></span><br></pre></td></tr></tbody></table></figure>
<h4 id="2-5ã€æ€§èƒ½æµ‹è¯•"><a href="#2-5ã€æ€§èƒ½æµ‹è¯•" class="headerlink" title="2.5ã€æ€§èƒ½æµ‹è¯•"></a>2.5ã€æ€§èƒ½æµ‹è¯•</h4><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test4</span><span class="params">()</span> <span class="keyword">throws</span> NoSuchMethodException, InvocationTargetException, IllegalAccessException </span>{</span><br><span class="line">    <span class="comment">// æ™®é€šæ–¹æ³•</span></span><br><span class="line">    Person person = <span class="keyword">new</span> Person();</span><br><span class="line">    <span class="keyword">long</span> start = System.currentTimeMillis();</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">1e9</span>;i++){</span><br><span class="line">        person.getAge();</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">long</span> end = System.currentTimeMillis();</span><br><span class="line">    System.out.println(<span class="string">"æ™®é€šæ–¹æ³•ç”¨æ—¶ï¼š"</span> + (end - start) + <span class="string">"ms"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åå°„(æ£€æµ‹å¼€å¯)</span></span><br><span class="line">    Method method = Person.class.getDeclaredMethod(<span class="string">"getAge"</span>);</span><br><span class="line">    start = System.currentTimeMillis();</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">1e9</span>;i++){</span><br><span class="line">        method.invoke(person);</span><br><span class="line">    }</span><br><span class="line">    end = System.currentTimeMillis();</span><br><span class="line">    System.out.println(<span class="string">"åå°„(æ£€æµ‹å¼€å¯)ç”¨æ—¶ï¼š"</span> + (end - start) + <span class="string">"ms"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åå°„(æ£€æµ‹å…³é—­)</span></span><br><span class="line">    method.setAccessible(<span class="keyword">true</span>);</span><br><span class="line">    start = System.currentTimeMillis();</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">1e9</span>;i++){</span><br><span class="line">        method.invoke(person);</span><br><span class="line">    }</span><br><span class="line">    end = System.currentTimeMillis();</span><br><span class="line">    System.out.println(<span class="string">"åå°„(æ£€æµ‹å…³é—­)ç”¨æ—¶ï¼š"</span> + (end - start) + <span class="string">"ms"</span>);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>æ‰“å°å†…å®¹</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line">æ™®é€šæ–¹æ³•ç”¨æ—¶ï¼š1379ms</span><br><span class="line">åå°„(æ£€æµ‹å¼€å¯)ç”¨æ—¶ï¼š1863ms</span><br><span class="line">åå°„(æ£€æµ‹å…³é—­)ç”¨æ—¶ï¼š1591ms</span><br><span class="line"></span><br><span class="line">Process finished with exit code <span class="number">0</span></span><br></pre></td></tr></tbody></table></figure>
<h4 id="2-6ã€åå°„æ“ä½œæ³›å‹"><a href="#2-6ã€åå°„æ“ä½œæ³›å‹" class="headerlink" title="2.6ã€åå°„æ“ä½œæ³›å‹"></a>2.6ã€åå°„æ“ä½œæ³›å‹</h4><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test5</span><span class="params">()</span> <span class="keyword">throws</span> NoSuchMethodException </span>{</span><br><span class="line">    Method test01 = Person.class.getDeclaredMethod(<span class="string">"test01"</span>, Map.class, List.class);</span><br><span class="line">    Method test02 = Person.class.getDeclaredMethod(<span class="string">"test02"</span>);</span><br><span class="line"></span><br><span class="line">    System.out.println(<span class="string">"test01(å‚æ•°æ³›å‹)"</span>);</span><br><span class="line">    Type[] genericParameterTypes = test01.getGenericParameterTypes();</span><br><span class="line">    <span class="keyword">for</span>(Type genericParameterType : genericParameterTypes){</span><br><span class="line">        System.out.println(genericParameterType);</span><br><span class="line">        <span class="keyword">if</span> (genericParameterType <span class="keyword">instanceof</span> ParameterizedType){</span><br><span class="line">            Type[] actualTypeArguments = ((ParameterizedType) genericParameterType).getActualTypeArguments();</span><br><span class="line">            <span class="keyword">for</span>(Type actualTypeArgument : actualTypeArguments){</span><br><span class="line">                System.out.println(actualTypeArgument);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    System.out.println(<span class="string">"\ntest02(è¿”å›å€¼æ³›å‹)"</span>);</span><br><span class="line">    Type getGenericReturnType = test02.getGenericReturnType();</span><br><span class="line">    System.out.println(getGenericReturnType);</span><br><span class="line">    <span class="keyword">if</span> (getGenericReturnType <span class="keyword">instanceof</span> ParameterizedType){</span><br><span class="line">        Type[] actualTypeArguments = ((ParameterizedType) getGenericReturnType).getActualTypeArguments();</span><br><span class="line">        <span class="keyword">for</span>(Type actualTypeArgument : actualTypeArguments){</span><br><span class="line">            System.out.println(actualTypeArgument);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>æ‰“å°å†…å®¹</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line">test01(å‚æ•°æ³›å‹)</span><br><span class="line">java.util.Map&lt;java.lang.String, java.lang.Integer&gt;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">java</span>.<span class="title">lang</span>.<span class="title">String</span></span></span><br><span class="line"><span class="class"><span class="title">class</span> <span class="title">java</span>.<span class="title">lang</span>.<span class="title">Integer</span></span></span><br><span class="line"><span class="class"><span class="title">java</span>.<span class="title">util</span>.<span class="title">List</span>&lt;<span class="title">java</span>.<span class="title">lang</span>.<span class="title">Character</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">class</span> <span class="title">java</span>.<span class="title">lang</span>.<span class="title">Character</span></span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="title">test02</span>(è¿”å›å€¼æ³›å‹)</span></span><br><span class="line"><span class="class"><span class="title">java</span>.<span class="title">util</span>.<span class="title">Map</span>&lt;<span class="title">java</span>.<span class="title">lang</span>.<span class="title">String</span>, <span class="title">java</span>.<span class="title">lang</span>.<span class="title">Integer</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">class</span> <span class="title">java</span>.<span class="title">lang</span>.<span class="title">String</span></span></span><br><span class="line"><span class="class"><span class="title">class</span> <span class="title">java</span>.<span class="title">lang</span>.<span class="title">Integer</span></span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="title">Process</span> <span class="title">finished</span> <span class="title">with</span> <span class="title">exit</span> <span class="title">code</span> </span></span><br></pre></td></tr></tbody></table></figure>
]]></content>
  </entry>
  <entry>
    <title>ç¥ç»ç½‘ç»œæƒé‡çš„åˆå§‹åŒ–</title>
    <url>/2021/10/16/%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C%E6%9D%83%E9%87%8D%E7%9A%84%E5%88%9D%E5%A7%8B%E5%8C%96/</url>
    <content><![CDATA[<p>å½“æˆ‘ä»¬åœ¨è®­ç»ƒä¸€ä¸ªç¥ç»ç½‘ç»œçš„æ—¶å€™ï¼Œå‚æ•°çš„éšæœºåˆå§‹åŒ–æ˜¯éå¸¸é‡è¦çš„ï¼Œå¯¹äºé€»è¾‘å›å½’æ¥è¯´ï¼Œå¯ä»¥å°†æƒé‡åˆå§‹åŒ–ä¸º0ã€‚è€Œå¯¹äºç¥ç»ç½‘ç»œè€Œè¨€ï¼Œè¿™æ ·åšå°†ä¼šå¯¼è‡´æ¢¯åº¦ä¸‹é™ç®—æ³•æ— æ³•èµ·ä½œç”¨ã€‚</p>
<h2 id="1-ä¸ºä»€ä¹ˆä½¿ç”¨äºé€»è¾‘å›å½’ï¼Ÿ"><a href="#1-ä¸ºä»€ä¹ˆä½¿ç”¨äºé€»è¾‘å›å½’ï¼Ÿ" class="headerlink" title="1. ä¸ºä»€ä¹ˆä½¿ç”¨äºé€»è¾‘å›å½’ï¼Ÿ"></a>1. ä¸ºä»€ä¹ˆä½¿ç”¨äºé€»è¾‘å›å½’ï¼Ÿ</h2><p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå…¶ä¸­$X_1$ å’Œ $X_2$ æ˜¯ç‰¹å¾å€¼ã€‚</p>
<p><img src="https://z3.ax1x.com/2021/10/16/5JSZ2F.png" alt=""></p>
<p><strong>å‰å‘ä¼ æ’­</strong>ï¼š</p>
<p>$a_1 = sigmoid(X_1 <em> W_1 + X_2 </em> W_2 + b)$</p>
<p>$loss = -ylog(a_1) - (1 - y)log(1 - a_1)$</p>
<p><strong>åå‘ä¼ æ’­</strong>ï¼š</p>
<p>$da_1 = -\frac{y}{a_1} + \frac{1 - y}{1 - a_1}$</p>
<p>$dw_1 = da_1 <em> aâ€™_1 </em> X_1 = (a_1 - y) * X_1$</p>
<p>$dw_2 = da_1 <em> aâ€™_1 </em> X_2 = (a_1 - y) * X_2$</p>
<p>$db = da_1 <em> aâ€™_1 </em> 1 = a_1 - y$</p>
<p><strong>å‚æ•°æ›´æ–°</strong>ï¼š</p>
<p>$W_1 = w_1 - Î· * dw_1$</p>
<p>$W_2 = w_2 - Î· * dw_2$</p>
<p>$b = b - Î· * db$</p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œ $W_1$ å’Œ $W_2$  å¹¶ä¸å½±å“ $dw_1$ å’Œ $dw_2$ çš„å€¼ï¼Œè€Œæ˜¯æ ¹æ® $X_1$ å’Œ $X_2$ çš„ä¸åŒè€Œæ”¹å˜ï¼Œä¸”ä¸ä¸º0ï¼Œæ¨¡å‹çš„æƒé‡èƒ½å¤Ÿå¾—åˆ°æ›´æ–°ã€‚å› æ­¤å³ä½¿æˆ‘ä»¬å°† $W_1$ å’Œ $W_2$ åˆå§‹åŒ–ä¸º0ä¹Ÿæ— æ‰€è°“ã€‚å‚æ•° åŒç†ã€‚</p>
<h2 id="2-ä¸ºä»€ä¹ˆä¸é€‚ç”¨äºç¥ç»ç½‘ç»œ"><a href="#2-ä¸ºä»€ä¹ˆä¸é€‚ç”¨äºç¥ç»ç½‘ç»œ" class="headerlink" title="2. ä¸ºä»€ä¹ˆä¸é€‚ç”¨äºç¥ç»ç½‘ç»œ?"></a>2. ä¸ºä»€ä¹ˆä¸é€‚ç”¨äºç¥ç»ç½‘ç»œ?</h2><p>ç¥ç»ç½‘ç»œç»“æ„å›¾å¦‚ä¸‹ã€‚</p>
<p><img src="https://z3.ax1x.com/2021/10/16/5J9qER.png" alt=""></p>
<p><strong>å‰å‘ä¼ æ’­</strong>ï¼š</p>
<p>$a_1 = f(X_1 <em> W_{11} + X_2 </em> W_{21} + b_1)$</p>
<p>$a_2 = f(X_1 <em> W_{12} + X_2 </em> W_{22} + b_2)$</p>
<p>$a_3 = sigmoid(a_1 <em> W_{13} + a_2 </em> W_{23} + b_3)$</p>
<p>$loss = -ylog(a_3) - (1 - y)log(1 - a_3)$</p>
<p><strong>åå‘ä¼ æ’­</strong>ï¼š</p>
<p>$da_3 = -\frac{y}{a_3} + \frac{1 - y}{1 - a_3}$</p>
<p>$dw_{13} = da_3 <em> aâ€™_3 </em> a_1 = (a_3 - y) * a_1$</p>
<p>$dw_{23} = da_3 <em> aâ€™_3 </em> a_2 = (a_3 - y) * a_2$</p>
<p>$db_{3} = da_3 <em> aâ€™_3 </em> 1 = a_3 - y$</p>
<p>$da_1 = da_3 <em> aâ€™_3 </em> W_{13} = (a_3 - y) * W_{13}$</p>
<p>$da_2 = da_3 <em> aâ€™_3 </em> W_{23} = (a_3 - y) * W_{23}$</p>
<p>$dw_{12} = da_2 <em> aâ€™_2 </em> X_1$</p>
<p>$dw_{22} = da_2 <em> aâ€™_2 </em> X_2$</p>
<p>$db_{2} = da_2 * aâ€™_2$</p>
<p>$dw_{11} = da_1 <em> aâ€™_1 </em> X_1$</p>
<p>$dw_{21} = da_1 <em> aâ€™_1 </em> X_2$</p>
<p>$db_{1} = da_1 * aâ€™_1$</p>
<p><strong>å‚æ•°æ›´æ–°</strong>ï¼š</p>
<p>$W_1 = w_1 - Î· * dw_1$</p>
<p>$W_2 = w_2 - Î· * dw_2$</p>
<p>$b = b - Î· * db$</p>
<p>æ ¹æ®ä¸Šè¿°çš„è¯¦ç»†å…¬å¼ï¼Œæˆ‘ä»¬åˆ†æä¸€ä¸‹3ç§æƒ…å†µï¼š</p>
<ul>
<li>æ¨¡å‹æ‰€æœ‰æƒé‡ W åˆå§‹åŒ–ä¸º0ï¼Œæ‰€æœ‰åç½® b åˆå§‹åŒ–ä¸º0</li>
<li>æ¨¡å‹æ‰€æœ‰æƒé‡ W åˆå§‹åŒ–ä¸º0ï¼Œæ‰€æœ‰åç½® b éšæœºåˆå§‹åŒ–</li>
<li>æ¨¡å‹æ‰€æœ‰çš„æƒé‡ W éšæœºåˆå§‹åŒ–ï¼Œæ‰€æœ‰åç½® b åˆå§‹åŒ–ä¸º0</li>
</ul>
<h4 id="2-1-æ¨¡å‹æ‰€æœ‰æƒé‡-W-åˆå§‹åŒ–ä¸º0ï¼Œæ‰€æœ‰åç½®-b-åˆå§‹åŒ–ä¸º0"><a href="#2-1-æ¨¡å‹æ‰€æœ‰æƒé‡-W-åˆå§‹åŒ–ä¸º0ï¼Œæ‰€æœ‰åç½®-b-åˆå§‹åŒ–ä¸º0" class="headerlink" title="2.1 æ¨¡å‹æ‰€æœ‰æƒé‡ W åˆå§‹åŒ–ä¸º0ï¼Œæ‰€æœ‰åç½® b åˆå§‹åŒ–ä¸º0"></a>2.1 æ¨¡å‹æ‰€æœ‰æƒé‡ W åˆå§‹åŒ–ä¸º0ï¼Œæ‰€æœ‰åç½® b åˆå§‹åŒ–ä¸º0</h4><p>åœ¨æ­¤æƒ…å†µä¸‹ï¼Œ ç¬¬ä¸€ä¸ª batch çš„å‰å‘ä¼ æ’­è¿‡ç¨‹æ—¶ï¼Œ$a_1 = f(0), a_2 = f(0), a_3 = sigmoid(0)$ã€‚åœ¨åå‘ä¼ æ’­è¿›è¡Œå‚æ•°æ›´æ–°çš„æ—¶å€™ï¼Œä¼šå‘ç° $a_1 = a_2 = f(0) \ \  =&gt;\ \  dw_{13} = dw_{23}$ï¼Œ$W_{13} = W_{23} = 0 \ \  =&gt; \ \ da_1 = da_2 = 0$ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨ç¬¬ä¸€ä¸ª batch ä¸­ï¼Œåªæœ‰ $W_{13}$ å’Œ ${W_{23}}$ è¿›è¡Œäº†æ›´æ–°å¹¶ä¸”<code>ç›¸ç­‰</code>ï¼Œè€Œå…¶å®ƒå‚æ•°å‡æ²¡æœ‰æ›´æ–°ã€‚</p>
<p>è€Œå½“ç¬¬äºŒä¸ª batch ä¼ ç»™ç¥ç»ç½‘ç»œæ—¶ï¼Œ$W_{13} = W_{23} \neq 0 \ \  =&gt;\ \  da_1 = da_2 \ \ =&gt; dw_{21} = dw_{22},\ dw_{11} = dw_{12}$ã€‚</p>
<p>ä»¥æ­¤ç±»æ¨ï¼Œæ— è®ºè®­ç»ƒå¤šå°‘æ¬¡ï¼Œæ— è®ºéšè—å±‚ç¥ç»å…ƒæœ‰å¤šå°‘ä¸ªï¼Œç”±äºæƒé‡çš„<code>å¯¹ç§°æ€§</code>ï¼Œéšè—å±‚ç¥ç»å•å…ƒçš„è¾“å‡ºå§‹ç»ˆä¸å˜(æƒé‡ç›¸ç­‰)ã€‚æˆ‘ä»¬å¸Œæœ›ä¸åŒçš„ç¥ç»å…ƒèƒ½å¤Ÿæœ‰ä¸åŒçš„è¾“å‡ºï¼Œè¿™æ ·çš„ç¥ç»ç½‘ç»œæ‰æœ‰æ„ä¹‰ã€‚</p>
<p><strong>æ€»ç»“ï¼šå°†æƒé‡ W åˆå§‹åŒ–ä¸º0ï¼Œä¼šå¯¼è‡´åŒä¸€éšè—å±‚çš„æ‰€æœ‰ç¥ç»å…ƒè¾“å‡ºéƒ½ä¸€è‡´ã€‚å¯¹äºåæœŸä¸åŒçš„ batchï¼Œæ¯ä¸€éšè—å±‚çš„æƒé‡éƒ½èƒ½å¾—åˆ°æ›´æ–°ï¼Œä½†æ˜¯æ¯ä¸€éšè—å±‚ç¥ç»å…ƒçš„æƒé‡éƒ½æ˜¯ä¸€è‡´çš„ï¼Œå¤šä¸ªéšè—ç¥ç»å…ƒçš„ä½œç”¨å°±å¦‚åŒ1ä¸ªç¥ç»å…ƒã€‚</strong></p>
<h4 id="2-2-æ¨¡å‹æ‰€æœ‰æƒé‡-W-åˆå§‹åŒ–ä¸º0ï¼Œæ‰€æœ‰åç½®-b-éšæœºåˆå§‹åŒ–"><a href="#2-2-æ¨¡å‹æ‰€æœ‰æƒé‡-W-åˆå§‹åŒ–ä¸º0ï¼Œæ‰€æœ‰åç½®-b-éšæœºåˆå§‹åŒ–" class="headerlink" title="2.2 æ¨¡å‹æ‰€æœ‰æƒé‡ W åˆå§‹åŒ–ä¸º0ï¼Œæ‰€æœ‰åç½® b éšæœºåˆå§‹åŒ–"></a>2.2 æ¨¡å‹æ‰€æœ‰æƒé‡ W åˆå§‹åŒ–ä¸º0ï¼Œæ‰€æœ‰åç½® b éšæœºåˆå§‹åŒ–</h4><p>åœ¨æ­¤æƒ…å†µä¸‹ï¼Œç¬¬ä¸€ä¸ª batch çš„å‰å‘ä¼ æ’­è¿‡ç¨‹æ—¶ï¼Œ$a_1 = f(b_1), a_2 = f(b_2), a_3 = sigmoid(b_3)$ï¼Œåœ¨åå‘ä¼ æ’­è¿‡ç¨‹æ—¶ï¼Œ$da_1 = da_2 = 0 \ \ =&gt; \ \ dw_{11} = dw_{12} = dw_{21} = dw_{22} = 0$ï¼Œå› æ­¤ç¬¬ä¸€ä¸ª batch ä¸­åªæœ‰ $W_{13}, W_{23}$ å’Œ $B_{3}$ èƒ½å¾—åˆ°æ›´æ–°ã€‚</p>
<p>åŒç†ï¼Œåœ¨ç¬¬äºŒä¸ª batch åå‘ä¼ æ’­çš„è¿‡ç¨‹ä¸­ï¼Œç”±äº $W_{13}$ å’Œ $W_{23}$ ä¸ä¸º0ï¼Œå› æ­¤æ‰€æœ‰çš„å‚æ•°éƒ½èƒ½å¾—åˆ°æ›´æ–°ã€‚<strong>è¿™ç§æ–¹å¼å­˜åœ¨æ›´æ–°è¾ƒæ…¢ã€æ¢¯åº¦æ¶ˆå¤±ã€æ¢¯åº¦çˆ†ç‚¸ç­‰é—®é¢˜ï¼Œåœ¨å®è·µä¸­ï¼Œé€šå¸¸ä¸ä¼šé€‰æ‹©è¯¥æ–¹æ³•ã€‚</strong></p>
<h4 id="2-3-æ¨¡å‹æ‰€æœ‰çš„æƒé‡-W-éšæœºåˆå§‹åŒ–ï¼Œæ‰€æœ‰åç½®-b-åˆå§‹åŒ–ä¸º0"><a href="#2-3-æ¨¡å‹æ‰€æœ‰çš„æƒé‡-W-éšæœºåˆå§‹åŒ–ï¼Œæ‰€æœ‰åç½®-b-åˆå§‹åŒ–ä¸º0" class="headerlink" title="2.3 æ¨¡å‹æ‰€æœ‰çš„æƒé‡ W éšæœºåˆå§‹åŒ–ï¼Œæ‰€æœ‰åç½® b åˆå§‹åŒ–ä¸º0"></a>2.3 æ¨¡å‹æ‰€æœ‰çš„æƒé‡ W éšæœºåˆå§‹åŒ–ï¼Œæ‰€æœ‰åç½® b åˆå§‹åŒ–ä¸º0</h4><p>åœ¨æ­¤æƒ…å†µä¸‹ï¼Œç¬¬ä¸€ä¸ª batch çš„å‰å‘ä¼ æ’­è¿‡ç¨‹æ—¶ï¼Œç”±äº $W_{13}$ å’Œ $W_{23}$ ä¸ä¸º0ï¼Œå› æ­¤æ‰€æœ‰çš„å‚æ•°å¯ä»¥ç›´æ¥å¾—åˆ°æ›´æ–°ã€‚</p>
<h2 id="ç»“è®ºï¼šåœ¨è®­ç»ƒç¥ç»ç½‘ç»œçš„æ—¶å€™ï¼Œæƒé‡åˆå§‹åŒ–è¦è°¨æ…ï¼Œä¸èƒ½åˆå§‹åŒ–ä¸º0ï¼"><a href="#ç»“è®ºï¼šåœ¨è®­ç»ƒç¥ç»ç½‘ç»œçš„æ—¶å€™ï¼Œæƒé‡åˆå§‹åŒ–è¦è°¨æ…ï¼Œä¸èƒ½åˆå§‹åŒ–ä¸º0ï¼" class="headerlink" title="ç»“è®ºï¼šåœ¨è®­ç»ƒç¥ç»ç½‘ç»œçš„æ—¶å€™ï¼Œæƒé‡åˆå§‹åŒ–è¦è°¨æ…ï¼Œä¸èƒ½åˆå§‹åŒ–ä¸º0ï¼"></a><strong>ç»“è®ºï¼šåœ¨è®­ç»ƒç¥ç»ç½‘ç»œçš„æ—¶å€™ï¼Œæƒé‡åˆå§‹åŒ–è¦è°¨æ…ï¼Œä¸èƒ½åˆå§‹åŒ–ä¸º0ï¼</strong></h2>]]></content>
      <categories>
        <category>Deep Learning</category>
      </categories>
  </entry>
  <entry>
    <title>çº¿æ€§å›å½’</title>
    <url>/2021/09/13/%E7%BA%BF%E6%80%A7%E5%9B%9E%E5%BD%92/</url>
    <content><![CDATA[<h2 id="ç®—æ³•æ€æƒ³"><a href="#ç®—æ³•æ€æƒ³" class="headerlink" title="ç®—æ³•æ€æƒ³"></a>ç®—æ³•æ€æƒ³</h2><p>ç”¨äºè§£å†³å›å½’é—®é¢˜ï¼Œåšæ³•å°±æ˜¯æ‰¾ä¸€æ¡æœ€èƒ½æ‹Ÿåˆæµ‹è¯•æ•°æ®çš„ç›´çº¿ï¼Œæ±‚è¯¥æ‹Ÿåˆç›´çº¿çš„æ–œç‡å’Œæˆªè·å°±æ˜¯æœ€å€¼é—®é¢˜ï¼Œå¯ä»¥é€šè¿‡æ¢¯åº¦ä¸‹é™æ³•è§£å†³ã€‚é¢„æµ‹æ•°æ®ä¹Ÿæ¯”è¾ƒç®€å•ï¼Œå°†æ•°æ®ä»£å…¥ç›´çº¿ä¸­æ±‚å‡ºç»“æœå³å¯ã€‚</p>
<p><img src="https://z3.ax1x.com/2021/10/15/51Iy7R.png" alt=""></p>
<p><br></p>
<h2 id="å®ä¾‹"><a href="#å®ä¾‹" class="headerlink" title="å®ä¾‹"></a>å®ä¾‹</h2><p>åœ¨ä¸¾ä¾‹ä¹‹å‰ï¼Œå…ˆä»‹ç»å‡ ç§æ±‚è¯¯å·®çš„æ–¹æ³•ã€‚</p>
<ol>
<li><p>MSE (Mean Square Error) å‡æ–¹è¯¯å·®</p>
<p>$\frac{1}{m}\sum\limits_{n=1}^{m} (y - y_n)^2$</p>
</li>
<li><p>RMSE (Root Mean Square Error) å‡æ–¹æ ¹è¯¯å·®</p>
<p>$\sqrt{\frac{1}{m}\sum\limits_{n=1}^m (y - y_n)^2}$</p>
</li>
<li><p>MAE (Mean Absolute Error) å¹³å‡ç»å¯¹è¯¯å·®</p>
<p>$\frac{1}{m}\sum\limits_{n=1}^{m} |y - y_n|$</p>
<p>ä¸Šè¿°ä¸‰ç§ä¸­ï¼Œå‡æ–¹è¯¯å·®å’Œå‡æ–¹æ ¹è¯¯å·®åªæ˜¯å·®äº†ä¸ªæ ¹å·ï¼Œæœ¬è´¨æ˜¯ä¸€æ ·çš„ï¼Œéƒ½æ˜¯æ±‚é¢„æµ‹å€¼ä¸çœŸå®å€¼çš„å¹³æ–¹å·®ã€‚</p>
<p>å› ä¸ºæ˜¯å¹³æ–¹å·®ï¼Œä¼šå¯¹æåº¦åé¢‡çš„æ•°æ®ç‰¹åˆ«æ•æ„Ÿï¼Œå› æ­¤ä¼šç€é‡å»æ‹Ÿåˆè¿™éƒ¨åˆ†æ•°æ®ã€‚</p>
<p>è€Œç»å¯¹å€¼å¯¹æ‰€æœ‰çš„æ•°æ®éƒ½æ˜¯ä¸€æ ·çš„ï¼Œæ²¡æœ‰ä¾§é‡ç‚¹ã€‚</p>
</li>
</ol>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line">x = np.arange(-<span class="number">10</span>, <span class="number">10</span>, <span class="number">0.2</span>).reshape([<span class="number">100</span>,<span class="number">1</span>])</span><br><span class="line">y = <span class="number">3.5</span> * x + np.random.normal(<span class="number">0</span>, <span class="number">20</span>, <span class="number">100</span>).reshape([<span class="number">100</span>,<span class="number">1</span>])</span><br><span class="line"></span><br><span class="line">plt.scatter(x,y)</span><br><span class="line">plt.plot([-<span class="number">10</span>, <span class="number">10</span>],[-<span class="number">55</span>, <span class="number">55</span>], color = <span class="string">"red"</span>)</span><br></pre></td></tr></tbody></table></figure>
<p><img src="https://z3.ax1x.com/2021/09/13/4PSGuR.png" alt=""></p>
<p>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œè“è‰²çš„ç¦»æ•£ç‚¹å°±æ˜¯æˆ‘ä»¬çš„æµ‹è¯•æ•°æ®ï¼Œçº¢è‰²æ˜¯è¦æ±‚çš„æ‹Ÿåˆæ›²çº¿ï¼Œæ–¹ç¨‹ä¸º$y = ax + b$ã€‚</p>
<p>æˆ‘ä»¬éœ€è¦è®©è¿™æ¡ç›´çº¿çš„é¢„æµ‹å€¼å’ŒçœŸå®å€¼çš„è¯¯å·®å°½å¯èƒ½å°ï¼Œå› æ­¤æˆæœ¬å‡½æ•°ä¸º</p>
<p>$cost = \frac{1}{m}\sum\limits_{n=1}^{m} (ax_n + b - y_n)^2$     ï¼ˆMSEï¼‰</p>
<p>æ­¤å¤„$x_n$å’Œ$y_n$éƒ½æ˜¯å·²çŸ¥çš„æ•°æ®ï¼Œaå’Œbæ‰æ˜¯æˆ‘ä»¬è¦æ±‚çš„æœªçŸ¥æ•°ã€‚</p>
<p>è¯¥æˆæœ¬å‡½æ•°çš„åå¯¼å‡½æ•°ä¸º</p>
<p>$\frac{dcost}{da} = \frac{2}{m}\sum\limits_{n=1}^{m} x_n(ax_n + b - y_n)$</p>
<p>$\frac{dcost}{db} = \frac{2}{m}\sum\limits_{n=1}^{m} (ax_n + b - y_n)$</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">J</span>(<span class="params">a, b, x, y</span>):</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>/<span class="built_in">len</span>(x) * np.<span class="built_in">sum</span>((a * x + b - y) ** <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">DJ_a</span>(<span class="params">a, b, x, y</span>):</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">2</span> / <span class="built_in">len</span>(x) * np.<span class="built_in">sum</span>(x * (a * x + b - y))</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">DJ_b</span>(<span class="params">a, b, x, y</span>):</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">2</span> / <span class="built_in">len</span>(x) * np.<span class="built_in">sum</span>(a * x + b - y)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">gradient_descent</span>(<span class="params">a, b, eta, epsilon = <span class="number">1e-6</span></span>):</span></span><br><span class="line">    i_iter = <span class="number">0</span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        last_a = a</span><br><span class="line">        last_b = b</span><br><span class="line">        a = a - eta * DJ_a(a, b, x, y)</span><br><span class="line">        b = b - eta * DJ_b(a, b, x, y)</span><br><span class="line">        <span class="keyword">if</span> np.<span class="built_in">abs</span>(J(last_a, last_b, x, y) - J(a, b, x, y)) &lt; epsilon:</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">return</span> a, b</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">a = <span class="number">0</span></span><br><span class="line">b = <span class="number">0</span></span><br><span class="line">eta = <span class="number">0.02</span></span><br><span class="line">epsilon = <span class="number">1e-6</span></span><br><span class="line"></span><br><span class="line">a, b = gradient_descent(a, b, eta, epsilon)</span><br><span class="line"></span><br><span class="line">plt.plot([-<span class="number">10</span>, <span class="number">10</span>],[-<span class="number">10</span> * a + b, <span class="number">10</span> * a + b], color = <span class="string">"red"</span>)</span><br><span class="line">plt.scatter(x,y)</span><br><span class="line">plt.show()</span><br></pre></td></tr></tbody></table></figure>
<p><img src="https://z3.ax1x.com/2021/09/13/4PfaGT.png" alt=""></p>
<p>æ•ˆæœä¹Ÿæ˜¯æŒºä¸é”™çš„ï¼Œä¸è¿‡è¿™æ˜¯ä¸€å…ƒçš„æƒ…å†µï¼Œå¯ä»¥å†™ä¸¤ä¸ªDJ_aå’ŒDJ_bï¼Œä½†å¦‚æœæ˜¯ç™¾å…ƒå‘¢ï¼Ÿ</p>
<p>ä¸‹é¢å°†ä¼šå®ç°ä¸€ç§é€šç”¨çš„æ¢¯åº¦ä¸‹é™æ³•ã€‚</p>
<p><br></p>
<p>å…ˆæ›´æ”¹ä¸€ä¸‹æˆ‘ä»¬çš„æˆæœ¬å‡½æ•°ï¼Œå…¶ä¸­Î¸æ˜¯ç³»æ•°çŸ©é˜µï¼Œå¯¹äºä¸€å…ƒå‡½æ•°ï¼Œå®ƒçš„shapeå°±æ˜¯(2, )ï¼Œxéœ€è¦å†æ·»ä¸€åˆ—ï¼ˆæ•°å€¼ä¸º1ï¼‰ï¼Œè¿™æ ·x <em> a + 1 </em> bå°±æ­£å¥½æ˜¯æˆ‘ä»¬çš„ç›´çº¿æ–¹ç¨‹é¢„æµ‹å€¼ã€‚</p>
<p>$cost = \frac{1}{m}\sum (x.dot(Î¸) - y)^2$     ï¼ˆMSEï¼‰</p>
<p>å¯¼å‡½æ•°</p>
<p>$\frac{dcost}{dÎ¸} = \frac{2}{m} x.t.dot((x.dot(Î¸) - y))$</p>
<p>æ¨å¯¼è¿‡ç¨‹</p>
<p><img src="https://z3.ax1x.com/2021/09/13/4iWVJK.png" alt=""></p>
<p><img src="https://z3.ax1x.com/2021/09/13/4iRJKJ.png" alt=""></p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">J</span>(<span class="params">theta, x, y</span>):</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>/<span class="built_in">len</span>(x) * np.<span class="built_in">sum</span>((x.dot(theta) - y) ** <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">DJ</span>(<span class="params">theta, x, y</span>):</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">2</span> / <span class="built_in">len</span>(x) * (x.T.dot(x.dot(theta) - y))</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">gradient_descent</span>(<span class="params">theta, x, y, eta, n_iters = <span class="number">2e5</span>, epsilon = <span class="number">1e-6</span></span>):</span></span><br><span class="line">    i_iter = <span class="number">0</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">while</span> i_iter &lt; n_iters:</span><br><span class="line">        last_theta = theta</span><br><span class="line">        theta = theta - eta * DJ(theta, x, y)</span><br><span class="line">        <span class="keyword">if</span> np.<span class="built_in">abs</span>(J(last_theta, x, y) - J(theta, x, y)) &lt; epsilon:</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        i_iter += <span class="number">1</span></span><br><span class="line">        </span><br><span class="line">    <span class="keyword">return</span> theta</span><br></pre></td></tr></tbody></table></figure>
<p><br></p>
<p>ç„¶åæˆ‘ä»¬æ¥æ‹Ÿåˆåˆšåˆšéšæœºçš„æ•°æ®</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">x = np.hstack([x, np.ones([<span class="number">100</span>, <span class="number">1</span>])])</span><br><span class="line"></span><br><span class="line">theta = np.zeros([<span class="number">2</span>])</span><br><span class="line">eta = <span class="number">0.02</span></span><br><span class="line">y = y.reshape([<span class="number">100</span>])</span><br><span class="line">theta = gradient_descent(theta, x, y, eta)</span><br><span class="line"></span><br><span class="line">plt.plot([-<span class="number">10</span>, <span class="number">10</span>],[-<span class="number">10</span> * theta[<span class="number">0</span>] + theta[<span class="number">1</span>], <span class="number">10</span> * theta[<span class="number">0</span>] + theta[<span class="number">1</span>]], color = <span class="string">"red"</span>)</span><br><span class="line">plt.scatter(x[:, <span class="number">0</span>],y.reshape([<span class="number">100</span>, <span class="number">1</span>]))</span><br><span class="line">plt.show()</span><br><span class="line"></span><br><span class="line">theta 		<span class="comment"># array([3.4686148, -1.06100372])</span></span><br></pre></td></tr></tbody></table></figure>
<p><img src="https://z3.ax1x.com/2021/09/13/4ifDnH.png" alt=""></p>
<p>æ˜¾ç„¶ï¼Œè¿™æ¡ç›´çº¿è¿˜æ˜¯èƒ½è¾ƒå¥½æ‹Ÿåˆè¿™ä¸ªæµ‹è¯•æ•°æ®çš„ã€‚</p>
<p>theta[0] = 3.4686148 â‰ˆ 3.5ï¼Œä¹Ÿå’Œæˆ‘ä»¬é¢„è®¾çš„åŸºæœ¬ä¸€è‡´ã€‚</p>
<h2 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h2><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LinearRegression</span>:</span></span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self</span>):</span></span><br><span class="line">        self.X = <span class="literal">None</span></span><br><span class="line">        self.y = <span class="literal">None</span></span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">fit</span>(<span class="params">self, X, y</span>):</span></span><br><span class="line">        self.X = X</span><br><span class="line">        self.y = y</span><br><span class="line">        self.<span class="built_in">len</span> = <span class="built_in">len</span>(X)</span><br><span class="line">        self.X_b = np.hstack([self.X, np.ones([self.<span class="built_in">len</span>, <span class="number">1</span>])])</span><br><span class="line">        <span class="keyword">return</span> self</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">J</span>(<span class="params">self, theta</span>):</span></span><br><span class="line">        <span class="keyword">return</span> np.<span class="built_in">sum</span>((self.y - self.X_b.dot(theta)) ** <span class="number">2</span>) / self.<span class="built_in">len</span></span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">DJ</span>(<span class="params">self, theta</span>):</span></span><br><span class="line">        <span class="keyword">return</span> self.X_b.T.dot(self.X_b.dot(theta) - y) * <span class="number">2</span> / self.<span class="built_in">len</span></span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">transform</span>(<span class="params">self, eta = <span class="number">0.01</span>, n_iters = <span class="number">1e5</span>, epsilon = <span class="number">1e-8</span></span>):</span></span><br><span class="line">        <span class="keyword">assert</span> self.X_b <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span> <span class="keyword">and</span> self.y <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>, \</span><br><span class="line">        <span class="string">"must fit before transform"</span></span><br><span class="line">        </span><br><span class="line">        theta = np.zeros(self.X.shape[<span class="number">1</span>] + <span class="number">1</span>)</span><br><span class="line">        i_iter = <span class="number">0</span></span><br><span class="line">        <span class="keyword">while</span> i_iter &lt; n_iters:</span><br><span class="line">            last_theta = theta</span><br><span class="line">            theta = theta - eta * self.DJ(theta)</span><br><span class="line">            <span class="keyword">if</span> np.<span class="built_in">abs</span>(self.J(theta) - self.J(last_theta)) &lt; epsilon:</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            i_iter += <span class="number">1</span></span><br><span class="line">        self.theta = theta</span><br><span class="line">        self.intercept = self.theta[-<span class="number">1</span>]</span><br><span class="line">        self.coefficient = self.theta[:-<span class="number">1</span>]</span><br><span class="line">        <span class="keyword">return</span> theta</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">predict</span>(<span class="params">self, X</span>):</span></span><br><span class="line">        <span class="keyword">return</span> X.dot(self.coefficient) + self.intercept</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">score</span>(<span class="params">self, X, y</span>):</span></span><br><span class="line">        y_pred = X.dot(self.coefficient) + self.intercept</span><br><span class="line">        <span class="keyword">return</span> np.<span class="built_in">sum</span>((y_pred - y) ** <span class="number">2</span>) / <span class="built_in">len</span>(X)</span><br></pre></td></tr></tbody></table></figure>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç¬¬28è¡Œä¸­<code>theta = theta - eta * self.DJ(theta)</code>ï¼Œä¸èƒ½å†™æˆ<code>theta -= eta * self.DJ(theta)</code>ï¼Œè¿™æ˜¯å› ä¸ºç°åœ¨last_thetaå’Œthetaéƒ½æŒ‡å‘åŒä¸€å—å†…å­˜å•å…ƒï¼Œ-=æ˜¯åŸåœ°æ“ä½œï¼Œåœ¨æ›´æ”¹äº†thetaçš„åŒæ—¶ï¼Œlast_thetaä¹Ÿè¢«æ›´æ”¹äº†ï¼Œè€Œ=åˆ™æ˜¯é‡æ–°å¼€è¾Ÿä¸€å—æ–°çš„å†…å­˜ç©ºé—´ï¼Œç„¶åå†è®©thetaæŒ‡å‘å®ƒã€‚</p>
<p><br></p>
<h2 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h2><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> sklearn</span><br><span class="line"><span class="keyword">from</span> sklearn <span class="keyword">import</span> datasets</span><br><span class="line"></span><br><span class="line">boston=datasets.load_boston()</span><br><span class="line">X=boston.data</span><br><span class="line">y=boston.target</span><br><span class="line"></span><br><span class="line">lr = LinearRegression()</span><br><span class="line">lr.fit(X, y)</span><br><span class="line">lr.transform(eta = <span class="number">1e-6</span>, n_iters = <span class="number">1e6</span>)</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="string">"""lr.coefficient</span></span><br><span class="line"><span class="string">array([-0.09218218,  0.06825598, -0.00529991,  0.46137796,  0.17983213,</span></span><br><span class="line"><span class="string">        4.30941577,  0.02543425, -0.70440603,  0.17038895, -0.00977886,</span></span><br><span class="line"><span class="string">       -0.09173025,  0.01804173, -0.55937148])</span></span><br><span class="line"><span class="string">       </span></span><br><span class="line"><span class="string">   lr.intercept 	</span></span><br><span class="line"><span class="string">   0.4361364266724813</span></span><br><span class="line"><span class="string">"""</span></span><br></pre></td></tr></tbody></table></figure>
<p>å› ä¸ºæ•°æ®æ˜¯13ç»´çš„ï¼Œæ²¡æœ‰åŠæ³•å¯è§†åŒ–ï¼Œæˆ‘ä»¬åªèƒ½ä½¿ç”¨MSEæŒ‡æ ‡æ¥è¡¡é‡ï¼Œå…¶ä¸­lr.score(X, y) = 26.11494ã€‚</p>
<p>ä¸ºäº†èƒ½çœ‹å¾—æ¸…æ¥šç‚¹ï¼Œæˆ‘ä»¬åªä½¿ç”¨å…¶ä¸­ä¸€ç»´æ¥è¿›è¡Œé¢„æµ‹ã€‚</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">X = X[:, <span class="number">5</span>]</span><br><span class="line">plt.scatter(X, y)</span><br><span class="line">plt.show()</span><br></pre></td></tr></tbody></table></figure>
<p>è¿™é‡Œä¸Šé¢æœ‰ä¸€æ’æ•°å€¼éƒ½ä¸º50ï¼Œè¿™æ˜¯å› ä¸ºåœ¨åšè°ƒæŸ¥çš„æ—¶å€™ï¼Œæœ€é«˜ä¸€ä¸ªæ¡£å°±æ˜¯50ï¼ˆå¤§äº50Wéƒ½åªèƒ½å¡«50Wï¼‰ï¼Œå› æ­¤è¿™éƒ¨åˆ†æ•°æ®æˆ‘ä»¬å½“åšæ— æ•ˆæ•°æ®ï¼Œç›´æ¥ä¸¢å¼ƒæ‰ã€‚</p>
<p><img src="https://z3.ax1x.com/2021/09/13/4iztpD.png" alt=""></p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">X = X[y &lt; <span class="number">50</span>]</span><br><span class="line">y = y[y &lt; <span class="number">50</span>]</span><br><span class="line"></span><br><span class="line">plt.scatter(X, y)</span><br><span class="line">plt.show()</span><br></pre></td></tr></tbody></table></figure>
<p>åšä¸€ä¸‹ç­›é€‰ï¼Œåªé€‰y&lt;50çš„æ•°æ®å°±è¡Œäº†ã€‚</p>
<p><img src="https://z3.ax1x.com/2021/09/13/4iz00I.png" alt=""></p>
<p>ç„¶åå¼€å§‹æ•´ä½“ï¼Œè¿›è¡Œé¢„æµ‹ã€‚</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">lr = LinearRegression()</span><br><span class="line">X = X.reshape([-<span class="number">1</span>, <span class="number">1</span>])</span><br><span class="line">lr.fit(X, y)</span><br><span class="line">theta = lr.transform(eta = <span class="number">1e-6</span>, n_iters = <span class="number">1e6</span>)</span><br><span class="line"></span><br><span class="line">plt.plot(X, lr.predict(X), color=<span class="string">"red"</span>)</span><br><span class="line">plt.scatter(X, y)</span><br><span class="line">plt.show()</span><br></pre></td></tr></tbody></table></figure>
<p><img src="https://z3.ax1x.com/2021/09/13/4izc9S.png" alt=""></p>
<p>lr.score(X, y) = 42.28978618974813</p>
]]></content>
      <categories>
        <category>Machine Learning</category>
      </categories>
  </entry>
  <entry>
    <title>è¿‡æ‹Ÿåˆå’Œæ¬ æ‹Ÿåˆ</title>
    <url>/2021/09/28/%E8%BF%87%E6%8B%9F%E5%90%88%E5%92%8C%E6%AC%A0%E6%8B%9F%E5%90%88/</url>
    <content><![CDATA[<h2 id="å¼•å…¥"><a href="#å¼•å…¥" class="headerlink" title="å¼•å…¥"></a>å¼•å…¥</h2><p>ç»§ä¹‹å‰çš„<a href="/2021/09/27/å¤šé¡¹å¼å›å½’/">å¤šé¡¹å¼å›å½’</a>ï¼Œå¦‚æœ <code>degree</code> è®¾ç½®è¿‡å¤§æˆ–è€…è¿‡å°ä¼šå‡ºç°ä»€ä¹ˆæ ·çš„é—®é¢˜å‘¢ï¼Ÿ</p>
<p>åœ¨æ­¤ä¹‹å‰ï¼Œå…ˆæ¥è¯´æ˜ä¸€ä¸‹ <a href="/2021/09/14/æ•°æ®å½’ä¸€åŒ–/">å½’ä¸€åŒ–</a> çš„å¿…è¦æ€§ã€‚å¤šé¡¹å¼å›å½’é‡‡ç”¨äº†ç‰¹å¾ç»„åˆçš„æ–¹å¼ï¼Œå½“ <code>degree</code> ä¸º100æ—¶ï¼Œæœ€é«˜æ¬¡å°±æ˜¯100æ¬¡ï¼Œè€Œæœ€ä½æ¬¡åªæ˜¯å¸¸æ•°çº§ï¼Œå„ä¸ªç»´åº¦æ•°å€¼ä¹‹é—´çš„è·¨åº¦éå¸¸å¤§ï¼Œè¿™å°±å¯¼è‡´ <code>eta</code> å¿…é¡»è®¾ç½®å¾—éå¸¸å°ï¼Œå¦åˆ™ç¨å¤§ä¸€ç‚¹ï¼Œå°±ä¼šæ— æ³•æ‹Ÿåˆï¼Œå˜æˆ <code>nan</code> ã€‚</p>
<p>å½“ degree ä¸º10æ—¶ï¼Œ etaå°±å¿…é¡»è®¾ç½®æˆ$10^{-19}$ï¼Œå¾ˆä¸åˆ©äºæˆ‘ä»¬è®­ç»ƒæ¨¡å‹ï¼Œæ‰€ä»¥åœ¨æ•°æ®ä¸è·ç¦»é˜¶æ®µé™¤äº†è¦å¤šé¡¹å¼åŒ–è¿˜å¾—å½’ä¸€åŒ–ï¼</p>
<p><img src="https://z3.ax1x.com/2021/09/28/4feNrT.png" alt=""></p>
<p>æ ¹æ®ä¸Šè¿°è¦æ±‚ï¼Œæ”¹è¿›äº†ä¸€ä¸‹å¤šé¡¹å¼å›å½’çš„ç±»ã€‚</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">PolynomialRegression</span>:</span></span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, degree</span>):</span></span><br><span class="line">        self.degree = degree</span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">fit</span>(<span class="params">self, X, y, eta = <span class="number">0.01</span>, n_iters = <span class="number">1e4</span>, epsilon = <span class="number">1e-6</span></span>):</span></span><br><span class="line">        self.X = self._getPolynomialFeatures(X, <span class="number">0</span>, np.ones([<span class="built_in">len</span>(X), <span class="number">1</span>]), self.degree)</span><br><span class="line">        self.X = self.standardization(self.X)</span><br><span class="line">        </span><br><span class="line">        initial_theta = np.zeros([self.X.shape[<span class="number">1</span>]])</span><br><span class="line">        theta = self._gradient_descent(self.X, y, initial_theta, eta, n_iters, epsilon)</span><br><span class="line">        self.theta = theta</span><br><span class="line">        self.coefficient = theta[<span class="number">1</span>:]</span><br><span class="line">        self.intercept = theta[<span class="number">0</span>]</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># å½’ä¸€åŒ–</span></span><br><span class="line">    <span class="comment"># ç¬¬ä¸€åˆ—å…¨ä¸º1æ–¹å·®ä¸º0è¦å•ç‹¬å¤„ç†ï¼Œæ”¹æˆç¬¬ä¸€åˆ—å…¨ä¸º0</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">standardization</span>(<span class="params">self, X</span>):</span></span><br><span class="line">        <span class="keyword">return</span> np.hstack([np.zeros([<span class="built_in">len</span>(X), <span class="number">1</span>]), (X[:, <span class="number">1</span>:] - np.mean(X[:, <span class="number">1</span>:], axis = <span class="number">0</span>)) / np.std(X[:, <span class="number">1</span>:], axis = <span class="number">0</span>)])</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># å¤šé¡¹å¼åŒ–</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">_getPolynomialFeatures</span>(<span class="params">self, X, start, col_val, degree</span>):</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">dfs</span>(<span class="params">X, result, start, col_val, degree</span>):</span></span><br><span class="line">            result.append(col_val)</span><br><span class="line">            <span class="keyword">if</span>(degree == <span class="number">0</span>):</span><br><span class="line">                <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(start, X.shape[<span class="number">1</span>]):</span><br><span class="line">                dfs(X, result, start, col_val * X[:, i].reshape([-<span class="number">1</span>, <span class="number">1</span>]), degree - <span class="number">1</span>)</span><br><span class="line">        </span><br><span class="line">        result = []</span><br><span class="line">        dfs(X, result, <span class="number">0</span>, np.ones([<span class="built_in">len</span>(X), <span class="number">1</span>]), degree)</span><br><span class="line">        <span class="keyword">return</span> np.squeeze(np.array(result), -<span class="number">1</span>).T</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># é¢„æµ‹ä¹Ÿè¦å¤šé¡¹å¼åŒ–å’Œå½’ä¸€åŒ–</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">predict</span>(<span class="params">self, X</span>):</span></span><br><span class="line">        X_b = self._getPolynomialFeatures(X, <span class="number">0</span>, np.ones([<span class="built_in">len</span>(X), <span class="number">1</span>]), self.degree)</span><br><span class="line">        X_b = self.standardization(X_b)</span><br><span class="line">        y_pred = X_b.dot(self.theta)</span><br><span class="line">        <span class="keyword">return</span> y_pred</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># MSE</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">score</span>(<span class="params">self, X, y</span>):</span></span><br><span class="line">        y_pred = self.predict(X)</span><br><span class="line">        <span class="keyword">return</span> np.mean((y - y_pred) ** <span class="number">2</span>)</span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">_gradient_descent</span>(<span class="params">self, X_b, y, theta, eta, n_iters, epsilon</span>):</span></span><br><span class="line">        </span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">J</span>(<span class="params">X_b, y, theta</span>):</span></span><br><span class="line">            <span class="keyword">return</span> np.mean((X_b.dot(theta) - y) ** <span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">DJ</span>(<span class="params">X_b, y, theta</span>):</span></span><br><span class="line">            <span class="keyword">return</span> X_b.T.dot((X_b.dot(theta) - y)) * <span class="number">2</span> / <span class="built_in">len</span>(y);</span><br><span class="line">        </span><br><span class="line">        i_iter = <span class="number">0</span></span><br><span class="line">    </span><br><span class="line">        <span class="keyword">while</span> i_iter &lt; n_iters:</span><br><span class="line">            gradient = DJ(X_b, y, theta)</span><br><span class="line">            last_theta = theta</span><br><span class="line">            theta = theta - eta * gradient</span><br><span class="line">            <span class="keyword">if</span> np.<span class="built_in">abs</span>(J(X_b, y, theta) - J(X_b, y, last_theta)) &lt; epsilon:</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            i_iter += <span class="number">1</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> theta</span><br></pre></td></tr></tbody></table></figure>
<p>å½“ç„¶ç›´æ¥ä½¿ç”¨ sklearn ä¸­çš„ <code>Pipeline</code> å¯ä»¥æ›´åŠ ç®€ä¾¿çš„å®ç°è¿™ä¸€åˆ‡ã€‚</p>
<p><code>Pipeline</code> å…·ä½“è¿ä½œæœºåˆ¶å°±æ˜¯é€è¡Œè¿è¡Œï¼Œä¸Šä¸€è¡Œçš„è¾“å‡ºå°±æ˜¯ä¸‹ä¸€è¡Œçš„è¾“å…¥ï¼Œå› æ­¤æˆ‘ä»¬å…ˆè¿›è¡Œå¤šé¡¹å¼åŒ–ï¼Œå†å½’ä¸€åŒ–ï¼Œæœ€åæ”¾å…¥çº¿æ€§å›å½’ä¸­è®­ç»ƒæ¨¡å‹ã€‚</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.pipeline <span class="keyword">import</span> Pipeline</span><br><span class="line"><span class="keyword">from</span> sklearn.linear_model <span class="keyword">import</span> LinearRegression</span><br><span class="line"><span class="keyword">from</span> sklearn.preprocessing <span class="keyword">import</span> PolynomialFeatures</span><br><span class="line"><span class="keyword">from</span> sklearn.preprocessing <span class="keyword">import</span> StandardScaler</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">PolynomialRegression</span>(<span class="params">X,y,degree</span>):</span></span><br><span class="line">    pipeline = Pipeline([</span><br><span class="line">        (<span class="string">"poly"</span>,PolynomialFeatures(degree = degree)),</span><br><span class="line">        (<span class="string">"std_scaler"</span>,StandardScaler()),</span><br><span class="line">        (<span class="string">"lin_reg"</span>,LinearRegression())</span><br><span class="line">    ])</span><br><span class="line">    pipeline.fit(X,y)</span><br><span class="line">    <span class="keyword">return</span> pipeline.predict(X)</span><br></pre></td></tr></tbody></table></figure>
<p><br></p>
<h2 id="æ•°æ®æ‹Ÿåˆ"><a href="#æ•°æ®æ‹Ÿåˆ" class="headerlink" title="æ•°æ®æ‹Ÿåˆ"></a>æ•°æ®æ‹Ÿåˆ</h2><p>å…ˆå†™ä¸€ä¸ªç»˜åˆ¶æ‹Ÿåˆæ›²çº¿çš„å‡½æ•°ä¾¿äºæˆ‘ä»¬è§‚æµ‹ç»“æœã€‚</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">plot_matching_curve</span>(<span class="params">X, y, degree, eta = <span class="number">1e-6</span>, n_iters = <span class="number">1e5</span></span>):</span></span><br><span class="line">    poly_reg = PolynomialRegression(degree)</span><br><span class="line">    poly_reg.fit(X, y, eta, n_iters)</span><br><span class="line">    theta = poly_reg.theta</span><br><span class="line">    pred_y = poly_reg.X.dot(theta)</span><br><span class="line">    plt.scatter(X[:, <span class="number">0</span>], y)</span><br><span class="line">    plt.plot(X[:, <span class="number">0</span>], pred_y, color = <span class="string">"r"</span>)</span><br><span class="line">    plt.show()</span><br><span class="line">    <span class="keyword">return</span> poly_reg</span><br></pre></td></tr></tbody></table></figure>
<p>å½“ degree ä¸º0æ—¶ï¼Œä¹Ÿå°±æ˜¯æœ€é«˜æ¬¡ä¸º0æ¬¡ï¼Œæ‹Ÿåˆæ›²çº¿æˆä¸€æ¡ç›´çº¿ï¼Œè¿™å°±æ˜¯æ¬ æ‹Ÿåˆã€‚</p>
<p>æ¯•ç«Ÿå‡½æ•°åªæœ‰ä¸€ä¸ªå¸¸æ•°å˜›ï¼Œåˆç†ã€‚</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">plot_matching_curve(x.reshape([-<span class="number">1</span>, <span class="number">1</span>]), y, <span class="number">0</span>)</span><br></pre></td></tr></tbody></table></figure>
<p><img src="https://z3.ax1x.com/2021/09/28/4fEsRP.png" alt=""></p>
<p>å†æ¥çœ‹çœ‹ degree åˆ†åˆ«ä¸º1ï¼Œ2çš„æƒ…å†µï¼Œæ˜¯ä¸æ˜¯è¶Šæ¥è¶Šæ¥è¿‘æˆ‘ä»¬çš„æ‹Ÿåˆæ›²çº¿äº†ã€‚</p>
<p><img src="https://z3.ax1x.com/2021/09/28/4fVdyT.png" alt=""></p>
<p><img src="https://z3.ax1x.com/2021/09/28/4fV50e.png" alt=""></p>
<p>å½“ degree ä¸º3æ—¶ï¼Œæ›²çº¿ç»ˆäºæ‹Ÿåˆäº†æˆ‘ä»¬çš„æ•°æ®ã€‚</p>
<p><img src="https://z3.ax1x.com/2021/09/28/4fZQ91.png" alt=""></p>
<p>é‚£æˆ‘ä»¬å†çœ‹çœ‹ degree ä¸º10ï¼Œ50ï¼Œ100ï¼Œ200çš„æƒ…å†µã€‚</p>
<p>å¾ˆå®¹æ˜“å¯ä»¥è§‚å¯Ÿå‡ºï¼Œæ›²çº¿å˜å¾—è¶Šæ¥è¶Šå¤æ‚ï¼Œä¹Ÿè¶Šæ¥è¶Šèƒ½æ‹Ÿåˆæˆ‘ä»¬çš„è®­ç»ƒæ•°æ®ï¼Œè¿™æ˜¯å› ä¸ºéšç€ degree çš„å¢å¤§ï¼Œå‚æ•°æ•°é‡çš„å¢é•¿ä½¿å¾—æˆ‘ä»¬çš„æ¨¡å‹å¯ä»¥å°†è®­ç»ƒçš„æ•°æ®ç»™<code>è®°ä½</code>ï¼Œä½†è¿™çœŸçš„æ˜¯æˆ‘ä»¬æƒ³è¦çš„å—ï¼Ÿ</p>
<p>ä¸ï¼Œæˆ‘ä»¬æƒ³è¦çš„æ˜¯<code>æ³›åŒ–</code>èƒ½åŠ›ï¼Œæ˜¯åœ¨æµ‹è¯•æ•°æ®ä¹ƒè‡³ä¹‹åæ¨¡å‹ä¸Šçº¿åçš„çœŸå®æ•°æ®ä¸Šä¹Ÿèƒ½æœ‰éå¸¸å¥½çš„é¢„æµ‹èƒ½åŠ›ã€‚</p>
<p><img src="https://z3.ax1x.com/2021/09/28/4f1qaV.png" alt=""></p>
<p><img src="https://z3.ax1x.com/2021/09/28/4f39q1.png" alt=""></p>
<p><img src="https://z3.ax1x.com/2021/09/28/4f3ia6.png" alt=""></p>
<p>ä¹‹å‰ä¹Ÿè¯´è¿‡äº†ï¼Œå¤šé¡¹å¼åŒ–æ˜¯é˜¶ä¹˜å¼åœ°å¢é•¿ï¼Œä¸€æ—¦ <code>degree</code> è¿‡å¤§ï¼Œç›´æ¥å°±ä¼šå¯¼è‡´æ ˆæº¢å‡ºã€‚</p>
<p><img src="https://z3.ax1x.com/2021/09/28/4f3nsA.png" alt=""></p>
<p><br></p>
<h2 id="å­¦ä¹ æ›²çº¿"><a href="#å­¦ä¹ æ›²çº¿" class="headerlink" title="å­¦ä¹ æ›²çº¿"></a>å­¦ä¹ æ›²çº¿</h2><p>é€šè¿‡è§‚å¯Ÿå­¦ä¹ æ›²çº¿ï¼Œä¹Ÿå¯ä»¥å¸®åŠ©æˆ‘ä»¬åˆ¤æ–­å‡ºæ¨¡å‹æ˜¯å¦æœ‰è¿‡æ‹Ÿåˆæˆ–æ¬ æ‹Ÿåˆçš„æƒ…å†µã€‚å®ƒæ˜¯ç»˜åˆ¶æ¨¡å‹åœ¨è®­ç»ƒé›†å’Œæµ‹è¯•é›†ä¸Šçš„æ€§èƒ½å‡½æ•°ã€‚</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.model_selection <span class="keyword">import</span> train_test_split</span><br><span class="line"><span class="keyword">from</span> sklearn.pipeline <span class="keyword">import</span> Pipeline</span><br><span class="line"><span class="keyword">from</span> sklearn.preprocessing <span class="keyword">import</span> StandardScaler, PolynomialFeatures</span><br><span class="line"><span class="keyword">from</span> sklearn.linear_model <span class="keyword">import</span> LinearRegression</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_poly_reg</span>(<span class="params">degree</span>):</span></span><br><span class="line">    <span class="keyword">return</span> Pipeline([</span><br><span class="line">        (<span class="string">"poly"</span>, PolynomialFeatures(degree = degree)),</span><br><span class="line">        (<span class="string">"std"</span>, StandardScaler()),</span><br><span class="line">        (<span class="string">"reg"</span>, LinearRegression())</span><br><span class="line">    ])</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">plot_learning_curve</span>(<span class="params">X, y, degree</span>):</span></span><br><span class="line">    train_mse = []</span><br><span class="line">    test_mse = []</span><br><span class="line">    X_train, X_test, y_train, y_test = train_test_split(X, y)</span><br><span class="line">    poly_reg = get_poly_reg(degree)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">2</span>, <span class="built_in">len</span>(X) + <span class="number">1</span>):</span><br><span class="line">        poly_reg.fit(X_train[:i], y_train[:i])</span><br><span class="line">        train_pred = poly_reg.predict(X_train[:i])</span><br><span class="line">        test_pred = poly_reg.predict(X_test)</span><br><span class="line">        train_mse.append(np.mean(np.square(train_pred - y_train[:i])))</span><br><span class="line">        test_mse.append(np.mean(np.square(test_pred - y_test)))</span><br><span class="line">        </span><br><span class="line">    plt.plot(np.arange(<span class="number">2</span>, <span class="built_in">len</span>(X)+<span class="number">1</span>), train_mse, label=<span class="string">"train"</span>)</span><br><span class="line">    plt.plot(np.arange(<span class="number">2</span>, <span class="built_in">len</span>(X)+<span class="number">1</span>), test_mse, label=<span class="string">"test"</span>)</span><br><span class="line">    plt.legend()</span><br><span class="line">    plt.axis([<span class="number">0</span>,<span class="number">100</span>,<span class="number">0</span>,<span class="number">5</span>])</span><br><span class="line">    plt.show()</span><br></pre></td></tr></tbody></table></figure>
<p>è¿™æ¬¡æˆ‘ä»¬æŠŠç›®æ ‡å‡½æ•°æ¢æˆäºŒæ¬¡å‡½æ•°ã€‚</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">X = np.random.uniform(-<span class="number">3</span>,<span class="number">3</span>,size=<span class="number">100</span>).reshape(-<span class="number">1</span>,<span class="number">1</span>)</span><br><span class="line">y = <span class="number">0.5</span> * X**<span class="number">2</span> + X + <span class="number">4</span> + np.random.normal(<span class="number">0</span>,<span class="number">1</span>,size = <span class="number">100</span>).reshape(-<span class="number">1</span>,<span class="number">1</span>)</span><br></pre></td></tr></tbody></table></figure>
<p>degree = 1</p>
<p>éšç€æ ·æœ¬æ•°é‡çš„å¢åŠ  test çš„è¯¯å·®åœ¨å‡å°ï¼Œtrain çš„è¯¯å·®åœ¨å¢åŠ ï¼Œè€Œå½“æ ·æœ¬åˆ°äº†ä¸€å®šç¨‹åº¦åï¼Œä¸¤è€…ä¹Ÿæ²¡æœ‰ä¿æŒåœ¨ä¸€ä¸ªè¾ƒå°çš„ç¨‹åº¦ä¸Šã€‚è¿™æ—¶è¯´æ˜æ¨¡å‹æ¬ æ‹Ÿåˆã€‚</p>
<p><img src="https://z3.ax1x.com/2021/10/13/5u1WSP.png" alt=""></p>
<p>degree = 2</p>
<p><img src="https://z3.ax1x.com/2021/10/13/5uQx3V.png" alt=""></p>
<p>éšç€æ ·æœ¬æ•°é‡çš„å¢åŠ  test çš„è¯¯å·®åœ¨å‡å°ï¼Œtrain çš„è¯¯å·®åœ¨å¢åŠ ï¼Œè€Œå½“æ ·æœ¬åˆ°äº†ä¸€å®šç¨‹åº¦åï¼Œä¸¤è€…åŸºæœ¬<code>æŒå¹³</code>ï¼Œä¿æŒåœ¨ä¸€ä¸ªè¾ƒå°çš„ç¨‹åº¦ä¸Šã€‚è¿™æ—¶æ¨¡å‹å·²ç»æ‹Ÿåˆã€‚</p>
<p>degree = 10</p>
<p><img src="https://z3.ax1x.com/2021/10/13/5ul2KU.png" alt=""></p>
<p>éšç€æ ·æœ¬çš„å¢åŠ  test çš„è¯¯å·®åœ¨å‡å°ï¼Œtrain çš„è¯¯å·®åœ¨å¢åŠ ï¼Œä½†å½“æ ·æœ¬åˆ°äº†ä¸€å®šç¨‹åº¦åï¼Œåœ¨ train ä¸Šçš„è¯¯å·®è¦æ¯”åœ¨ test ä¸Šçš„è¯¯å·®å°å¾—å¤šï¼Œè¿™æ—¶å°±è¦æ³¨æ„æ˜¯ä¸æ˜¯è¿‡æ‹Ÿåˆäº†ã€‚</p>
<p>degree = 100</p>
<p><img src="https://z3.ax1x.com/2021/10/13/5ulxIA.png" alt=""></p>
<p>æ­¤æ—¶ test ä¸Šçš„è¯¯å·®å·²ç»é£™åˆ°å¤©ä¸Šå»äº†ï¼Œå¦¥å¦¥çš„è¿‡æ‹Ÿåˆã€‚</p>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>åœ¨è®­ç»ƒæ•°æ®é›†ä¸Šè¡¨ç°è‰¯å¥½ï¼Œå´åœ¨æµ‹è¯•æ•°æ®é›†ä¸Šè¡¨ç°å·®åŠ²çš„å°±æ˜¯<code>è¿‡æ‹Ÿåˆ</code>ï¼Œè¿™æ—¶å€™è¦é™ä½å‚æ•°æ•°é‡ã€‚</p>
<p>è€Œåœ¨è®­ç»ƒæ•°æ®é›†ä¸Šè¡¨ç°å°±ä¸å°½äººæ„çš„æœ‰å¯èƒ½æ˜¯<code>æ¬ æ‹Ÿåˆ</code>ï¼ˆä¹Ÿæœ‰å¯èƒ½æ˜¯æ¨¡å‹å‹æ ¹ä¸å¯¹ç­‰é—®é¢˜ï¼‰ï¼Œè¿™æ—¶å€™å¯ä»¥è¯•è¯•å¢å¤§æ¨¡å‹ï¼Œå¢åŠ å‚æ•°æ•°é‡ã€‚</p>
]]></content>
      <categories>
        <category>Machine Learning</category>
      </categories>
  </entry>
  <entry>
    <title>é™ä½è¿‡æ‹Ÿåˆ</title>
    <url>/2021/10/17/%E9%99%8D%E4%BD%8E%E8%BF%87%E6%8B%9F%E5%90%88/</url>
    <content><![CDATA[<p>åœ¨è®­ç»ƒæ¨¡å‹çš„è¿‡ç¨‹ä¸­ï¼Œè¿‡æ‹Ÿåˆå‡ ä¹æ˜¯ä¸å¯é¿å…çš„ã€‚å› æ­¤å¯ä»¥è¿™ä¹ˆè¯´ï¼Œæ·±åº¦å­¦ä¹ å°±æ˜¯è®­ç»ƒä¸€ä¸ªåºå¤§çš„æ¨¡å‹ï¼Œåœ¨æ­¤åŸºç¡€ä¸Šæˆ‘ä»¬æ¥é™ä½è¿‡æ‹Ÿåˆçš„ç¨‹åº¦ã€‚ç›¸è¾ƒä¹‹ä¸‹ï¼Œå¦‚æœæ¨¡å‹æ¬ æ‹Ÿåˆäº†ï¼Œè²Œä¼¼é™¤äº†æ‰©å¤§æ¨¡å‹å°±æ²¡æœ‰ä»»ä½•æ–¹æ³•äº†ã€‚</p>
<p>ä¸‹é¢ä»‹ç»å‡ ä¸ªå¸¸ç”¨çš„é™ä½è¿‡æ‹Ÿåˆçš„æ–¹æ³•ã€‚</p>
<h2 id="ä¸€ã€æ­£åˆ™åŒ–"><a href="#ä¸€ã€æ­£åˆ™åŒ–" class="headerlink" title="ä¸€ã€æ­£åˆ™åŒ–"></a>ä¸€ã€æ­£åˆ™åŒ–</h2><h4 id="1-ä»€ä¹ˆæ˜¯æ­£åˆ™åŒ–ï¼Ÿ"><a href="#1-ä»€ä¹ˆæ˜¯æ­£åˆ™åŒ–ï¼Ÿ" class="headerlink" title="1. ä»€ä¹ˆæ˜¯æ­£åˆ™åŒ–ï¼Ÿ"></a>1. ä»€ä¹ˆæ˜¯æ­£åˆ™åŒ–ï¼Ÿ</h4><p>æ­£åˆ™åŒ–çš„æ€æƒ³ï¼Œå³é€šè¿‡<code>é™åˆ¶</code>å‚æ•°å€¼çš„é€‰æ‹©èŒƒå›´æ¥æ§åˆ¶æ¨¡å‹å®¹é‡ã€‚è€Œæ­£åˆ™åŒ–åˆåˆ†ä¸ºå²­å›å½’ï¼ˆæƒé‡è¡°é€€ï¼‰ã€LASSO å›å½’å’Œå¼¹æ€§ç½‘ç»œç­‰ã€‚ä¸‹é¢æˆ‘ç€é‡è¯´æ˜çš„æ˜¯å²­å›å½’ã€‚</p>
<p>é¦–å…ˆï¼Œå…ˆæ¥çœ‹ä¸€å¼ æåº¦è¿‡æ‹Ÿåˆçš„å›¾åƒã€‚</p>
<p><img src="https://z3.ax1x.com/2021/10/17/5tSi5t.png" alt=""></p>
<p>è¿™æ˜¯ä¸Šè¿°å›¾åƒçš„éƒ¨åˆ†æƒé‡ï¼Œæ— ä¸€ä¾‹å¤–ï¼Œæ¯ä¸ª $W_i$ éƒ½æå…¶çš„å¤§ï¼Œè¿™ä¹Ÿå¯¼è‡´äº†å›¾åƒååˆ†çš„<code>é™¡å³­</code>ã€‚</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">array([-<span class="number">4.09493627e+11</span>,  <span class="number">5.76349998e+12</span>,  <span class="number">1.71369179e+11</span>, -<span class="number">9.99031499e+12</span>,</span><br><span class="line">        <span class="number">9.23500127e+11</span>,  <span class="number">9.26094018e+12</span>, -<span class="number">1.94635409e+12</span>, -<span class="number">5.40895631e+10</span>,</span><br><span class="line">        <span class="number">7.94601628e+11</span>, -<span class="number">7.85418293e+12</span>,  <span class="number">1.63904594e+12</span>,  <span class="number">1.67984971e+12</span>,</span><br><span class="line">       -<span class="number">9.87156668e+11</span>,  <span class="number">6.88721582e+12</span>, -<span class="number">1.64914180e+12</span>,  <span class="number">3.50775793e+11</span>,</span><br><span class="line">        <span class="number">2.60751888e+11</span>, -<span class="number">5.87372086e+12</span>,  <span class="number">1.66748622e+12</span>, -<span class="number">3.77434047e+12</span>,</span><br><span class="line">        <span class="number">1.00605169e+12</span>,  <span class="number">2.34190394e+12</span>, -<span class="number">8.57867266e+11</span>,  <span class="number">5.39077331e+12</span>,</span><br><span class="line">       -<span class="number">1.60621032e+12</span>,  <span class="number">2.95930952e+12</span>, -<span class="number">9.52432067e+11</span>, -<span class="number">1.74889800e+12</span>])</span><br></pre></td></tr></tbody></table></figure>
<p>å› æ­¤å¾ˆè‡ªç„¶è€Œç„¶åœ°å°±èƒ½æƒ³åˆ°ï¼Œé‚£æˆ‘é™åˆ¶ $W_i$ çš„é€‰æ‹©èŒƒå›´å°±è¡Œäº†å˜›ã€‚ä»æ¨¡å‹çš„è§’åº¦æ¥è¯´ï¼Œå‚æ•°æ•°é‡ä¸å˜ï¼Œä½†å‚æ•°çš„é€‰æ‹©èŒƒå›´å°äº†ï¼Œé‚£æ¨¡å‹è‡ªç„¶ä¹Ÿå˜å°äº†ã€‚</p>
<p>äºæ˜¯å°±æœ‰äº†ä½¿ç”¨å‡æ–¹èŒƒæ•°ä½œä¸º<code>ç¡¬æ€§</code>é™åˆ¶ï¼Œå°çš„ Î¸ æ„å‘³ç€æ›´å¼ºçš„æ­£åˆ™é¡¹ã€‚</p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåç½® <strong>b</strong> å¹¶æ²¡æœ‰åŠ å…¥åˆ°æ­£åˆ™åŒ–ä¸­æ¥ï¼Œæ¯•ç«Ÿæˆ‘ä»¬çš„ç›®æ ‡æ˜¯è®©æ›²çº¿æ›´åŠ çš„<code>å¹³ç¼“</code>ï¼Œè·Ÿåç½® <strong>b</strong> æ²¡æœ‰ä»€ä¹ˆå…³ç³»ã€‚</p>
<p>$min l(w,b) \quad subject\ to \quad ||W||^2 \le Î¸,\quad\quad ||W||^2 = \sum W^2$</p>
<p>ä½†ç¡¬æ€§é™åˆ¶ä¼˜åŒ–æ±‚å¯¼æ¯”è¾ƒéº»çƒ¦ï¼Œç»“æœä¹Ÿä¼šæ¯”è¾ƒ<code>ç¡¬</code>ï¼Œä¸€èˆ¬ä½¿ç”¨å‡æ–¹èŒƒæ•°ä½œä¸º<code>æŸ”æ€§</code>é™åˆ¶ã€‚</p>
<p>$loss = l(w, b) + \frac{Î»}{2}||W||^2$</p>
<p>å…¶ä¸­è¶…å‚æ•° Î» æ§åˆ¶äº†æ­£åˆ™é¡¹çš„é‡è¦ç¨‹åº¦</p>
<ul>
<li>Î» = 0ï¼Œå³æ— æ­£åˆ™åŒ–ï¼Œå’Œæ™®é€šçš„æŸå¤±å‡½æ•°æ²¡æœ‰åŒºåˆ«ã€‚</li>
<li>Î» â†’ $\infty$ï¼Œæ­¤æ—¶ W â†’ <strong>0</strong></li>
</ul>
<h4 id="2-å¦‚ä½•å½±å“æŸå¤±å‡½æ•°ï¼Ÿ"><a href="#2-å¦‚ä½•å½±å“æŸå¤±å‡½æ•°ï¼Ÿ" class="headerlink" title="2. å¦‚ä½•å½±å“æŸå¤±å‡½æ•°ï¼Ÿ"></a>2. å¦‚ä½•å½±å“æŸå¤±å‡½æ•°ï¼Ÿ</h4><p>å¯ä»¥çœ‹åˆ°ï¼ŒåŸå…ˆçš„æå€¼ç‚¹ $\widetilde{W}^*$ åœ¨ç»¿è‰²æ¤­åœ†çš„åœ†å¿ƒï¼Œä½†åœ¨åŠ å…¥æ­£åˆ™åŒ–é¡¹ä¹‹åï¼Œæå€¼ç‚¹åœ¨ä¸¤è€…ä¹‹é—´åšäº†ä¸€ä¸ªæƒè¡¡ï¼Œå–åœ¨äº†åˆ‡ç‚¹ã€‚</p>
<p><img src="https://z3.ax1x.com/2021/10/17/5tFpqS.png" alt=""></p>
<h4 id="3-å‚æ•°æ›´æ–°æ³•åˆ™"><a href="#3-å‚æ•°æ›´æ–°æ³•åˆ™" class="headerlink" title="3. å‚æ•°æ›´æ–°æ³•åˆ™"></a>3. å‚æ•°æ›´æ–°æ³•åˆ™</h4><ul>
<li><p>è®¡ç®—æ¢¯åº¦</p>
<p>$\frac{\partial}{\partial W}(l(W, b) + \frac{Î»}{2}||W||^2) = \frac{\partial l(W, b)}{\partial W} + Î»W$</p>
</li>
<li><p>æ›´æ–°å‚æ•°</p>
<p>$Wâ€™ = W - Î·(\frac{\partial l(W, b)}{\partial W} + Î»W) = (1 - Î·Î»)W - Î·\frac{\partial l(W, b)}{\partial W}$</p>
</li>
</ul>
<p>é€šå¸¸ Î·Î» &lt; 1ï¼Œå› æ­¤æ¯æ¬¡åœ¨å‚æ•°æ›´æ–°æ—¶ï¼Œéƒ½ä¼šå¯¹ W è¿›è¡Œ<code>ç¼©å°</code>ï¼Œä¹Ÿå°±æ˜¯æƒé‡è¡°é€€è¿™ä¸ªåå­—çš„ç”±æ¥ã€‚</p>
<h4 id="4-å²­å›å½’"><a href="#4-å²­å›å½’" class="headerlink" title="4. å²­å›å½’"></a>4. å²­å›å½’</h4><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">RidgeRegression</span>(<span class="params">degree,alpha</span>):</span></span><br><span class="line">    pipeline = Pipeline([</span><br><span class="line">        (<span class="string">"poly"</span>,PolynomialFeatures(degree = degree)),</span><br><span class="line">        (<span class="string">"std_scaler"</span>,StandardScaler()),</span><br><span class="line">        (<span class="string">"ridge_reg"</span>,Ridge(alpha=alpha))</span><br><span class="line">    ])</span><br><span class="line">    <span class="keyword">return</span> pipeline</span><br></pre></td></tr></tbody></table></figure>
<p>alpha = 0ï¼Œå³æ™®é€šå¤šé¡¹å¼å›å½’ã€‚</p>
<p><img src="https://z3.ax1x.com/2021/10/18/5UMrqJ.png" alt=""></p>
<p>alpha = 1e-4ï¼Œæ›²çº¿ä¸€ä¸‹å­å°±æŸ”å’Œäº†ã€‚</p>
<p><img src="https://z3.ax1x.com/2021/10/18/5UQeL4.png" alt=""></p>
<p>alpha = 100ï¼Œæœ‰ç‚¹åƒäºŒæ¬¡æ›²çº¿äº†ã€‚</p>
<p><img src="https://z3.ax1x.com/2021/10/18/5UQJyD.png" alt=""></p>
<p>alpha â†’ $\infty$ï¼Œä¸ºäº†æ§åˆ¶æŸå¤±å‡½æ•°ï¼Œåªèƒ½å°†æƒé‡è®¾ä¸º0ã€‚</p>
<p><img src="https://z3.ax1x.com/2021/10/18/5UQhYq.png" alt=""></p>
<h4 id="5-Tensorflow-å²­å›å½’å®ç°"><a href="#5-Tensorflow-å²­å›å½’å®ç°" class="headerlink" title="5. Tensorflow å²­å›å½’å®ç°"></a>5. Tensorflow å²­å›å½’å®ç°</h4><p>ä¸ºäº†èƒ½å¤Ÿè¿‡æ‹Ÿåˆï¼Œåªè®¾ç½®äº†20ä¸ªè®­ç»ƒæ ·æœ¬ï¼Œæ¯ä¸ªæ ·æœ¬æœ‰ 200 ä¸ªç‰¹å¾ã€‚</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">n_train = <span class="number">20</span></span><br><span class="line">n_test = <span class="number">100</span></span><br><span class="line">num_inputs = <span class="number">200</span></span><br><span class="line">batch_size = <span class="number">5</span></span><br><span class="line">num_outputs = <span class="number">1</span></span><br><span class="line"></span><br><span class="line">true_w, true_b = tf.ones([num_inputs, <span class="number">1</span>]) * <span class="number">0.01</span>, <span class="number">0.05</span></span><br><span class="line">train_data = d2l.synthetic_data(true_w, true_b, n_train)</span><br><span class="line">test_data = d2l.synthetic_data(true_w, true_b, n_test)</span><br><span class="line">train_iter = d2l.load_array(train_data, batch_size)</span><br><span class="line">test_iter = d2l.load_array(test_data, batch_size, is_train=<span class="literal">False</span>)</span><br></pre></td></tr></tbody></table></figure>
<p>å‚æ•°åˆå§‹åŒ–ï¼Œçº¿æ€§æ¨¡å‹æ²¡é‚£ä¹ˆå¤šè®²ç©¶ï¼Œåˆå§‹åŒ–ä¸º0ä¹Ÿè¡Œã€‚</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">init_params</span>(<span class="params">num_inputs, num_outputs</span>):</span></span><br><span class="line">    W = tf.Variable(tf.random.normal(mean=<span class="number">1</span>, shape=(num_inputs, <span class="number">1</span>)))</span><br><span class="line">    b = tf.Variable(tf.zeros(num_outputs))</span><br><span class="line">    <span class="keyword">return</span> [W, b]</span><br><span class="line"></span><br><span class="line">W, b = init_params(num_inputs, num_outputs)</span><br></pre></td></tr></tbody></table></figure>
<p>ç½‘ç»œæ¨¡å‹</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># çº¿æ€§æ¨¡å‹</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">net</span>(<span class="params">X</span>):</span></span><br><span class="line">    <span class="keyword">return</span> X @ W + b</span><br><span class="line"></span><br><span class="line"><span class="comment"># L2æ­£åˆ™åŒ–</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">l2_penalty</span>(<span class="params">W</span>):</span></span><br><span class="line">    <span class="keyword">return</span> tf.reduce_sum(tf.<span class="built_in">pow</span>(W, <span class="number">2</span>)) / <span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># MSEæŸå¤±å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">loss</span>(<span class="params">y, y_hat</span>):</span></span><br><span class="line">    <span class="keyword">return</span> tf.reduce_mean(tf.square(y - y_hat))</span><br></pre></td></tr></tbody></table></figure>
<p>è®­ç»ƒå‡½æ•°</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">train</span>(<span class="params">lambd, epochs = <span class="number">100</span>, lr = <span class="number">0.003</span></span>):</span></span><br><span class="line">    animator = d2l.Animator(xlabel=<span class="string">'epochs'</span>, ylabel=<span class="string">'loss'</span>, yscale=<span class="string">'log'</span>,</span><br><span class="line">                            xlim=[<span class="number">5</span>, epochs], legend=[<span class="string">'train'</span>, <span class="string">'test'</span>])</span><br><span class="line">    <span class="keyword">for</span> epoch <span class="keyword">in</span> <span class="built_in">range</span>(epochs):</span><br><span class="line">        <span class="keyword">for</span> X, y <span class="keyword">in</span> train_iter:</span><br><span class="line">            <span class="keyword">with</span> tf.GradientTape() <span class="keyword">as</span> tape:</span><br><span class="line">                <span class="comment"># æœ€ç»ˆæŸå¤±å‡½æ•°æ·»åŠ æ­£åˆ™åŒ–é¡¹</span></span><br><span class="line">                l = loss(y, net(X)) + lambd * l2_penalty(W)</span><br><span class="line">            grads = tape.gradient(l, [W, b])</span><br><span class="line">            <span class="keyword">for</span> param, grad <span class="keyword">in</span> <span class="built_in">zip</span>([W, b], grads):</span><br><span class="line">                param.assign_sub(grad * lr)</span><br><span class="line">        <span class="keyword">if</span> (epoch + <span class="number">1</span>) % <span class="number">5</span> == <span class="number">0</span>:</span><br><span class="line">            animator.add(epoch +<span class="number">1</span>, (d2l.evaluate_loss(net, train_iter, loss),</span><br><span class="line">                                   (d2l.evaluate_loss(net, test_iter, loss))))</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"Wçš„L2èŒƒæ•°æ˜¯"</span>, tf.norm(W).numpy())</span><br></pre></td></tr></tbody></table></figure>
<p>train(lambd = 0)</p>
<p>æ¨¡å‹æ²¡æœ‰æ³›åŒ–ï¼Œå…‰æ˜¯è®­ç»ƒè¯¯å·®å‡å°ï¼Œå…¸å‹çš„è¿‡æ‹Ÿåˆã€‚</p>
<p><img src="https://z3.ax1x.com/2021/10/17/5t4RR1.png" alt=""></p>
<p>train(lambd = 3)</p>
<p>è®­ç»ƒå’Œæµ‹è¯•è¯¯å·®éƒ½åœ¨åŒæ­¥é™ä½ï¼Œä¸”ä¸¤è€…å·®è·è¾ƒä¸Šè¿°è¿‡æ‹Ÿåˆä¹‹ä¸‹å‡å°äº†ä¸å°‘ã€‚</p>
<p><img src="https://z3.ax1x.com/2021/10/17/5tIZ9A.png" alt=""></p>
<p>train(lambd = 20)</p>
<p>åŒä¸Šï¼Œæ•ˆæœæ›´å¥½äº†ã€‚</p>
<p><img src="https://z3.ax1x.com/2021/10/17/5tIKnf.png" alt=""></p>
<p>train(lambd = 100)</p>
<p>è™½ç„¶å›¾å½¢ååˆ†æ›²æŠ˜ï¼Œä½†æ€»ä½“è¶‹åŠ¿æ˜¯åœ¨ä¸‹é™ä¸”æŸå¤±æ›´ä½äº†ã€‚</p>
<p><img src="https://z3.ax1x.com/2021/10/17/5tIJ9s.png" alt=""></p>
<h4 id="6-LASSO-å›å½’"><a href="#6-LASSO-å›å½’" class="headerlink" title="6. LASSO å›å½’"></a>6. LASSO å›å½’</h4><p>å’Œå²­å›å½’ç±»ä¼¼ï¼Œä½†æ­£åˆ™é¡¹ä½¿ç”¨çš„æ˜¯ L1 èŒƒæ•°ã€‚ä½†ç»å¯¹å€¼å°±æ„å‘³ç€ä¸å¯å¯¼ï¼Œä¸å¥½ä¼˜åŒ–ã€‚</p>
<p>$loss = l(w, b) + Î»||W||,\quad\quad ||W|| = \sum |W|$</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.linear_model <span class="keyword">import</span> Lasso</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">LassoRegression</span>(<span class="params">degree,alpha</span>):</span></span><br><span class="line">    pipeline = Pipeline([</span><br><span class="line">        (<span class="string">"poly"</span>,PolynomialFeatures(degree = degree)),</span><br><span class="line">        (<span class="string">"std_scaler"</span>,StandardScaler()),</span><br><span class="line">        (<span class="string">"lasso_reg"</span>,Lasso(alpha=alpha))</span><br><span class="line">    ])</span><br><span class="line">    <span class="keyword">return</span> pipeline</span><br></pre></td></tr></tbody></table></figure>
<p>alpha = 0</p>
<p><img src="https://z3.ax1x.com/2021/10/18/5UlPne.png" alt=""></p>
<p>alpha = 0.1</p>
<p><img src="https://z3.ax1x.com/2021/10/18/5UlEtI.png" alt=""></p>
<p>alpha = 1</p>
<p><img src="https://z3.ax1x.com/2021/10/18/5Ulm1f.png" alt=""></p>
<p>alpha = 10</p>
<p><img src="https://z3.ax1x.com/2021/10/18/5UlMng.png" alt=""></p>
<p>é€šè¿‡å¯¹æ¯”ï¼Œå¯ä»¥å‘ç°ä¸€ä¸ªæ¯”è¾ƒæœ‰æ„æ€çš„äº‹æƒ…ã€‚Ridge å›å½’åœ¨å¢å¤§ alpha æ—¶ï¼Œæ›²çº¿è¿˜æ˜¯<code>å¼¯æ›²çš„</code>ï¼Œä½†æ²¡é‚£ä¹ˆé™¡å³­ï¼Œå› ä¸ºæƒé‡éƒ½æ¯”è¾ƒå°ã€‚è€Œ LASSO å›å½’åœ¨å¢å¤§ alpha æ—¶ï¼Œå¹¶æ²¡æœ‰é‚£ä¹ˆå¤šå¼¯æ›²çš„åœ°æ–¹ï¼Œå› æ­¤å®ƒçš„æƒé‡å¤§éƒ¨åˆ†éƒ½æ˜¯0ã€‚</p>
<p>è‡³äºä¸ºä»€ä¹ˆä¼šè¿™æ ·å‘¢ï¼Ÿè¿™ä¹Ÿå’Œä»–ä»¬æ­£åˆ™åŒ–é¡¹çš„å¼å­æœ‰å…³ã€‚</p>
<h4 id="7-Ridge-å’Œ-LASSO-åŒºåˆ«"><a href="#7-Ridge-å’Œ-LASSO-åŒºåˆ«" class="headerlink" title="7. Ridge å’Œ LASSO åŒºåˆ«"></a>7. Ridge å’Œ LASSO åŒºåˆ«</h4><p><strong>Ridge å›å½’</strong> çš„æ¢¯åº¦æ˜¯ä¼šéšç€ç¦»æå€¼ç‚¹è¶Šè¿‘è€Œæ¸æ¸<code>å˜å°</code>çš„ï¼Œå› æ­¤æ‰€æœ‰çš„å‚æ•°æ˜¯åŒæ­¥åœ¨æ›´æ–°ï¼Œä»å›¾åƒä¸Šæ¥çœ‹å°±æ˜¯æ²¿ç€æ¢¯åº¦æ…¢æ…¢æƒ³æå€¼ç‚¹é æ‹¢ï¼Œå› æ­¤ä¸ä¼šæœ‰å¾ˆå¤šæƒé‡è¢«è®¾ä¸º0ã€‚</p>
<p><img src="https://z3.ax1x.com/2021/10/18/5UlxEj.png" alt=""></p>
<p><strong>LASSO å›å½’</strong> çš„æ¢¯åº¦æ˜¯ä¸€ä¸ªå®šå€¼ï¼Œåªèƒ½ç”± Î· æ¥æ§åˆ¶å¤§å°ï¼Œè¿™æ ·å°±ä¼šé€ æˆéƒ¨åˆ†æƒé‡ä¼šæ—©æ—©åœåœ¨é›¶ç‚¹ï¼Œè¿™å¯ä»¥èµ·åˆ°ä¸€å®šçš„ç‰¹å¾ç­›é€‰çš„ä½œç”¨ï¼Œè™½ç„¶ä¹Ÿæœ‰å¯èƒ½å°†æœ‰ç”¨çš„ç‰¹å¾ä¹Ÿç­›é€‰æ‰ã€‚</p>
<p><img src="https://z3.ax1x.com/2021/10/18/5U3pee.png" alt=""></p>
<h4 id="8-å¼¹æ€§ç½‘ç»œ"><a href="#8-å¼¹æ€§ç½‘ç»œ" class="headerlink" title="8. å¼¹æ€§ç½‘ç»œ"></a>8. å¼¹æ€§ç½‘ç»œ</h4><p>é¡¾åæ€ä¹‰ï¼Œæ˜¯ä¸ªå¼¹æ€§(æŠ˜ä¸­)çš„ç½‘ç»œï¼Œå®ƒç»“åˆå²­å›å½’å’Œ LASSO å›å½’çš„æ€æƒ³ã€‚</p>
<p>$loss = l(w, b) + Î³Î»||W|| + \frac{(1-Î³)}{2}Î»||W||^2,\quad\quad Î³âˆˆ[0,1]$</p>
<p>Î³ ä»£è¡¨ä¸€ç§æ¯”ç‡ï¼Œå–å€¼ä¸º 0% ~ 100%ï¼Œå½“Î³ = 0æ—¶ï¼Œè¯¥å¼¹æ€§ç½‘ç»œä¸ºå²­å›å½’ï¼›å½“Î³ = 1æ—¶ï¼Œè¯¥å¼¹æ€§ç½‘ç»œä¸º LASSO å›å½’ã€‚</p>
<h2 id="äºŒã€ä¸¢å¼ƒæ³•"><a href="#äºŒã€ä¸¢å¼ƒæ³•" class="headerlink" title="äºŒã€ä¸¢å¼ƒæ³•"></a>äºŒã€ä¸¢å¼ƒæ³•</h2><p>ä¸¢å¼ƒæ³•ï¼Œåˆç§° <strong>DropOut</strong>ï¼Œå…·ä½“åšæ³•æ˜¯åœ¨æ¯ä¸€å±‚è¾“å‡ºåï¼Œéšæœºå°†ä¸€å®šé‡çš„è¾“å‡ºç½®ä¸º0ã€‚é‚£ä¹ˆè¿™ä¹ˆåšçš„ç›®çš„æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ</p>
<p>ä¸€ä¸ªå¥½çš„æ¨¡å‹éœ€è¦å¯¹è¾“å…¥æ•°æ®çš„æ‰°åŠ¨<strong>é²æ£’</strong>ã€‚</p>
<ul>
<li>ä½¿ç”¨æœ‰å™ªéŸ³çš„æ•°æ®ç­‰ä»·äºæ­£åˆ™åŒ–ã€‚</li>
<li>ä¸¢å¼ƒæ³•åˆ™æ˜¯åœ¨å±‚ä¹‹é—´åŠ å…¥å™ªéŸ³ï¼ŒåŒæ—¶ä¹Ÿé™ä½äº†æ¨¡å‹çš„å®¹é‡ã€‚</li>
</ul>
<p><img src="https://z3.ax1x.com/2021/10/18/5admbq.png" alt=""></p>
<p>è¯¶ï¼Œé‚£ä¹ˆè¿™æ—¶æœ‰äººè¦é—®äº†ï¼Œä½ è¿™éšæœºç½®ä¸º0ï¼Œå¯¹xçš„æœŸæœ›éƒ½å˜æ‰äº†ã€‚ä¸ºäº†é˜²æ­¢è¿™æ ·çš„æƒ…å†µï¼Œæˆ‘ä»¬ä¸å•å•æ˜¯å¯¹æ•°æ®ç½®0ï¼Œå¯¹å¦ä¸€éƒ¨åˆ†çš„æ•°æ®ä¹Ÿè¦æ”¹åŠ¨ï¼Œä¿è¯æœŸæœ›ä¸å˜ã€‚</p>
<p>æ³¨ï¼šp æ˜¯ä¸€ä¸ªæ¦‚ç‡å€¼ï¼Œå°†ç¥ç»å…ƒç½®ä¸º0çš„æ¯”ç‡ï¼Œ$pâˆˆ[0,1]$ã€‚</p>
<p><img src="https://z3.ax1x.com/2021/10/18/5awNlQ.png" alt=""></p>
<script type="math/tex; mode=display">
Ex_i' = p * X_i * 0 + (1-p) \frac{x_i}{1-p} = x_i</script><p>å·¦è¾¹æ²¡æœ‰ Dropoutï¼Œå³è¾¹æœ‰ Dropoutã€‚</p>
<p><img src="https://z3.ax1x.com/2021/10/18/5a0N4K.png" alt=""></p>
<p><strong>æ€»ç»“</strong></p>
<ul>
<li>ä¸¢å¼ƒæ³•å°†ä¸€äº›è¾“å‡ºé¡¹éšæœºç½®0æ¥æ§åˆ¶æ¨¡å‹å¤æ‚åº¦ã€‚</li>
<li>å¸¸ä½œç”¨åœ¨å¤šå±‚æ„ŸçŸ¥æœºçš„éšè—å±‚è¾“å‡ºä¸Šã€‚</li>
<li>ä¸¢å¼ƒæ¦‚ç‡æ˜¯æ§åˆ¶æ¨¡å‹å¤æ‚åº¦çš„è¶…å‚æ•°ã€‚</li>
</ul>
]]></content>
      <categories>
        <category>Deep Learning</category>
        <category>Machine Learning</category>
      </categories>
  </entry>
  <entry>
    <title>Spring</title>
    <url>/2021/10/08/Spring/</url>
    <content><![CDATA[<h2 id="1ã€-Spring"><a href="#1ã€-Spring" class="headerlink" title="1ã€ Spring"></a>1ã€ Spring</h2><h4 id="1-1ã€-ç®€ä»‹"><a href="#1-1ã€-ç®€ä»‹" class="headerlink" title="1.1ã€ ç®€ä»‹"></a>1.1ã€ ç®€ä»‹</h4><ul>
<li>Springï¼šæ˜¥å¤© â€”â€”&gt; ç»™è½¯ä»¶è¡Œä¸šå¸¦æ¥äº†æ˜¥å¤©ï¼</li>
<li>2002å¹´ï¼Œé¦–æ¬¡æ¨å‡ºäº† <code>Spring</code> æ¡†æ¶çš„é›å½¢ï¼šinterface21 æ¡†æ¶ï¼</li>
<li><code>Spring</code> æ¡†æ¶å³ä»¥ interface21 æ¡†æ¶ä¸ºåŸºç¡€ï¼Œç»è¿‡é‡æ–°è®¾è®¡ï¼Œå¹¶ä¸æ–­ä¸°å¯Œå…¶å†…æ¶µï¼Œäº2004å¹´3æœˆ24æ—¥ï¼Œå‘å¸ƒäº†1.0æ­£å¼ç‰ˆã€‚</li>
<li><strong>Rod Johnson</strong>ï¼ŒSpring Framework åˆ›å§‹äººï¼Œè‘—åä½œå®¶ï¼Œè¿˜æ˜¯æ‚‰å°¼å¤§å­¦çš„éŸ³ä¹å­¦åšå£«ã€‚</li>
<li>springç†å¿µï¼šä½¿ç°æœ‰çš„æŠ€æœ¯æ›´åŠ å®¹æ˜“ä½¿ç”¨ï¼Œæœ¬èº«æ˜¯ä¸ªå¤§æ‚çƒ©ï¼Œæ•´åˆäº†ç°æœ‰çš„æŠ€æœ¯æ¡†æ¶ï¼</li>
</ul>
<ul>
<li>SSHï¼šStruts2 + Spring + Hibernate</li>
<li>SSMï¼šSpringMvc + Spring + Mybatis</li>
</ul>
<p>å®˜ç½‘ï¼š<a href="https://spring.io/projects/spring-framework#overview">https://spring.io/projects/spring-framework#overview</a></p>
<p>GitHubï¼š<a href="https://github.com/spring-projects/spring-framework">https://github.com/spring-projects/spring-framework</a></p>
<p>maven ä¾èµ–</p>
<figure class="highlight xml"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-webmvc --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.3.9<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-webmvc --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.3.9<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>
<h4 id="1-2ã€ä¼˜ç‚¹"><a href="#1-2ã€ä¼˜ç‚¹" class="headerlink" title="1.2ã€ä¼˜ç‚¹"></a>1.2ã€ä¼˜ç‚¹</h4><ul>
<li>Spring æ˜¯ä¸€ä¸ªå¼€æºå…è´¹çš„æ¡†æ¶ï¼ˆå®¹å™¨ï¼‰ï¼</li>
<li>Spring æ˜¯ä¸€ä¸ªè½»é‡çº§çš„ã€<code>éå…¥ä¾µå¼</code>çš„æ¡†æ¶ï¼</li>
<li>æ§åˆ¶åè½¬ï¼ˆ<code>IOC</code>ï¼‰ï¼Œé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼ˆ<code>AOP</code>ï¼‰ï¼</li>
<li>æ”¯æŒäº‹åŠ¡çš„å¤„ç†ï¼Œå¯¹æ¡†æ¶æ•´åˆçš„æ”¯æŒï¼</li>
</ul>
<p><code>æ€»ç»“ä¸€å¥è¯ï¼šSpringå°±æ˜¯ä¸€ä¸ªè½»é‡çº§çš„æ§åˆ¶åè½¬ï¼ˆIOCï¼‰å’Œé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼ˆAOPï¼‰çš„æ¡†æ¶ï¼</code></p>
<h4 id="1-3ã€ç»„æˆ"><a href="#1-3ã€ç»„æˆ" class="headerlink" title="1.3ã€ç»„æˆ"></a>1.3ã€ç»„æˆ</h4><p><img src="https://z3.ax1x.com/2021/10/08/5PkD2Q.png" alt=""></p>
<h4 id="1-4ã€-æ‹“å±•"><a href="#1-4ã€-æ‹“å±•" class="headerlink" title="1.4ã€ æ‹“å±•"></a>1.4ã€ æ‹“å±•</h4><p>ç°ä»£åŒ–çš„ Java å¼€å‘ï¼Œè¯´ç™½å°±æ˜¯åŸºäº Spring çš„å¼€å‘ï¼</p>
<p><img src="https://z3.ax1x.com/2021/10/08/5PAVJS.png" alt=""></p>
<ul>
<li>Spring Boot<ul>
<li>ä¸€ä¸ª<code>å¿«é€Ÿå¼€å‘</code>çš„è„šæ‰‹æ¶ã€‚</li>
<li>åŸºäº SpringBoot å¯ä»¥å¿«é€Ÿåœ°å¼€å‘å•ä¸ªå¾®æœåŠ¡ã€‚</li>
<li>çº¦å®šå¤§äºé…ç½®ï¼</li>
</ul>
</li>
<li>Spring Cloud<ul>
<li>SpringCloud æ˜¯åŸºäº SpringBoot å®ç°çš„ã€‚</li>
</ul>
</li>
</ul>
<p>å› ä¸ºç°åœ¨å¤§å¤šæ•°å…¬å¸éƒ½åœ¨ä½¿ç”¨ SpringBoot è¿›è¡Œå¿«é€Ÿå¼€å‘ï¼Œå­¦ä¹  SpringBoot çš„å‰æï¼Œéœ€è¦å®Œå…¨æŒæ¡ Spring åŠ SpringMVCï¼èµ·åˆ°æ‰¿ä¸Šå¯ä¸‹çš„ä½œç”¨ï¼</p>
<p>Springå¼Šç«¯ï¼šå‘å±•äº†å¤ªä¹…ä»¥åï¼Œè¿èƒŒäº†åŸæ¥çš„ç†å¿µï¼é…ç½®ååˆ†ç¹çï¼Œäººç§°<code>é…ç½®åœ°ç‹±</code>ï¼</p>
<h2 id="2ã€-IOCç†è®ºæ¨å¯¼"><a href="#2ã€-IOCç†è®ºæ¨å¯¼" class="headerlink" title="2ã€ IOCç†è®ºæ¨å¯¼"></a>2ã€ IOCç†è®ºæ¨å¯¼</h2><h4 id="2-1ã€MVCä¸‰å±‚æ¶æ„"><a href="#2-1ã€MVCä¸‰å±‚æ¶æ„" class="headerlink" title="2.1ã€MVCä¸‰å±‚æ¶æ„"></a>2.1ã€MVCä¸‰å±‚æ¶æ„</h4><p>MVC ï¼ˆæ¨¡å‹è§†å›¾æ§åˆ¶å™¨ï¼‰å³ Modelã€View å’Œ Controllerã€‚</p>
<p><img src="https://z3.ax1x.com/2021/10/08/5PZaLj.png" alt=""></p>
<p><img src="https://z3.ax1x.com/2021/10/08/5PHLBd.png" alt=""></p>
<p>Model</p>
<ul>
<li>ä¸šåŠ¡å¤„ç†ï¼šä¸šåŠ¡é€»è¾‘ï¼ˆServiceï¼‰</li>
<li>æ•°æ®æŒä¹…å±‚ï¼šCRUDï¼ˆDaoï¼‰</li>
</ul>
<p>View</p>
<ul>
<li>å±•ç¤ºæ•°æ®</li>
<li>æä¾›é“¾æ¥å‘èµ·è·¯ç”±è¯·æ±‚ï¼ˆaï¼Œimgï¼Œformâ€¦ï¼‰</li>
</ul>
<p>Controller</p>
<ul>
<li>æ¥å—ç”¨æˆ·è¯·æ±‚ï¼Œrequestï¼šè¯·æ±‚å‚æ•°ã€Sessionä¿¡æ¯â€¦</li>
<li>äº¤ç»™ä¸šåŠ¡å±‚å¤„ç†è¯·æ±‚</li>
<li>æ§åˆ¶è§†å›¾è·³è½¬</li>
</ul>
<p>ä¾‹ï¼š</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line">ç™»å½•---&gt;æ¥å—ç”¨æˆ·çš„ç™»å½•è¯·æ±‚---&gt;å¤„ç†ç”¨æˆ·çš„è¯·æ±‚ï¼ˆè·å–ç”¨æˆ·ç™»å½•çš„å‚æ•°ï¼šusernameï¼Œpasswordï¼‰---&gt;äº¤ç»™ä¸šåŠ¡å±‚å¤„ç†ç™»å½•ä¸šåŠ¡ï¼ˆåˆ¤æ–­ç”¨æˆ·åè´¦å·å¯†ç æ˜¯å¦æ­£ç¡®ï¼šäº‹åŠ¡ï¼‰---&gt;Daoå±‚æŸ¥è¯¢ç”¨æˆ·åå’Œå¯†ç æ˜¯å¦æ­£ç¡®---&gt;æ•°æ®åº“</span><br></pre></td></tr></tbody></table></figure>
<h4 id="2-2ã€å®ä¾‹"><a href="#2-2ã€å®ä¾‹" class="headerlink" title="2.2ã€å®ä¾‹"></a>2.2ã€å®ä¾‹</h4><ol>
<li><p>UserDao æ¥å£</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserDao</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">show</span><span class="params">()</span></span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>UserDaoImpl å®ç°ç±»</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserDaoImpl</span> <span class="keyword">implements</span> <span class="title">UserDao</span></span>{</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">show</span><span class="params">()</span> </span>{</span><br><span class="line">        System.out.println(<span class="string">"é»˜è®¤è·å–ç”¨æˆ·çš„æ•°æ®ï¼"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>UserService ä¸šåŠ¡æ¥å£</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserService</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">show</span><span class="params">()</span></span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>UserServiceImpl ä¸šåŠ¡å®ç°ç±»</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title">UserService</span></span>{</span><br><span class="line">    <span class="keyword">private</span> UserDao userDao = <span class="keyword">new</span> UserDaoImpl();</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">show</span><span class="params">()</span> </span>{</span><br><span class="line">        userDao.show();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>MyTest æµ‹è¯•ç±»</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyTest</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">        <span class="comment">// ç”¨æˆ·å®é™…è°ƒç”¨çš„æ˜¯ä¸šåŠ¡å±‚ï¼ŒDaoå±‚ä»–ä»¬ä¸éœ€è¦æ¥è§¦</span></span><br><span class="line">        UserService userService = <span class="keyword">new</span> UserServiceImpl();</span><br><span class="line">        userService.show();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>Console ç»“æœæ­£å¸¸</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line">é»˜è®¤è·å–ç”¨æˆ·çš„æ•°æ®ï¼</span><br><span class="line"></span><br><span class="line">Process finished with exit code <span class="number">0</span></span><br></pre></td></tr></tbody></table></figure>
</li>
</ol>
<p>å¦‚æœè¿™æ—¶æˆ‘ä»¬éœ€è¦æ·»åŠ ä¸šåŠ¡å‘¢ï¼Ÿ</p>
<ol>
<li><p>æ–°å¢ Dao å®ç°ç±»</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserDaoMysqlImpl</span> <span class="keyword">implements</span> <span class="title">UserDao</span></span>{</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">show</span><span class="params">()</span> </span>{</span><br><span class="line">        System.out.println(<span class="string">"Mysqlè·å–ç”¨æˆ·çš„æ•°æ®ï¼"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>ä¿®æ”¹ä¸šåŠ¡å®ç°ç±»</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title">UserService</span></span>{</span><br><span class="line">    <span class="keyword">private</span> UserDao userDao = <span class="keyword">new</span> UserDaoMysqlImpl();</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">show</span><span class="params">()</span> </span>{</span><br><span class="line">        userDao.show();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>Console ç»“æœæ­£å¸¸</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line">Mysqlè·å–ç”¨æˆ·çš„æ•°æ®ï¼</span><br><span class="line"></span><br><span class="line">Process finished with exit code <span class="number">0</span></span><br></pre></td></tr></tbody></table></figure>
</li>
</ol>
<p>ä½†æ¯æ–°å¢ä¸€ä¸ªä¸šåŠ¡æ“ä½œï¼Œæˆ‘ä»¬å°±è¦å»æ›´æ”¹æˆ‘ä»¬ä¸šåŠ¡ç±»å—ï¼Ÿå¦‚æœç¨‹åºä»£ç é‡ååˆ†åºå¤§ï¼Œä¿®æ”¹ä¸€æ¬¡çš„æˆæœ¬ä»£ä»·å°†ååˆ†æ˜‚è´µï¼Œè¿™æ˜¾ç„¶ä¸å¯èƒ½ã€‚</p>
<p><img src="https://z3.ax1x.com/2021/10/10/5ASIN8.png" alt=""></p>
<p>ä¸ºæ­¤æˆ‘ä»¬éœ€è¦ <code>set</code>æ³¨å…¥ã€‚</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title">UserService</span></span>{</span><br><span class="line">    <span class="keyword">private</span> UserDao userDao = <span class="keyword">new</span> UserDaoImpl();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUserDao</span><span class="params">(UserDao userDao)</span> </span>{</span><br><span class="line">        <span class="keyword">this</span>.userDao = userDao;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">show</span><span class="params">()</span> </span>{</span><br><span class="line">        userDao.show();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyTest</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">        <span class="comment">// ç”¨æˆ·å®é™…è°ƒç”¨çš„æ˜¯ä¸šåŠ¡å±‚ï¼ŒDaoå±‚ä»–ä»¬ä¸éœ€è¦æ¥è§¦</span></span><br><span class="line">        UserServiceImpl userService = <span class="keyword">new</span> UserServiceImpl();</span><br><span class="line">        userService.setUserDao(<span class="keyword">new</span> UserDaoMysqlImpl());</span><br><span class="line">        userService.show();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>ä¹‹å‰ï¼Œç¨‹åºæ˜¯<code>ä¸»åŠ¨</code>åˆ›å»ºå¯¹è±¡ï¼æ§åˆ¶æƒåœ¨ç¨‹åºå‘˜æ‰‹ä¸Šï¼</li>
<li>ç°åœ¨ï¼Œä½¿ç”¨äº† set æ³¨å…¥åï¼Œç¨‹åºä¸å†å…·æœ‰ä¸»åŠ¨æ€§ï¼Œè€Œæ˜¯å˜æˆäº†<code>è¢«åŠ¨</code>çš„æ¥æ”¶å¯¹è±¡ï¼</li>
</ul>
<p>è¿™ç§æ€æƒ³ï¼Œä»æœ¬è´¨ä¸Šè§£å†³äº†é—®é¢˜ï¼Œæˆ‘ä»¬ä¸ç”¨å†å»ç®¡ç†å¯¹è±¡çš„åˆ›å»ºäº†ã€‚ç³»ç»Ÿçš„è€¦åˆæ€§å¤§å¤§é™ä½ï¼Œå¯ä»¥æ›´åŠ ä¸“æ³¨åœ¨ä¸šåŠ¡çš„æ˜¯çº¿ä¸Šï¼è¿™å°±æ˜¯IOCçš„åŸå‹ï¼</p>
<p><img src="https://z3.ax1x.com/2021/10/10/5ASH3Q.png" alt=""></p>
<p><img src="https://z3.ax1x.com/2021/10/10/5ApAD1.png" alt=""></p>
<h4 id="2-3ã€IOCæœ¬è´¨"><a href="#2-3ã€IOCæœ¬è´¨" class="headerlink" title="2.3ã€IOCæœ¬è´¨"></a>2.3ã€IOCæœ¬è´¨</h4><p><strong>æ§åˆ¶ç¿»è½¬Ioc(Inversion of Control)ï¼Œæ˜¯ä¸€ç§è®¾è®¡æ€æƒ³ï¼ŒDI (ä¾èµ–æ³¨å…¥)æ˜¯ä¸€ç§å®ç°Iocçš„ä¸€ç§æ–¹æ³•</strong>ã€‚åœ¨æ²¡æœ‰Iocçš„ç¨‹åºä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼Œå¯¹è±¡çš„åˆ›å»ºä¸å¯¹è±¡é—´çš„ä¾èµ–å…³ç³»å®Œå…¨ç¡¬ç¼–ç åœ¨ç¨‹åºä¸­ï¼Œå¯¹è±¡çš„åˆ›å»ºç”±ç¨‹åºè‡ªå·±æ§åˆ¶ï¼Œæ§åˆ¶ç¿»è½¬åå°†å¯¹è±¡çš„åˆ›å»ºè½¬ç§»ç»™ç¬¬ä¸‰æ–¹ï¼Œä¸ªäººè®¤ä¸ºæ‰€è°“æ§åˆ¶åè½¬å°±æ˜¯<strong>è·å¾—ä¾èµ–å¯¹è±¡çš„æ–¹å¼åè½¬äº†</strong>ã€‚</p>
<p>é‡‡ç”¨ XML æ–¹å¼é…ç½® Bean çš„æ—¶å€™ï¼ŒBean çš„å®šä¹‰ä¿¡æ¯æ˜¯å’Œå®ç°åˆ†ç¦»çš„ï¼Œè€Œé‡‡ç”¨æ³¨è§£çš„æ–¹å¼å¯ä»¥æŠŠä¸¤è€…åˆä¸ºä¸€ä½“ï¼ŒBean çš„å®šä¹‰ä¿¡æ¯ç›´æ¥ä»¥æ³¨è§£çš„å½¢å¼å®šä¹‰åœ¨å®ç°ç±»ä¸­ï¼Œä»è€Œè¾¾åˆ°äº†é›¶é…ç½®çš„ç›®çš„ã€‚</p>
<p><strong>æ§åˆ¶åè½¬æ˜¯ä¸€ç§é€šè¿‡æè¿°ï¼ˆXMLæˆ–æ³¨è§£ï¼‰å¹¶é€šè¿‡ç¬¬ä¸‰æ–¹å»ç”Ÿäº§æˆ–è·å–ç‰¹å®šå¯¹è±¡çš„æ–¹å¼ã€‚åœ¨ Spring ä¸­å®ç°çš„æ§åˆ¶åè½¬çš„æ˜¯ Ioc å®¹å™¨ï¼Œå…¶å®ç°æ–¹å¼æ˜¯ä¾èµ–æ³¨å…¥ï¼ˆDependency Injectionï¼ŒDIï¼‰</strong></p>
<h2 id="3ã€HelloSpring"><a href="#3ã€HelloSpring" class="headerlink" title="3ã€HelloSpring"></a>3ã€HelloSpring</h2><p>å®ä½“ç±»</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Hello</span> </span>{</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>{</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Hello{"</span> +</span><br><span class="line">                <span class="string">"name='"</span> + name + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">'}'</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>xml</p>
<figure class="highlight xml"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"hello"</span> <span class="attr">class</span>=<span class="string">"Hello"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"name"</span> <span class="attr">value</span>=<span class="string">"ä½™åƒç¦§"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>
<p>æµ‹è¯•ç±»</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.support.ClassPathXmlApplicationContext;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyTest</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">        ApplicationContext context = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"beans.xml"</span>);</span><br><span class="line">        Hello hello = (Hello) context.getBean(<span class="string">"hello"</span>);</span><br><span class="line">        System.out.println(hello);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>æ‰“å°ç»“æœ</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line">Hello{name=<span class="string">'ä½™åƒç¦§'</span>}</span><br><span class="line"></span><br><span class="line">Process finished with exit code <span class="number">0</span></span><br></pre></td></tr></tbody></table></figure>
<p>åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œè‡ªå§‹è‡³ç»ˆæˆ‘éƒ½æ²¡æœ‰ä½¿ç”¨ <code>new</code> æ¥åˆ›å»º Hello å¯¹è±¡ï¼Œå¯¹è±¡åˆ›å»ºå’Œå±æ€§èµ‹å€¼å…¨æƒäº¤ç”± IOC å®¹å™¨è§£å†³ï¼Œå®ƒä½¿å¾—ç¨‹åºä»åŸæœ¬<code>ä¸»åŠ¨</code>çš„ç¼–ç¨‹è½¬å˜ä¸º<code>è¢«åŠ¨</code>çš„æ¥å—ã€‚</p>
<p><strong>è‡³ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²ç»å½»åº•ä¸ç”¨å†åˆ°ç¨‹åºä¸­å»æ”¹åŠ¨äº†ï¼Œè¦å®ç°ä¸åŒçš„æ“ä½œï¼Œåªéœ€è¦åœ¨ xml é…ç½®æ–‡ä»¶ä¸­è¿›è¡Œä¿®æ”¹ï¼Œæ‰€è°“ IOCï¼Œå³å¯¹è±¡ç”± Spring åˆ›å»ºã€ç®¡ç†å’Œè£…é…ï¼</strong></p>
<h2 id="jump">4ã€IOCåˆ›å»ºå¯¹è±¡çš„æ–¹å¼</h2>

<p>å®ä½“ç±»</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>{</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String id;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> score;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>{</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(String id)</span> </span>{</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setScore</span><span class="params">(<span class="keyword">int</span> score)</span> </span>{</span><br><span class="line">        <span class="keyword">this</span>.score = score;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"User{"</span> +</span><br><span class="line">                <span class="string">"name='"</span> + name + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">", id='"</span> + id + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">", score="</span> + score +</span><br><span class="line">                <span class="string">'}'</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">User</span><span class="params">(String name, String id, <span class="keyword">int</span> score)</span> </span>{</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">        <span class="keyword">this</span>.score = score;</span><br><span class="line">        System.out.println(<span class="string">"Userç±»å·²è¢«æœ‰å‚æ„é€ æ–¹æ³•åˆ›å»ºï¼"</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">User</span><span class="params">()</span></span>{</span><br><span class="line">        System.out.println(<span class="string">"Userç±»å·²è¢«æ— å‚æ„é€ æ–¹æ³•åˆ›å»ºï¼"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<h4 id="4-1ã€ä½¿ç”¨æ— å‚æ„é€ æ–¹æ³•åˆ›å»ºå¯¹è±¡ï¼ˆé»˜è®¤ï¼‰"><a href="#4-1ã€ä½¿ç”¨æ— å‚æ„é€ æ–¹æ³•åˆ›å»ºå¯¹è±¡ï¼ˆé»˜è®¤ï¼‰" class="headerlink" title="4.1ã€ä½¿ç”¨æ— å‚æ„é€ æ–¹æ³•åˆ›å»ºå¯¹è±¡ï¼ˆé»˜è®¤ï¼‰"></a>4.1ã€ä½¿ç”¨æ— å‚æ„é€ æ–¹æ³•åˆ›å»ºå¯¹è±¡ï¼ˆé»˜è®¤ï¼‰</h4>   <figure class="highlight xml"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"user"</span> <span class="attr">class</span>=<span class="string">"User"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>
<h4 id="4-2ã€-ä½¿ç”¨æœ‰å‚æ„é€ æ–¹æ³•åˆ›å»ºå¯¹è±¡"><a href="#4-2ã€-ä½¿ç”¨æœ‰å‚æ„é€ æ–¹æ³•åˆ›å»ºå¯¹è±¡" class="headerlink" title="4.2ã€ ä½¿ç”¨æœ‰å‚æ„é€ æ–¹æ³•åˆ›å»ºå¯¹è±¡"></a>4.2ã€ ä½¿ç”¨æœ‰å‚æ„é€ æ–¹æ³•åˆ›å»ºå¯¹è±¡</h4><p>(1) æ ¹æ®å‚æ•°åèµ‹å€¼</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">"1.0"</span> encoding=<span class="string">"UTF-8"</span>?&gt;</span><br><span class="line">&lt;beans xmlns=<span class="string">"http://www.springframework.org/schema/beans"</span></span><br><span class="line">       xmlns:xsi=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span><br><span class="line">       xsi:schemaLocation=<span class="string">"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd"</span>&gt;</span><br><span class="line"></span><br><span class="line">    &lt;bean id=<span class="string">"user"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"User"</span>&gt;</span><br><span class="line">        &lt;constructor-arg name=<span class="string">"id"</span> value=<span class="string">"1"</span>/&gt;</span><br><span class="line">        &lt;constructor-arg name=<span class="string">"name"</span> value=<span class="string">"yqx"</span>/&gt;</span><br><span class="line">        &lt;constructor-arg name=<span class="string">"score"</span> value=<span class="string">"10"</span>/&gt;</span><br><span class="line">    &lt;/bean&gt;</span><br><span class="line">&lt;/beans&gt;</span><br></pre></td></tr></tbody></table></figure>
<p>(2) æ ¹æ®å‚æ•°ä¸‹æ ‡èµ‹å€¼</p>
<figure class="highlight xml"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"user"</span> <span class="attr">class</span>=<span class="string">"User"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">index</span>=<span class="string">"0"</span> <span class="attr">value</span>=<span class="string">"ysy"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">index</span>=<span class="string">"1"</span> <span class="attr">value</span>=<span class="string">"2"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">index</span>=<span class="string">"2"</span> <span class="attr">value</span>=<span class="string">"20"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>
<p>(3) æ ¹æ®å‚æ•°ç±»å‹èµ‹å€¼ï¼ˆç›¸åŒåˆ™æŒ‰é¡ºåºèµ‹å€¼ï¼‰</p>
<figure class="highlight xml"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"user"</span> <span class="attr">class</span>=<span class="string">"User"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">type</span>=<span class="string">"java.lang.String"</span> <span class="attr">value</span>=<span class="string">"mc"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">type</span>=<span class="string">"java.lang.String"</span> <span class="attr">value</span>=<span class="string">"3"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">type</span>=<span class="string">"int"</span> <span class="attr">value</span>=<span class="string">"30"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>
<p><code>æ³¨ï¼šåœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œåªè¦æ³¨å†Œåœ¨ beans.xml ä¸­ï¼Œåˆ™æ— è®ºæ˜¯å¦è°ƒç”¨ getBean æ¥è·å–å¯¹è±¡éƒ½ä¼šåœ¨è¯»å–é…ç½®æ–‡ä»¶çš„æ—¶å€™åˆ›å»ºå¥½å¯¹è±¡ï¼Œå› æ­¤è¿”å›çš„éƒ½æ˜¯è¿™ä¸ªäº‹å…ˆè¢«åˆ›å»ºå¥½çš„å¯¹è±¡</code></p>
<p>æ­¤å¤„è¿˜æ²¡è¿è¡Œåˆ° <code>getBean</code> æ—¶ï¼Œå°±å·²ç»æ‰“å°äº†åˆ›å»ºå¯¹è±¡çš„è¯­å¥ã€‚</p>
<p><img src="https://z3.ax1x.com/2021/10/11/5VEsCn.png" alt=""></p>
<p>å¯ä»¥çœ‹åˆ° user1 å’Œ user2 æ˜¯åŒä¸€ä¸ªå¯¹è±¡ã€‚</p>
<p><img src="https://z3.ax1x.com/2021/10/11/5VV2RI.png" alt=""></p>
<h2 id="5ã€Spring-é…ç½®"><a href="#5ã€Spring-é…ç½®" class="headerlink" title="5ã€Spring é…ç½®"></a>5ã€Spring é…ç½®</h2><h4 id="5-1ã€bean-çš„é…ç½®"><a href="#5-1ã€bean-çš„é…ç½®" class="headerlink" title="5.1ã€bean çš„é…ç½®"></a>5.1ã€bean çš„é…ç½®</h4><figure class="highlight xml"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">	id: bean çš„å”¯ä¸€æ ‡è¯†</span></span><br><span class="line"><span class="comment">	class: bean å¯¹è±¡æ‰€å¯¹åº”çš„å…¨é™å®šå(åŒ…å + ç±»å‹)</span></span><br><span class="line"><span class="comment">	name: åˆ«åï¼Œä½†ä¸å”¯ä¸€ï¼Œå¯ä»¥ç”¨ç¬¦å·åˆ†éš”</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"user"</span> <span class="attr">class</span>=<span class="string">"User"</span> <span class="attr">name</span>=<span class="string">"u1,u2 u3;u4"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">type</span>=<span class="string">"java.lang.String"</span> <span class="attr">value</span>=<span class="string">"mc"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">type</span>=<span class="string">"java.lang.String"</span> <span class="attr">value</span>=<span class="string">"3"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">type</span>=<span class="string">"int"</span> <span class="attr">value</span>=<span class="string">"30"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>
<h4 id="5-2ã€åˆ«å"><a href="#5-2ã€åˆ«å" class="headerlink" title="5.2ã€åˆ«å"></a>5.2ã€åˆ«å</h4><figure class="highlight xml"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">	å’Œ name åŠŸèƒ½ä¸€è‡´ï¼Œå¯ä»¥ç»™åˆ«åå†å–åˆ«å</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">alias</span> <span class="attr">name</span>=<span class="string">"user"</span> <span class="attr">alias</span>=<span class="string">"u5"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">alias</span> <span class="attr">name</span>=<span class="string">"u5"</span> <span class="attr">alias</span>=<span class="string">"u6"</span>/&gt;</span></span><br></pre></td></tr></tbody></table></figure>
<h4 id="5-3ã€import"><a href="#5-3ã€import" class="headerlink" title="5.3ã€import"></a>5.3ã€import</h4><p><code>import</code> ä¸€èˆ¬ç”¨äºå›¢é˜Ÿå¼€å‘ä½¿ç”¨ï¼Œå¯ä»¥å°†å¤šä¸ªé…ç½®æ–‡ä»¶å¯¼å…¥åˆå¹¶æˆä¸€ä¸ª</p>
<p>å‡è®¾ï¼Œç°åœ¨é¡¹ç›®ä¸­æœ‰å¤šä¸ªäººå¼€å‘ï¼Œè¿™ä¸‰ä¸ªäººè´Ÿè´£ä¸åŒçš„ç±»å¼€å‘ï¼Œä¸åŒçš„ç±»éœ€è¦æ³¨å†Œåœ¨ä¸åŒçš„ bean ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ <code>import</code> å°†æ‰€æœ‰äººçš„ beans.xml åˆå¹¶æˆä¸€ä¸ªï¼</p>
<ul>
<li>beans1.xml</li>
<li>beans2.xml</li>
<li>beans3.xml</li>
<li>applicaionContext.xml</li>
</ul>
<p>applicationContext.xml ä½œä¸ºæ±‡æ€»çš„é…ç½®æ–‡ä»¶åªéœ€è¦åœ¨å…¶ä¸­å¯¼å…¥å…¶å®ƒé…ç½®æ–‡ä»¶å³å¯ã€‚</p>
<p>æ³¨ï¼šæœ‰å¤šä¸ªé‡å¤çš„ bean æ—¶ï¼Œä¼šåˆå¹¶ä¸€ä¸ªã€‚</p>
<figure class="highlight xml"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">import</span> <span class="attr">resource</span>=<span class="string">"beans1.xml"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">import</span> <span class="attr">resource</span>=<span class="string">"beans2.xml"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">import</span> <span class="attr">resource</span>=<span class="string">"beans3.xml"</span>/&gt;</span></span><br></pre></td></tr></tbody></table></figure>
<p>ä½¿ç”¨çš„æ—¶å€™ç›´æ¥ä½¿ç”¨æ€»çš„é…ç½®æ–‡ä»¶å°±è¡Œã€‚</p>
<h2 id="6ã€ä¾èµ–æ³¨å…¥"><a href="#6ã€ä¾èµ–æ³¨å…¥" class="headerlink" title="6ã€ä¾èµ–æ³¨å…¥"></a>6ã€ä¾èµ–æ³¨å…¥</h2><h4 id="6-1ã€æ„é€ å™¨æ³¨å…¥"><a href="#6-1ã€æ„é€ å™¨æ³¨å…¥" class="headerlink" title="6.1ã€æ„é€ å™¨æ³¨å…¥"></a>6.1ã€æ„é€ å™¨æ³¨å…¥</h4><p>è¯¦æƒ…æŸ¥çœ‹<a href="#jump">IOC åˆ›å»ºå¯¹è±¡çš„æ–¹å¼</a></p>
<h4 id="6-2ã€Setæ–¹å¼æ³¨å…¥-ã€é‡ç‚¹ã€‘"><a href="#6-2ã€Setæ–¹å¼æ³¨å…¥-ã€é‡ç‚¹ã€‘" class="headerlink" title="6.2ã€Setæ–¹å¼æ³¨å…¥ ã€é‡ç‚¹ã€‘"></a>6.2ã€Setæ–¹å¼æ³¨å…¥ ã€é‡ç‚¹ã€‘</h4><ul>
<li>ä¾èµ–æ³¨å…¥ï¼šSet æ³¨å…¥ï¼<ul>
<li>ä¾èµ–ï¼šbean å¯¹è±¡çš„åˆ›å»ºä¾èµ–äºå®¹å™¨ï¼</li>
<li>æ³¨å…¥ï¼šbean å¯¹è±¡ä¸­çš„æ‰€æœ‰å±æ€§ç”±å®¹å™¨æ¥æ³¨å…¥ï¼</li>
</ul>
</li>
</ul>
<figure class="highlight xml"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"address"</span> <span class="attr">class</span>=<span class="string">"Address"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"address"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>å®å±±<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"student"</span> <span class="attr">class</span>=<span class="string">"Student"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--æ™®é€šå€¼æ³¨å…¥--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"name"</span> <span class="attr">value</span>=<span class="string">"yqx"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"age"</span> <span class="attr">value</span>=<span class="string">"20"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--null--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"wife"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">null</span>&gt;</span><span class="tag">&lt;/<span class="name">null</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--å¼•ç”¨ç±»å‹--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"address"</span> <span class="attr">ref</span>=<span class="string">"address"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--list--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"hobbies"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>å”±æ­Œ<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>è·³èˆ<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>é€›Bç«™<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--set--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"games"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">set</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>é£æ¥ä¹‹å›½<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>ä»¥æ’’çš„ç»“åˆ<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>æ€æˆ®å°–å¡”<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--array--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"books"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">array</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>é«˜ç­‰æ•°å­¦<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>çº¿æ€§ä»£æ•°<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>æ¦‚ç‡è®º<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">array</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--map--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"card"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">map</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">"The Sun"</span> <span class="attr">value</span>=<span class="string">"å¤ªé˜³"</span>&gt;</span><span class="tag">&lt;/<span class="name">entry</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">"The Star"</span> <span class="attr">value</span>=<span class="string">"æ˜Ÿæ˜Ÿ"</span>&gt;</span><span class="tag">&lt;/<span class="name">entry</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">"The Hanged Man"</span> <span class="attr">value</span>=<span class="string">"å€’åŠäºº"</span>&gt;</span><span class="tag">&lt;/<span class="name">entry</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">map</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--properties--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"info"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">props</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">"height"</span>&gt;</span>175<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">"weight"</span>&gt;</span>60<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">props</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>
<p>æ‰“å°å†…å®¹</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line">Student{</span><br><span class="line">    name=<span class="string">'yqx'</span>, </span><br><span class="line">    address=Address{address=<span class="string">'å®å±±'</span>}, </span><br><span class="line">    age=<span class="number">20</span>, </span><br><span class="line">    books=[é«˜ç­‰æ•°å­¦, çº¿æ€§ä»£æ•°, æ¦‚ç‡è®º], </span><br><span class="line">    hobbies=[å”±æ­Œ, è·³èˆ, é€›Bç«™], </span><br><span class="line">    card={The Sun=å¤ªé˜³, The Star=æ˜Ÿæ˜Ÿ, The Hanged Man=å€’åŠäºº}, </span><br><span class="line">    games=[é£æ¥ä¹‹å›½, ä»¥æ’’çš„ç»“åˆ, æ€æˆ®å°–å¡”], </span><br><span class="line">    wife=<span class="string">'null'</span>, </span><br><span class="line">    info={height=<span class="number">175</span>, weight=<span class="number">60</span>}}</span><br><span class="line"></span><br><span class="line">Process finished with exit code <span class="number">0</span></span><br></pre></td></tr></tbody></table></figure>
<h4 id="6-3ã€æ‹“å±•æ–¹å¼æ³¨å…¥"><a href="#6-3ã€æ‹“å±•æ–¹å¼æ³¨å…¥" class="headerlink" title="6.3ã€æ‹“å±•æ–¹å¼æ³¨å…¥"></a>6.3ã€æ‹“å±•æ–¹å¼æ³¨å…¥</h4><p>p (parameter) å‘½åç©ºé—´ï¼Œå³ <code>set</code> æ–¹å¼æ³¨å…¥ã€‚</p>
<figure class="highlight xml"><table><tbody><tr><td class="code"><pre><span class="line">xmlns:p="http://www.springframework.org/schema/p"</span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--ä»¥ä¸‹ä¸¤ç§æ–¹å¼ç­‰ä»·--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"user1"</span> <span class="attr">class</span>=<span class="string">"User"</span> <span class="attr">p:name</span>=<span class="string">"yqx"</span> <span class="attr">p:age</span>=<span class="string">"18"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"user1"</span> <span class="attr">class</span>=<span class="string">"User"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"name"</span> <span class="attr">value</span>=<span class="string">"yqx"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"age"</span> <span class="attr">value</span>=<span class="string">"18"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>
<p>c (constructor) å‘½åç©ºé—´ï¼Œå³<code>æ„é€ å™¨</code>æ³¨å…¥ã€‚</p>
<figure class="highlight xml"><table><tbody><tr><td class="code"><pre><span class="line">xmlns:c="http://www.springframework.org/schema/c"</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"user2"</span> <span class="attr">class</span>=<span class="string">"User"</span> <span class="attr">c:name</span>=<span class="string">"deflory"</span> <span class="attr">c:age</span>=<span class="string">"20"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"use2"</span> <span class="attr">class</span>=<span class="string">"User"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">"name"</span> <span class="attr">value</span>=<span class="string">"deflory"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">"age"</span> <span class="attr">value</span>=<span class="string">"20"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>
<p>å‘½åç©ºé—´æ³¨å…¥ç®€åŒ–äº†é…ç½®æ–‡ä»¶çš„ä»£ç ï¼Œä½†éœ€è¦æ˜¾ç¤ºå£°æ˜å‘½åç©ºé—´ã€‚</p>
<figure class="highlight xml"><table><tbody><tr><td class="code"><pre><span class="line">xmlns:p="http://www.springframework.org/schema/p"</span><br><span class="line">xmlns:c="http://www.springframework.org/schema/c"</span><br></pre></td></tr></tbody></table></figure>
<h4 id="6-4ã€Bean-çš„ä½œç”¨åŸŸ"><a href="#6-4ã€Bean-çš„ä½œç”¨åŸŸ" class="headerlink" title="6.4ã€Bean çš„ä½œç”¨åŸŸ"></a>6.4ã€Bean çš„ä½œç”¨åŸŸ</h4><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">ä½œç”¨åŸŸ</th>
<th style="text-align:center">æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">singleton</td>
<td style="text-align:center">è¯¥ä½œç”¨åŸŸå°† bean çš„å®šä¹‰é™åˆ¶åœ¨æ¯ä¸€ä¸ª IoC å®¹å™¨ä¸­çš„ä¸€ä¸ªå•ä¸€å®ä¾‹(é»˜è®¤)ã€‚</td>
</tr>
<tr>
<td style="text-align:center">prototype</td>
<td style="text-align:center">è¯¥ä½œç”¨åŸŸå°†å•ä¸€ bean çš„å®šä¹‰é™åˆ¶åœ¨ä»»æ„æ•°é‡çš„å¯¹è±¡å®ä¾‹ã€‚</td>
</tr>
<tr>
<td style="text-align:center">request</td>
<td style="text-align:center">è¯¥ä½œç”¨åŸŸå°† bean çš„å®šä¹‰é™åˆ¶ä¸º HTTP è¯·æ±‚ã€‚åªåœ¨ web-aware Spring ApplicationContext çš„ä¸Šä¸‹æ–‡ä¸­æœ‰æ•ˆã€‚</td>
</tr>
<tr>
<td style="text-align:center">session</td>
<td style="text-align:center">è¯¥ä½œç”¨åŸŸå°† bean çš„å®šä¹‰é™åˆ¶ä¸º HTTP ä¼šè¯ã€‚ åªåœ¨web-aware Spring ApplicationContextçš„ä¸Šä¸‹æ–‡ä¸­æœ‰æ•ˆã€‚</td>
</tr>
<tr>
<td style="text-align:center">global-session</td>
<td style="text-align:center">è¯¥ä½œç”¨åŸŸå°† bean çš„å®šä¹‰é™åˆ¶ä¸ºå…¨å±€ HTTP ä¼šè¯ã€‚åªåœ¨ web-aware Spring ApplicationContext çš„ä¸Šä¸‹æ–‡ä¸­æœ‰æ•ˆã€‚</td>
</tr>
</tbody>
</table>
</div>
<p>singleton å•ä¾‹æ¨¡å¼ï¼ˆé»˜è®¤ï¼‰</p>
<figure class="highlight xml"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"user"</span> <span class="attr">class</span>=<span class="string">"User"</span> <span class="attr">scope</span>=<span class="string">"singleton"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">"name"</span> <span class="attr">value</span>=<span class="string">"deflory"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">"age"</span> <span class="attr">value</span>=<span class="string">"20"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span>{</span><br><span class="line">    ApplicationContext context = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"beans.xml"</span>);</span><br><span class="line">    User user1 = context.getBean(<span class="string">"user"</span>, User.class);</span><br><span class="line">    User user2 = context.getBean(<span class="string">"user"</span>, User.class);</span><br><span class="line">    System.out.println(user1 == user2);		<span class="comment">// true</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>prototype åŸå‹æ¨¡å¼</p>
<figure class="highlight xml"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"user"</span> <span class="attr">class</span>=<span class="string">"User"</span> <span class="attr">scope</span>=<span class="string">"prototype"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">"name"</span> <span class="attr">value</span>=<span class="string">"deflory"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">"age"</span> <span class="attr">value</span>=<span class="string">"20"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span>{</span><br><span class="line">    ApplicationContext context = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"beans.xml"</span>);</span><br><span class="line">    User user1 = context.getBean(<span class="string">"user"</span>, User.class);</span><br><span class="line">    User user2 = context.getBean(<span class="string">"user"</span>, User.class);</span><br><span class="line">    System.out.println(user1 == user2);		<span class="comment">// false</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<h2 id="7ã€Bean-çš„è‡ªåŠ¨è£…é…"><a href="#7ã€Bean-çš„è‡ªåŠ¨è£…é…" class="headerlink" title="7ã€Bean çš„è‡ªåŠ¨è£…é…"></a>7ã€Bean çš„è‡ªåŠ¨è£…é…</h2><h4 id="7-1ã€ByNameè‡ªåŠ¨è£…é…"><a href="#7-1ã€ByNameè‡ªåŠ¨è£…é…" class="headerlink" title="7.1ã€ByNameè‡ªåŠ¨è£…é…"></a>7.1ã€ByNameè‡ªåŠ¨è£…é…</h4><p>ä¼šè‡ªåŠ¨å¯»æ‰¾ä¸å±æ€§<code>ç±»å</code>ç›¸åŒçš„ bean_id (é¦–å­—æ¯å°å†™)ã€‚</p>
<figure class="highlight xml"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"cat"</span> <span class="attr">class</span>=<span class="string">"Cat"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"dog"</span> <span class="attr">class</span>=<span class="string">"Dog"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"person"</span> <span class="attr">class</span>=<span class="string">"Person"</span> <span class="attr">autowire</span>=<span class="string">"byName"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>
<h4 id="7-2ã€ByNameè‡ªåŠ¨è£…é…"><a href="#7-2ã€ByNameè‡ªåŠ¨è£…é…" class="headerlink" title="7.2ã€ByNameè‡ªåŠ¨è£…é…"></a>7.2ã€ByNameè‡ªåŠ¨è£…é…</h4><p>ä¼šè‡ªåŠ¨å¯»æ‰¾ä¸<code>å±æ€§</code>ç›¸åŒç±»å‹çš„ bean (è¯¥ç±»å‹å¿…é¡»å”¯ä¸€)ã€‚</p>
<figure class="highlight xml"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"Cat"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"Dog"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"person"</span> <span class="attr">class</span>=<span class="string">"Person"</span> <span class="attr">autowire</span>=<span class="string">"byType"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>
<p>æ€»ç»“ï¼šåœ¨ä½¿ç”¨ ByName æ—¶ï¼Œéœ€è¦æŒ‡å®šå’Œç±»åå°å†™ç›¸åŒçš„ bean_idï¼›</p>
<p>â€‹            åœ¨ä½¿ç”¨ ByType æ—¶ï¼Œä¸å±æ€§åŒç±»å‹çš„ bean å¿…é¡»å”¯ä¸€ã€‚</p>
<h4 id="7-3ã€ä½¿ç”¨æ³¨è§£å®ç°è‡ªåŠ¨è£…é…"><a href="#7-3ã€ä½¿ç”¨æ³¨è§£å®ç°è‡ªåŠ¨è£…é…" class="headerlink" title="7.3ã€ä½¿ç”¨æ³¨è§£å®ç°è‡ªåŠ¨è£…é…"></a>7.3ã€ä½¿ç”¨æ³¨è§£å®ç°è‡ªåŠ¨è£…é…</h4><p>ä½¿ç”¨å‰æï¼š<code>å¯¼å…¥çº¦æŸ</code>å¹¶å¼€å¯<code>æ³¨è§£æ”¯æŒ</code></p>
<figure class="highlight xml"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">    http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">    http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="string"><span class="tag">    http://www.springframework.org/schema/context/spring-context.xsd"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="tag">&lt;<span class="name">context:annotation-config</span>/&gt;</span></span><br><span class="line">   <span class="comment">&lt;!-- bean definitions go here --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>
<p><strong>@Autowired æ³¨è§£</strong></p>
<p>é»˜è®¤ä½¿ç”¨ ByType çš„æ–¹å¼ï¼Œä¸è¡Œåˆ™ä½¿ç”¨ ByNameã€‚</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>{</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> Dog dog;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> Cat cat;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Dog <span class="title">getDog</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> dog;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Cat <span class="title">getCat</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> cat;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>å¯ä»¥ä½¿ç”¨ <code>@Qualifier</code> æ¥æŒ‡å®š bean_id</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Qualifier;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>{</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> Dog dog;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="meta">@Qualifier(value = "cat11")</span></span><br><span class="line">    <span class="keyword">private</span> Cat cat;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Dog <span class="title">getDog</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> dog;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Cat <span class="title">getCat</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> cat;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p><strong>@Resource æ³¨è§£ ï¼ˆJava åŸç”Ÿæ³¨è§£ï¼‰</strong></p>
<p>é»˜è®¤ä½¿ç”¨ ByName çš„æ–¹å¼ï¼Œä¸è¡Œåˆ™ä½¿ç”¨ ByTypeã€‚</p>
<p>åŠŸèƒ½æ›´ä¸ºå¼ºå¤§ï¼Œå¯ä»¥æŒ‡å®š bean_idï¼Œç›¸å½“äºä¸Šè¿°ä¸¤ä¸ªæ³¨è§£çš„ç»“åˆã€‚</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> javax.annotation.Resource;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>{</span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> Dog dog;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource(name = "cat11")</span></span><br><span class="line">    <span class="keyword">private</span> Cat cat;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Dog <span class="title">getDog</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> dog;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Cat <span class="title">getCat</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> cat;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<h2 id="8ã€ä½¿ç”¨æ³¨è§£å¼€å‘"><a href="#8ã€ä½¿ç”¨æ³¨è§£å¼€å‘" class="headerlink" title="8ã€ä½¿ç”¨æ³¨è§£å¼€å‘"></a>8ã€ä½¿ç”¨æ³¨è§£å¼€å‘</h2><p>å¿…é¡»æŒ‡å®š<code>æ‰«æ</code>å¸¦æœ‰æ³¨è§£çš„åŒ…æ‰èƒ½ä½¿ç”¨</p>
<figure class="highlight xml"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"com.yqx.pojo"</span>/&gt;</span></span><br></pre></td></tr></tbody></table></figure>
<h4 id="8-1ã€å±æ€§æ³¨å…¥"><a href="#8-1ã€å±æ€§æ³¨å…¥" class="headerlink" title="8.1ã€å±æ€§æ³¨å…¥"></a>8.1ã€å±æ€§æ³¨å…¥</h4><ul>
<li><p>@Component è¡¨æ˜è¯¥ç±»è¢« Spring æ‰˜ç®¡ï¼Œid ä¸ºç±»åé¦–å­—æ¯å°å†™ã€‚</p>
</li>
<li><p>@Value ç»™å±æ€§æ³¨å…¥å€¼ã€‚</p>
</li>
</ul>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.yqx.pojo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>{</span><br><span class="line">    <span class="meta">@Value("yqx")</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<h4 id="8-2ã€æ³¨è§£çš„è¡ç”Ÿ"><a href="#8-2ã€æ³¨è§£çš„è¡ç”Ÿ" class="headerlink" title="8.2ã€æ³¨è§£çš„è¡ç”Ÿ"></a>8.2ã€æ³¨è§£çš„è¡ç”Ÿ</h4><ul>
<li>@Component æœ‰å‡ ä¸ªè¡ç”Ÿæ³¨è§£ï¼Œåœ¨ web å¼€å‘ä¸­ï¼Œä¼šæŒ‰ç…§ mvc ä¸‰å±‚æ¶æ„åˆ†å±‚ï¼<ul>
<li>Dao ã€@Repositoryã€‘</li>
<li>Service ã€@Serviceã€‘</li>
<li>Controller ã€@Controllerã€‘</li>
</ul>
</li>
</ul>
<p>è¿™å››ä¸ªæ³¨è§£åŠŸèƒ½éƒ½æ˜¯ä¸€æ ·çš„ï¼Œéƒ½æ˜¯å°†æŸä¸ªç±»æ³¨å†Œåˆ° Spring ä¸­ï¼Œè£…é… Beanã€‚</p>
<h4 id="8-3ã€ä½œç”¨åŸŸ"><a href="#8-3ã€ä½œç”¨åŸŸ" class="headerlink" title="8.3ã€ä½œç”¨åŸŸ"></a>8.3ã€ä½œç”¨åŸŸ</h4><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.yqx.pojo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Scope;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Scope("prototype")</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>{</span><br><span class="line">    <span class="meta">@Value("yqx")</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<h4 id="8-4ã€å°ç»“"><a href="#8-4ã€å°ç»“" class="headerlink" title="8.4ã€å°ç»“"></a>8.4ã€å°ç»“</h4><p>xml ä¸ æ³¨è§£ï¼š</p>
<ul>
<li>xml æ›´åŠ ä¸‡èƒ½ï¼Œé€‚ç”¨äºä»»ä½•åœºåˆï¼ç»´æŠ¤ç®€å•æ–¹ä¾¿ï¼Œåªéœ€ä¿®æ”¹é…ç½®æ–‡ä»¶ã€‚</li>
<li>æ³¨è§£ç»´æŠ¤ç¹çï¼Œåˆ†æ•£åœ¨å„ä¸ªå®ä½“ç±»ä¸­ã€‚</li>
</ul>
<p>xml ä¸ æ³¨è§£æœ€ä½³å®è·µï¼š</p>
<ul>
<li>xml ç”¨æ¥ç®¡ç† beanã€‚</li>
<li>æ³¨è§£åªè´Ÿè´£å®Œæˆå±æ€§æ³¨å…¥ã€‚</li>
</ul>
<h2 id="9ã€ä½¿ç”¨-Java-çš„æ–¹å¼é…ç½®-Spring"><a href="#9ã€ä½¿ç”¨-Java-çš„æ–¹å¼é…ç½®-Spring" class="headerlink" title="9ã€ä½¿ç”¨ Java çš„æ–¹å¼é…ç½® Spring"></a>9ã€ä½¿ç”¨ Java çš„æ–¹å¼é…ç½® Spring</h2><p><strong>@Configuration</strong></p>
<p>åŸºäº Java çš„é…ç½®é€‰é¡¹ï¼Œå¯ä»¥æ˜¯ä½ åœ¨ä¸ç”¨é…ç½® XML çš„æƒ…å†µä¸‹ç¼–å†™å¤§éƒ¨åˆ†çš„ Springã€‚</p>
<ul>
<li>@Configuration ç”¨äºç±»ä¸Šï¼Œè¡¨ç¤ºè¿™ä¸ªç±»å¯ä»¥ä½¿ç”¨ Spring IOC å®¹å™¨ä½œä¸º Bean å®šä¹‰çš„æ¥æºã€‚</li>
<li>@Bean ç”¨äºæ–¹æ³•ä¸Šï¼Œè¿™ä¸ªæ–¹æ³•è¦è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œè€Œè¯¥å¯¹è±¡ä¼šè¢«æ³¨å†Œä¸ºåœ¨ Spring åº”ç”¨ç¨‹åºä¸Šä¸‹æ–‡ä¸­çš„ Beanã€‚</li>
</ul>
<p>å®ä½“ç±»</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>{</span><br><span class="line">    <span class="meta">@Value("deflory")</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>Java é…ç½®ç±»</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AppConfig</span> </span>{</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">getUser</span><span class="params">()</span></span>{</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> User();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>ä¸Šé¢çš„ Java é…ç½®ç±»ç­‰åŒäºä¸‹é¢çš„ XML é…ç½®ã€‚</p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œbean_id å’Œ @Bean ä¿®é¥°çš„<code>æ–¹æ³•å</code>ä¸€è‡´ã€‚</p>
<figure class="highlight xml"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">beans</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"getUser"</span> <span class="attr">class</span>=<span class="string">"User"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>
<p>æ³¨ï¼šè™½ç„¶ @Bean ä¸­æ˜¯ return new User()ï¼Œä½†é»˜è®¤è¿˜æ˜¯<code>å•ä¾‹</code>æ¨¡å¼ã€‚</p>
<p><strong>@Import</strong></p>
<p>@import æ³¨è§£å…è®¸ä»å¦ä¸€ä¸ªé…ç½®ç±»ä¸­åŠ è½½ @Bean å®šä¹‰ã€‚</p>
<p>å¦ä¸€ä¸ªé…ç½®ç±»</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConfigA</span> </span>{</span><br><span class="line">   <span class="meta">@Bean</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> A <span class="title">a</span><span class="params">()</span> </span>{</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> A(); </span><br><span class="line">   }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>ä¸»é…ç½®ç±»</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@Import(ConfigA.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConfigB</span> </span>{</span><br><span class="line">   <span class="meta">@Bean</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> B <span class="title">b</span><span class="params">()</span> </span>{</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> B(); </span><br><span class="line">   }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>æµ‹è¯•ç±»</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">   ApplicationContext context = </span><br><span class="line">   <span class="keyword">new</span> AnnotationConfigApplicationContext(ConfigB.class);</span><br><span class="line">   A a = context.getBean(A.class);</span><br><span class="line">   B b = context.getBean(B.class);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<h2 id="10ã€ä»£ç†æ¨¡å¼"><a href="#10ã€ä»£ç†æ¨¡å¼" class="headerlink" title="10ã€ä»£ç†æ¨¡å¼"></a>10ã€ä»£ç†æ¨¡å¼</h2><p>ä»£ç†æ¨¡å¼çš„åˆ†ç±»ï¼š</p>
<ul>
<li>é™æ€ä»£ç†</li>
<li>åŠ¨æ€ä»£ç†</li>
</ul>
<p><img src="https://z3.ax1x.com/2021/10/16/5JbxhQ.png" alt=""></p>
<h4 id="10-1ã€-é™æ€ä»£ç†"><a href="#10-1ã€-é™æ€ä»£ç†" class="headerlink" title="10.1ã€ é™æ€ä»£ç†"></a>10.1ã€ é™æ€ä»£ç†</h4><p>è§’è‰²åˆ†æï¼š</p>
<ul>
<li>æŠ½è±¡è§’è‰²ï¼šä¸€èˆ¬ä¼šä½¿ç”¨æ¥å£æˆ–è€…æŠ½è±¡ç±»æ¥è§£å†³ã€‚</li>
<li>çœŸå®è§’è‰²ï¼šè¢«ä»£ç†çš„è§’è‰²ã€‚</li>
<li>ä»£ç†è§’è‰²ï¼šä»£ç†çœŸå®è§’è‰²ï¼Œæ·»åŠ é¢å¤–æ“ä½œã€‚</li>
<li>å®¢æˆ·ï¼šè®¿é—®ä»£ç†å¯¹è±¡çš„äººã€‚</li>
</ul>
<p>ä»£ç ï¼š</p>
<ol>
<li><p>æ¥å£</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> demo01;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Rent</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">rent</span><span class="params">()</span></span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>çœŸå®è§’è‰²</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> demo01;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Landlord</span> <span class="keyword">implements</span> <span class="title">Rent</span></span>{</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">rent</span><span class="params">()</span> </span>{</span><br><span class="line">        System.out.println(<span class="string">"æˆ¿ä¸œè¦å‡ºç§Ÿæˆ¿å­"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>ä»£ç†è§’è‰²</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> demo01;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Agent</span> <span class="keyword">implements</span> <span class="title">Rent</span></span>{</span><br><span class="line">    Rent landlord;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Agent</span><span class="params">(Rent landlord)</span> </span>{</span><br><span class="line">        <span class="keyword">this</span>.landlord = landlord;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">rent</span><span class="params">()</span> </span>{</span><br><span class="line">        findRenter();</span><br><span class="line">        landlord.rent();</span><br><span class="line">        negotiation();</span><br><span class="line">        fee();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">fee</span><span class="params">()</span></span>{</span><br><span class="line">        System.out.println(<span class="string">"ä¸­ä»‹æ”¶å–ä¸­ä»‹è´¹"</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">findRenter</span><span class="params">()</span></span>{</span><br><span class="line">        System.out.println(<span class="string">"ä¸­ä»‹å¯»æ‰¾ç§Ÿå®¢"</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">negotiation</span><span class="params">()</span></span>{</span><br><span class="line">        System.out.println(<span class="string">"ä¸­ä»‹ç­¾è®¢åˆåŒ"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>å®¢æˆ·ç«¯è®¿é—®ä»£ç†è§’è‰²</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> demo01;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyTest01</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">        Rent agent = <span class="keyword">new</span> Agent(<span class="keyword">new</span> Landlord());</span><br><span class="line">        agent.rent();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
</li>
</ol>
<p>ä»£ç†æ¨¡å¼çš„å¥½å¤„ï¼š</p>
<ul>
<li>å¯ä»¥ä½¿çœŸå®è§’è‰²çš„æ“ä½œæ›´åŠ çº¯ç²¹ï¼ä¸ç”¨å»å…³æ³¨ä¸€äº›å…¬å…±çš„ä¸šåŠ¡ã€‚</li>
<li>å…¬å…±ä¸šåŠ¡äº¤ä»£ä»£ç†è§’è‰²ï¼Œå®ç°äº†ä¸šåŠ¡çš„åˆ†å·¥ã€‚</li>
<li>å…¬å…±ä¸šåŠ¡å‘ç”Ÿæ‹“å±•çš„æ—¶å€™ï¼Œæ–¹ä¾¿é›†ä¸­ç®¡ç†ã€‚</li>
</ul>
<p>ç¼ºç‚¹ï¼š</p>
<ul>
<li>ä¸€ä¸ªçœŸå®è§’è‰²å°±ä¼šäº§ç”Ÿä¸€ä¸ªä»£ç†è§’è‰²ï¼Œä»£ç é‡ä¼šç¿»å€ï¼Œå¼€å‘æ•ˆç‡ä¼šå˜ä½ã€‚</li>
</ul>
<h4 id="10-2ã€åŠ¨æ€ä»£ç†"><a href="#10-2ã€åŠ¨æ€ä»£ç†" class="headerlink" title="10.2ã€åŠ¨æ€ä»£ç†"></a>10.2ã€åŠ¨æ€ä»£ç†</h4><ul>
<li>åŠ¨æ€ä»£ç†å’Œé™æ€ä»£ç†è§’è‰²ä¸€æ ·</li>
<li>åŠ¨æ€ä»£ç†çš„ä»£ç†ç±»æ˜¯åŠ¨æ€ç”Ÿæˆçš„ï¼Œè€Œéç¨‹åºå‘˜æ‰‹å†™çš„ï¼</li>
<li>åŠ¨æ€ä»£ç†åˆ†ä¸ºä¸¤å¤§ç±»ï¼šåŸºäºæ¥å£çš„åŠ¨æ€ä»£ç†ï¼ŒåŸºäºç±»çš„åŠ¨æ€ä»£ç†ã€‚<ul>
<li>åŸºäºæ¥å£ï¼šJDK åŠ¨æ€ä»£ç† ã€ä¸‹è¿°ä½¿ç”¨ã€‘</li>
<li>åŸºäºç±»ï¼šcglib</li>
<li>java å­—èŠ‚ç å®ç°ï¼šjavasist</li>
</ul>
</li>
</ul>
<p>éœ€è¦äº†è§£ä¸¤ä¸ªç±»ï¼š</p>
<ul>
<li>Proxyï¼šä»£ç†</li>
<li>InvocationHandlerï¼šè°ƒç”¨å¤„ç†ç¨‹åº</li>
</ul>
<p>ä¼˜ç‚¹ï¼š</p>
<ul>
<li>åŒ…å«é™æ€ä»£ç†çš„ä¼˜ç‚¹ã€‚</li>
<li>ä¸€ä¸ªåŠ¨æ€ä»£ç†ç±»ä»£ç†çš„æ˜¯ä¸€ä¸ªæ¥å£ï¼Œå¯¹åº”ä¸€ç±»ä¸šåŠ¡ã€‚</li>
</ul>
<h2 id="11ã€AOP"><a href="#11ã€AOP" class="headerlink" title="11ã€AOP"></a>11ã€AOP</h2><p>Spring æ¡†æ¶çš„ä¸€ä¸ªå…³é”®ç»„ä»¶æ˜¯<strong>é¢å‘åˆ‡é¢çš„ç¼–ç¨‹</strong>(AOP)æ¡†æ¶ã€‚é¢å‘åˆ‡é¢çš„ç¼–ç¨‹éœ€è¦æŠŠç¨‹åºé€»è¾‘åˆ†è§£æˆä¸åŒçš„éƒ¨åˆ†ç§°ä¸ºæ‰€è°“çš„å…³æ³¨ç‚¹ã€‚è·¨ä¸€ä¸ªåº”ç”¨ç¨‹åºçš„å¤šä¸ªç‚¹çš„åŠŸèƒ½è¢«ç§°ä¸º<strong>æ¨ªåˆ‡å…³æ³¨ç‚¹</strong>ï¼Œè¿™äº›æ¨ªåˆ‡å…³æ³¨ç‚¹åœ¨æ¦‚å¿µä¸Šç‹¬ç«‹äºåº”ç”¨ç¨‹åºçš„ä¸šåŠ¡é€»è¾‘ã€‚</p>
<h4 id="11-1ã€é€šçŸ¥ç±»å‹"><a href="#11-1ã€é€šçŸ¥ç±»å‹" class="headerlink" title="11.1ã€é€šçŸ¥ç±»å‹"></a>11.1ã€é€šçŸ¥ç±»å‹</h4><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">é€šçŸ¥</th>
<th style="text-align:left">æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">å‰ç½®é€šçŸ¥</td>
<td style="text-align:left">åœ¨ä¸€ä¸ªæ–¹æ³•æ‰§è¡Œä¹‹å‰ï¼Œæ‰§è¡Œé€šçŸ¥ã€‚</td>
</tr>
<tr>
<td style="text-align:left">åç½®é€šçŸ¥</td>
<td style="text-align:left">åœ¨ä¸€ä¸ªæ–¹æ³•æ‰§è¡Œä¹‹åï¼Œä¸è€ƒè™‘å…¶ç»“æœï¼Œæ‰§è¡Œé€šçŸ¥ã€‚</td>
</tr>
<tr>
<td style="text-align:left">è¿”å›åé€šçŸ¥</td>
<td style="text-align:left">åœ¨ä¸€ä¸ªæ–¹æ³•æ‰§è¡Œä¹‹åï¼Œåªæœ‰åœ¨æ–¹æ³•æˆåŠŸå®Œæˆæ—¶ï¼Œæ‰èƒ½æ‰§è¡Œé€šçŸ¥ã€‚</td>
</tr>
<tr>
<td style="text-align:left">æŠ›å‡ºå¼‚å¸¸åé€šçŸ¥</td>
<td style="text-align:left">åœ¨ä¸€ä¸ªæ–¹æ³•æ‰§è¡Œä¹‹åï¼Œåªæœ‰åœ¨æ–¹æ³•é€€å‡ºæŠ›å‡ºå¼‚å¸¸æ—¶ï¼Œæ‰èƒ½æ‰§è¡Œé€šçŸ¥ã€‚</td>
</tr>
<tr>
<td style="text-align:left">ç¯ç»•é€šçŸ¥</td>
<td style="text-align:left">åœ¨å»ºè®®æ–¹æ³•è°ƒç”¨ä¹‹å‰å’Œä¹‹åï¼Œæ‰§è¡Œé€šçŸ¥ã€‚</td>
</tr>
</tbody>
</table>
</div>
<h4 id="11-2ã€åœ¨-Spring-ä¸­ä½¿ç”¨-Aop"><a href="#11-2ã€åœ¨-Spring-ä¸­ä½¿ç”¨-Aop" class="headerlink" title="11.2ã€åœ¨ Spring ä¸­ä½¿ç”¨ Aop"></a>11.2ã€åœ¨ Spring ä¸­ä½¿ç”¨ Aop</h4><p>å¯¼å…¥ä¾èµ–åŒ…</p>
<figure class="highlight xml"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.aspectj<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>aspectjweaver<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.9.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>
<p>æ·»åŠ çº¦æŸ</p>
<figure class="highlight xml"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:aop</span>=<span class="string">"http://www.springframework.org/schema/aop"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">        https://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">        http://www.springframework.org/schema/aop</span></span></span><br><span class="line"><span class="string"><span class="tag">        https://www.springframework.org/schema/aop/spring-aop.xsd"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>
<p><strong>(1) åŸç”Ÿ Spring Api æ¥å£</strong></p>
<p>xml é…ç½®</p>
<figure class="highlight xml"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"userService"</span> <span class="attr">class</span>=<span class="string">"com.yqx.service.UserServiceImpl"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"log"</span> <span class="attr">class</span>=<span class="string">"com.yqx.log.Log"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--æ–¹å¼ä¸€ï¼šä½¿ç”¨åŸç”Ÿçš„Spring APIæ¥å£--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--é…ç½®aop--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--åˆ‡å…¥ç‚¹--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">"pointcut"</span> <span class="attr">expression</span>=<span class="string">"execution(* com.yqx.service.UserServiceImpl.*(..))"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--æ‰§è¡Œç¯ç»•å¢åŠ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:advisor</span> <span class="attr">advice-ref</span>=<span class="string">"log"</span> <span class="attr">pointcut-ref</span>=<span class="string">"pointcut"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>
<p>æ—¥å¿—ç±»ï¼Œè¿™é‡Œé‡‡ç”¨äº†å¤šå®ç°ã€‚</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.yqx.log;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.aop.AfterReturningAdvice;</span><br><span class="line"><span class="keyword">import</span> org.springframework.aop.MethodBeforeAdvice;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Method;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Log</span> <span class="keyword">implements</span> <span class="title">MethodBeforeAdvice</span>, <span class="title">AfterReturningAdvice</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">afterReturning</span><span class="params">(Object returnValue, Method method, Object[] args, Object target)</span> <span class="keyword">throws</span> Throwable </span>{</span><br><span class="line">        System.out.println(method.getName() + <span class="string">"æ–¹æ³•æ‰§è¡Œå®Œæ¯•ï¼Œè¿”å›å€¼ä¸ºï¼š"</span> + returnValue);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">before</span><span class="params">(Method method, Object[] args, Object target)</span> <span class="keyword">throws</span> Throwable </span>{</span><br><span class="line">        System.out.println(target.getClass().getName() + <span class="string">"ä¸­çš„"</span> + method.getName() + <span class="string">"æ–¹æ³•è¢«è°ƒç”¨äº†ï¼"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>Test æµ‹è¯•ç±»</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> com.yqx.service.UserService;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.support.ClassPathXmlApplicationContext;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyTest</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">        ClassPathXmlApplicationContext context = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"applicationContext.xml"</span>);</span><br><span class="line">        <span class="comment">// åŠ¨æ€ä»£ç†ä»£ç†çš„æ˜¯æ¥å£ï¼Œå› æ­¤åªèƒ½è½¬ä¸ºæ¥å£ç±»å‹</span></span><br><span class="line">        UserService userService = (UserService) context.getBean(<span class="string">"userService"</span>);</span><br><span class="line">        userService.add();</span><br><span class="line">        userService.query();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p><strong>(2) è‡ªå®šä¹‰ç±»</strong></p>
<p>æ—¥å¿—ç±»</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.yqx.log;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyLog</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">before</span><span class="params">()</span></span>{</span><br><span class="line">        System.out.println(<span class="string">"å‰ç½®é€šçŸ¥"</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">after</span><span class="params">()</span></span>{</span><br><span class="line">        System.out.println(<span class="string">"åç½®é€šçŸ¥"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>xml</p>
<figure class="highlight xml"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"userService"</span> <span class="attr">class</span>=<span class="string">"com.yqx.service.UserServiceImpl"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"myLog"</span> <span class="attr">class</span>=<span class="string">"com.yqx.log.MyLog"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--è‡ªå®šä¹‰åˆ‡é¢--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:aspect</span> <span class="attr">ref</span>=<span class="string">"myLog"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--åˆ‡å…¥ç‚¹--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">"pointout"</span> <span class="attr">expression</span>=<span class="string">"execution(* com.yqx.service.UserServiceImpl.*(..))"</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--é€šçŸ¥--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:before</span> <span class="attr">method</span>=<span class="string">"before"</span> <span class="attr">pointcut-ref</span>=<span class="string">"pointout"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:after</span> <span class="attr">method</span>=<span class="string">"after"</span> <span class="attr">pointcut-ref</span>=<span class="string">"pointout"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">aop:aspect</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>
<p>è™½ç„¶æ–¹ä¾¿ï¼Œä½†æ— æ³•è·å–ç±»ä¸æ–¹æ³•çš„ä¿¡æ¯ï¼ŒåŠŸèƒ½ä¸å¤Ÿå¼ºå¤§ã€‚</p>
<p><strong>(3) æ³¨è§£</strong></p>
<p>æ—¥å¿—ç±»</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.yqx.log;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.ProceedingJoinPoint;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.After;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.Around;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.Aspect;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.Before;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AnnotationLog</span> </span>{</span><br><span class="line">    <span class="meta">@Before("execution(* com.yqx.service.UserServiceImpl.*(..))")</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">before</span><span class="params">()</span></span>{</span><br><span class="line">        System.out.println(<span class="string">"å‰ç½®é€šçŸ¥"</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@After("execution(* com.yqx.service.UserServiceImpl.*(..))")</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">after</span><span class="params">()</span></span>{</span><br><span class="line">        System.out.println(<span class="string">"åç½®é€šçŸ¥"</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Around("execution(* com.yqx.service.UserServiceImpl.*(..))")</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">around</span><span class="params">(ProceedingJoinPoint joinPoint)</span> <span class="keyword">throws</span> Throwable </span>{</span><br><span class="line">        System.out.println(<span class="string">"ç¯ç»•å‰"</span>);</span><br><span class="line">        System.out.println(joinPoint.getSignature());</span><br><span class="line">        System.out.println(joinPoint.getArgs());</span><br><span class="line">        joinPoint.proceed();</span><br><span class="line">        System.out.println(<span class="string">"ç¯ç»•å"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>xml</p>
<figure class="highlight xml"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:aop</span>=<span class="string">"http://www.springframework.org/schema/aop"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">        https://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">        http://www.springframework.org/schema/aop</span></span></span><br><span class="line"><span class="string"><span class="tag">        https://www.springframework.org/schema/aop/spring-aop.xsd http://www.springframework.org/schema/context https://www.springframework.org/schema/context/spring-context.xsd"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"userService"</span> <span class="attr">class</span>=<span class="string">"com.yqx.service.UserServiceImpl"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:aspectj-autoproxy</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"com.yqx.log"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>
<p>æ‰“å°å†…å®¹</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line">ç¯ç»•å‰</span><br><span class="line"><span class="keyword">void</span> com.yqx.service.UserService.add()</span><br><span class="line">[Ljava.lang.Object;@6c6cb480</span><br><span class="line">å‰ç½®é€šçŸ¥</span><br><span class="line">æ·»åŠ äº†ä¸€æ¡æ•°æ®</span><br><span class="line">åç½®é€šçŸ¥</span><br><span class="line">ç¯ç»•å</span><br><span class="line">ç¯ç»•å‰</span><br><span class="line"><span class="keyword">void</span> com.yqx.service.UserService.query()</span><br><span class="line">[Ljava.lang.Object;@3c46e67a</span><br><span class="line">å‰ç½®é€šçŸ¥</span><br><span class="line">æŸ¥è¯¢äº†ä¸€æ¡æ•°æ®</span><br><span class="line">åç½®é€šçŸ¥</span><br><span class="line">ç¯ç»•å</span><br><span class="line"></span><br><span class="line">Process finished with exit code <span class="number">0</span></span><br></pre></td></tr></tbody></table></figure>
]]></content>
      <categories>
        <category>SSM</category>
      </categories>
  </entry>
</search>
